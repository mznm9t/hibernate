<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Chapter&nbsp;5.&nbsp;Basic O/R Mapping</title>
      <link rel="stylesheet" href="css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="HIBERNATE - Relational Persistence for Idiomatic Java">
      <link rel="up" href="index.html" title="HIBERNATE - Relational Persistence for Idiomatic Java">
      <link rel="prev" href="persistent-classes-extensions.html" title="4.6.&nbsp;Extentsions">
      <link rel="next" href="mapping-types.html" title="5.2.&nbsp;Hibernate Types">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">Chapter&nbsp;5.&nbsp;Basic O/R Mapping</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="persistent-classes-extensions.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">&nbsp;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="mapping-types.html">Next</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="chapter" lang="en-US">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title"><a name="mapping"></a>Chapter&nbsp;5.&nbsp;Basic O/R Mapping
                  </h2>
               </div>
            </div>
         </div>
         <div class="sect1" lang="en-US">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="mapping-declaration"></a>5.1.&nbsp;Mapping declaration
                     </h2>
                  </div>
               </div>
            </div>
            <p>
               Object/relational mappings are usually defined in an XML document. The mapping
               document is designed to be readable and hand-editable. The mapping language is
               Java-centric, meaning that mappings are constructed around persistent class
                           declarations, not table declarations.
                       
            </p>
            <p>
                           Note that, even though many Hibernate users choose to write the XML by hand,
                           a number of tools exist to generate the mapping document, including XDoclet,
                           Middlegen and AndroMDA.
                       
            </p>
            <p>
                           Lets kick off with an example mapping:
                       
            </p><a name="mapping-declaration-ex1"></a><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC
      "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;

&lt;hibernate-mapping package="eg"&gt;

        &lt;class name="Cat"
            table="cats"
            discriminator-value="C"&gt;

                &lt;id name="id"&gt;
                        &lt;generator class="native"/&gt;
                &lt;/id&gt;

                &lt;discriminator column="subclass"
                     type="character"/&gt;

                &lt;property name="weight"/&gt;

                &lt;property name="birthdate"
                    type="date"
                    not-null="true"
                    update="false"/&gt;

                &lt;property name="color"
                    type="eg.types.ColorUserType"
                    not-null="true"
                    update="false"/&gt;

                &lt;property name="sex"
                    not-null="true"
                    update="false"/&gt;

                &lt;property name="litterId"
                    column="litterId"
                    update="false"/&gt;

                &lt;many-to-one name="mother"
                    column="mother_id"
                    update="false"/&gt;

                &lt;set name="kittens"
                    inverse="true"
                    order-by="litter_id"&gt;
                        &lt;key column="mother_id"/&gt;
                        &lt;one-to-many class="Cat"/&gt;
                &lt;/set&gt;

                &lt;subclass name="DomesticCat"
                    discriminator-value="D"&gt;

                        &lt;property name="name"
                            type="string"/&gt;

                &lt;/subclass&gt;

        &lt;/class&gt;

        &lt;class name="Dog"&gt;
                &lt;!-- mapping for Dog could go here --&gt;
        &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                            We will now discuss the content of the mapping document. We will only describe the
                            document elements and attributes that are used by Hibernate at runtime. The mapping
                            document also contains some extra optional attributes and elements that affect the
                            database schemas exported by the schema export tool. (For example the <code class="literal">
                               not-null</code> attribute.)
                       
            </p>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-doctype"></a>5.1.1.&nbsp;Doctype
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  All XML mappings should declare the doctype shown. The actual DTD may be found
                                  at the URL above, in the directory <code class="literal">hibernate-x.x.x/src/org/hibernate
                                     </code> or in <code class="literal">hibernate3.jar</code>. Hibernate will always look for
                                  the DTD in its classpath first. If you experience lookups of the DTD using an
                                  Internet connection, check your DTD declaration against the contents of your
                                  claspath.
                              
               </p>
               <div class="sect3" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-entity-resolution"></a>5.1.1.1.&nbsp;EntityResolver
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>
                                         As mentioned previously, Hibernate will first attempt to resolve DTDs in its classpath.  The
                                         manner in which it does this is by registering a custom <code class="literal">org.xml.sax.EntityResolver</code>
                                         implementation with the SAXReader it uses to read in the xml files.  This custom
                                         <code class="literal">EntityResolver</code> recognizes two different systemId namespaces.
                                     
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p>
                                                          a <code class="literal">hibernate namespace</code> is recognized whenever the
                                                          resolver encounteres a systemId starting with
                                                          <code class="literal">http://hibernate.sourceforge.net/</code>; the resolver
                                                          attempts to resolve these entities via the classlaoder which loaded
                                                          the Hibernate classes.
                                                      
                           </p>
                        </li>
                        <li>
                           <p>
                                                          a <code class="literal">user namespace</code> is recognized whenever the
                                                          resolver encounteres a systemId using a <code class="literal">classpath://</code>
                                                          URL protocol; the resolver will attempt to resolve these entities
                                                          via (1) the current thread context classloader and (2) the
                                                          classloader which loaded the Hibernate classes.
                                                      
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>
                                         An example of utilizing user namespacing:
                                     
                  </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" [
    &lt;!ENTITY types SYSTEM "classpath://your/domain/types.xml"&gt;
]&gt;

&lt;hibernate-mapping package="your.domain"&gt;
    &lt;class name="MyEntity"&gt;
        &lt;id name="id" type="my-custom-id-type"&gt;
            ...
        &lt;/id&gt;
    &lt;class&gt;
    &amp;types;
&lt;/hibernate-mapping&gt;</pre><p>
                                         Where <code class="literal">types.xml</code> is a resource in the <code class="literal">your.domain</code>
                                         package and contains a custom <a href="mapping-types.html#mapping-types-custom" title="5.2.3.&nbsp;Custom value types">typedef</a>.
                                     
                  </p>
               </div>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-mapping"></a>5.1.2.&nbsp;hibernate-mapping
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  This element has several optional attributes. The <code class="literal">schema</code> and
                                  <code class="literal">catalog</code> attributes specify that tables referred to in this mapping
                                  belong to the named schema and/or catalog. If specified, tablenames will be qualified
                                  by the given schema and catalog names. If missing, tablenames will be unqualified.
                                  The <code class="literal">default-cascade</code> attribute specifies what cascade style
                                  should be assumed for properties and collections which do not specify a
                                  <code class="literal">cascade</code> attribute. The <code class="literal">auto-import</code> attribute lets us
                                  use unqualified class names in the query language, by default.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;hibernate-mapping
         schema="schemaName"                          <span class="co">(1)</span>
         catalog="catalogName"                        <span class="co">(2)</span>
         default-cascade="cascade_style"              <span class="co">(3)</span>
         default-access="field|property|ClassName"    <span class="co">(4)</span>
         default-lazy="true|false"                    <span class="co">(5)</span>
         auto-import="true|false"                     <span class="co">(6)</span>
         package="package.name"                       <span class="co">(7)</span>
 /&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                              <code class="literal">schema</code> (optional): The name of a database schema.
                                                          
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                              <code class="literal">catalog</code> (optional): The name of a database catalog.
                                                          
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                              <code class="literal">default-cascade</code> (optional - defaults to <code class="literal">none</code>):
                                                              A default cascade style.
                                                          
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                              <code class="literal">default-access</code> (optional - defaults to <code class="literal">property</code>):
                                                              The strategy Hibernate should use for accessing all properties. Can be a custom
                                                              implementation of <code class="literal">PropertyAccessor</code>.
                                                          
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                              <code class="literal">default-lazy</code> (optional - defaults to <code class="literal">true</code>):
                                                              The default value for unspecifed <code class="literal">lazy</code> attributes of class and
                                                              collection mappings.
                                                          
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                              <code class="literal">auto-import</code> (optional - defaults to <code class="literal">true</code>):
                                                              Specifies whether we can use unqualified class names (of classes in this mapping)
                                                              in the query language.
                                                          
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                              <code class="literal">package</code> (optional): Specifies a package prefix to assume for
                                                              unqualified class names in the mapping document.
                                                          
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                   If you have two persistent classes with the same (unqualified) name, you should set
                                   <code class="literal">auto-import="false"</code>. Hibernate will throw an exception if you attempt
                                   to assign two classes to the same "imported" name.
                               
               </p>
               <p>
                                   Note that the <code class="literal">hibernate-mapping</code> element allows you to nest
                                   several persistent <code class="literal">&lt;class&gt;</code> mappings, as shown above.
                                   It is however good practice (and expected by some tools) to map only a single
                                   persistent class (or a single class hierarchy) in one mapping file and name
                                   it after the persistent superclass, e.g. <code class="literal">Cat.hbm.xml</code>,
                                   <code class="literal">Dog.hbm.xml</code>, or if using inheritance,
                                   <code class="literal">Animal.hbm.xml</code>.
                               
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-class"></a>5.1.3.&nbsp;class
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  You may declare a persistent class using the <code class="literal">class</code> element:
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;class
        name="ClassName"                              <span class="co">(1)</span>
        table="tableName"                             <span class="co">(2)</span>
        discriminator-value="discriminator_value"     <span class="co">(3)</span>
        mutable="true|false"                          <span class="co">(4)</span>
        schema="owner"                                <span class="co">(5)</span>
        catalog="catalog"                             <span class="co">(6)</span>
        proxy="ProxyInterface"                        <span class="co">(7)</span>
        dynamic-update="true|false"                   <span class="co">(8)</span>
        dynamic-insert="true|false"                   <span class="co">(9)</span>
        select-before-update="true|false"             <span class="co">(10)</span>
        polymorphism="implicit|explicit"              <span class="co">(11)</span>
        where="arbitrary sql where condition"         <span class="co">(12)</span>
        persister="PersisterClass"                    <span class="co">(13)</span>
        batch-size="N"                                <span class="co">(14)</span>
        optimistic-lock="none|version|dirty|all"      <span class="co">(15)</span>
        lazy="true|false"                             <span class="co">(16)</span>
        entity-name="EntityName"                      <span class="co">(17)</span>
        check="arbitrary sql check condition"         <span class="co">(18)</span>
        rowid="rowid"                                 <span class="co">(19)</span>
        subselect="SQL expression"                    <span class="co">(20)</span>
        abstract="true|false"                         <span class="co">(21)</span>
        node="element-name"
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code> (optional): The fully qualified Java class name of the
                                                             persistent class (or interface). If this attribute is missing, it is assumed
                                                             that the mapping is for a non-POJO entity.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">table</code> (optional - defaults to the unqualified class name):  The
                                                             name of its database table.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">discriminator-value</code> (optional - defaults to the class name): A value
                                                             that distiguishes individual subclasses, used for polymorphic behaviour. Acceptable
                                                             values include <code class="literal">null</code> and <code class="literal">not null</code>.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">mutable</code> (optional, defaults to <code class="literal">true</code>): Specifies
                                                             that instances of the class are (not) mutable.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">schema</code> (optional): Override the schema name specified by
                                                             the root <code class="literal">&lt;hibernate-mapping&gt;</code> element.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">catalog</code> (optional): Override the catalog name specified by
                                                             the root <code class="literal">&lt;hibernate-mapping&gt;</code> element.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">proxy</code> (optional): Specifies an interface to use for lazy
                                                             initializing proxies. You may specify the name of the class itself.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(8)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">dynamic-update</code> (optional, defaults to <code class="literal">false</code>):
                                                             Specifies that <code class="literal">UPDATE</code> SQL should be generated at runtime and
                                                             contain only those columns whose values have changed.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(9)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">dynamic-insert</code> (optional, defaults to <code class="literal">false</code>):
                                                             Specifies that <code class="literal">INSERT</code> SQL should be generated at runtime and
                                                             contain only the columns whose values are not null.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(10)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">select-before-update</code> (optional, defaults to <code class="literal">false</code>):
                                                             Specifies that Hibernate should <span class="emphasis"><em>never</em></span> perform an SQL <code class="literal">UPDATE</code>
                                                             unless it is certain that an object is actually modified. In certain cases (actually, only
                                                             when a transient object has been associated with a new session using <code class="literal">update()</code>),
                                                             this means that Hibernate will perform an extra SQL <code class="literal">SELECT</code> to determine
                                                             if an <code class="literal">UPDATE</code> is actually required.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(11)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">polymorphism</code> (optional, defaults to <code class="literal">implicit</code>):
                                                             Determines whether implicit or explicit query polymorphism is used.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(12)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">where</code> (optional) specify an arbitrary SQL <code class="literal">WHERE</code>
                                                             condition to be used when retrieving objects of this class
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(13)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">persister</code> (optional): Specifies a custom <code class="literal">ClassPersister</code>.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(14)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">batch-size</code> (optional, defaults to <code class="literal">1</code>) specify a "batch size"
                                                             for fetching instances of this class by identifier.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(15)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">optimistic-lock</code> (optional, defaults to <code class="literal">version</code>):
                                                             Determines the optimistic locking strategy.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(16)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">lazy</code> (optional): Lazy fetching may be completely disabled by setting
                                                             <code class="literal">lazy="false"</code>.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(17)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">entity-name</code> (optional, defaults to the class name): Hibernate3
                                                             allows a class to be mapped multiple times (to different tables, potentially),
                                                             and allows entity mappings that are represented by Maps or XML at the Java level.
                                                             In these cases, you should provide an explicit arbitrary name for the entity. See
                                                             <a href="persistent-classes-dynamicmodels.html" title="4.4.&nbsp;Dynamic models">Section&nbsp;4.4, &#8220;Dynamic models&#8221;</a> and <a href="xml.html" title="Chapter&nbsp;18.&nbsp;XML Mapping">Chapter&nbsp;18, <i xmlns:xlink="http://www.w3.org/1999/xlink">XML Mapping</i></a>
                                                             for more information.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(18)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">check</code> (optional): A SQL expression used to generate a multi-row
                                                             <span class="emphasis"><em>check</em></span> constraint for automatic schema generation.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(19)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">rowid</code> (optional): Hibernate can use so called ROWIDs on databases
                                                             which support. E.g. on Oracle, Hibernate can use the <code class="literal">rowid</code> extra
                                                             column for fast updates if you set this option to <code class="literal">rowid</code>. A ROWID
                                                             is an implementation detail and represents the physical location of a stored tuple.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(20)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">subselect</code> (optional): Maps an immutable and read-only entity
                                                             to a database subselect. Useful if you want to have a view instead of a base table,
                                                             but don't. See below for more information.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(21)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">abstract</code> (optional): Used to mark abstract superclasses in
                                                             <code class="literal">&lt;union-subclass&gt;</code> hierarchies.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  It is perfectly acceptable for the named persistent class to be an interface. You would then
                                  declare implementing classes of that interface using the <code class="literal">&lt;subclass&gt;</code>
                                  element. You may persist any <span class="emphasis"><em>static</em></span> inner class. You should specify the
                                  class name using the standard form ie. <code class="literal">eg.Foo$Bar</code>.
                              
               </p>
               <p>
                                  Immutable classes, <code class="literal">mutable="false"</code>, may not be updated or deleted by the
                                  application. This allows Hibernate to make some minor performance optimizations.
                              
               </p>
               <p>
                                  The optional <code class="literal">proxy</code> attribute enables lazy initialization of persistent
                                  instances of the class. Hibernate will initially return CGLIB proxies which implement
                                  the named interface. The actual persistent object will be loaded when a method of the
                                  proxy is invoked. See "Initializing collections and proxies" below.
                              
               </p>
               <p><span class="emphasis"><em>Implicit</em></span> polymorphism means that instances of the class will be returned
                                  by a query that names any superclass or implemented interface or the class and that instances
                                  of any subclass of the class will be returned by a query that names the class itself.
                                  <span class="emphasis"><em>Explicit</em></span> polymorphism means that class instances will be returned only
                                  by queries that explicitly name that class and that queries that name the class will return
                                  only instances of subclasses mapped inside this <code class="literal">&lt;class&gt;</code> declaration
                                  as a <code class="literal">&lt;subclass&gt;</code> or <code class="literal">&lt;joined-subclass&gt;</code>. For
                                  most purposes the default, <code class="literal">polymorphism="implicit"</code>, is appropriate.
                                  Explicit polymorphism is useful when two different classes are mapped to the same table
                                  (this allows a "lightweight" class that contains a subset of the table columns).
                              
               </p>
               <p>
                                  The <code class="literal">persister</code> attribute lets you customize the persistence strategy used for
                                  the class. You may, for example, specify your own subclass of
                                  <code class="literal">org.hibernate.persister.EntityPersister</code> or you might even provide a
                                  completely new implementation of the interface
                                  <code class="literal">org.hibernate.persister.ClassPersister</code> that implements persistence via,
                                  for example, stored procedure calls, serialization to flat files or LDAP. See
                                  <code class="literal">org.hibernate.test.CustomPersister</code> for a simple example (of "persistence"
                                  to a <code class="literal">Hashtable</code>).
                              
               </p>
               <p>
                                  Note that the <code class="literal">dynamic-update</code> and <code class="literal">dynamic-insert</code>
                                  settings are not inherited by subclasses and so may also be specified on the
                                  <code class="literal">&lt;subclass&gt;</code> or <code class="literal">&lt;joined-subclass&gt;</code> elements.
                                  These settings may increase performance in some cases, but might actually decrease
                                  performance in others. Use judiciously.
                              
               </p>
               <p>
                                  Use of <code class="literal">select-before-update</code> will usually decrease performance. It is very
                                  useful to prevent a database update trigger being called unnecessarily if you reattach a
                                  graph of detached instances to a <code class="literal">Session</code>.
                              
               </p>
               <p>
                                  If you enable <code class="literal">dynamic-update</code>, you will have a choice of optimistic
                                  locking strategies:
                              
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>
                                                   <code class="literal">version</code> check the version/timestamp columns
                                               
                        </p>
                     </li>
                     <li>
                        <p>
                                                   <code class="literal">all</code> check all columns
                                               
                        </p>
                     </li>
                     <li>
                        <p>
                                                   <code class="literal">dirty</code> check the changed columns, allowing some concurrent updates
                                               
                        </p>
                     </li>
                     <li>
                        <p>
                                                   <code class="literal">none</code> do not use optimistic locking
                                               
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                                  We <span class="emphasis"><em>very</em></span> strongly recommend that you use version/timestamp
                                  columns for optimistic locking with Hibernate. This is the optimal strategy with
                                  respect to performance and is the only strategy that correctly handles modifications
                                  made to detached instances (ie. when <code class="literal">Session.merge()</code> is used).
                              
               </p>
               <p>
                                  There is no difference between a view and a base table for a Hibernate mapping, as
                                  expected this is transparent at the database level (note that some DBMS don't support
                                  views properly, especially with updates). Sometimes you want to use a view, but can't
                                  create one in the database (ie. with a legacy schema). In this case, you can map an
                                  immutable and read-only entity to a given SQL subselect expression:
                              
               </p><pre class="programlisting">&lt;class name="Summary"&gt;
    &lt;subselect&gt;
        select item.name, max(bid.amount), count(*)
        from item
        join bid on bid.item_id = item.id
        group by item.name
    &lt;/subselect&gt;
    &lt;synchronize table="item"/&gt;
    &lt;synchronize table="bid"/&gt;
    &lt;id name="name"/&gt;
    ...
&lt;/class&gt;</pre><p>
                                  Declare the tables to synchronize this entity with, ensuring that auto-flush happens
                                  correctly, and that queries against the derived entity do not return stale data.
                                  The <code class="literal">&lt;subselect&gt;</code> is available as both as an attribute and
                                  a nested mapping element.
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-id"></a>5.1.4.&nbsp;id
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  Mapped classes <span class="emphasis"><em>must</em></span> declare the primary key column of the database
                                  table. Most classes will also have a JavaBeans-style property holding the unique identifier
                                  of an instance. The <code class="literal">&lt;id&gt;</code> element defines the mapping from that
                                  property to the primary key column.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;id
        name="propertyName"                                          <span class="co">(1)</span>
        type="typename"                                              <span class="co">(2)</span>
        column="column_name"                                         <span class="co">(3)</span>
        unsaved-value="null|any|none|undefined|id_value"             <span class="co">(4)</span>
        access="field|property|ClassName"&gt;                           <span class="co">(5)</span>
        node="element-name|@attribute-name|element/@attribute|."

        &lt;generator class="generatorClass"/&gt;
&lt;/id&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code> (optional): The name of the identifier property.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">type</code> (optional): A name that indicates the Hibernate type.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">column</code> (optional - defaults to the property name): The
                                                             name of the primary key column.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">unsaved-value</code> (optional - defaults to a "sensible" value):
                                                             An identifier property value that indicates that an instance is newly instantiated
                                                             (unsaved), distinguishing it from detached instances that were saved or loaded
                                                             in a previous session.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The
                                                             strategy Hibernate should use for accessing the property value.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  If the <code class="literal">name</code> attribute is missing, it is assumed that the class has no
                                  identifier property.
                              
               </p>
               <p>
                                  The <code class="literal">unsaved-value</code> attribute is almost never needed in Hibernate3.
                              
               </p>
               <p>
                                  There is an alternative <code class="literal">&lt;composite-id&gt;</code> declaration to allow access to
                                  legacy data with composite keys. We strongly discourage its use for anything else.
                              
               </p>
               <div class="sect3" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-generator"></a>5.1.4.1.&nbsp;Generator
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>
                                         The optional <code class="literal">&lt;generator&gt;</code> child element names a Java class used
                                         to generate unique identifiers for instances of the persistent class. If any parameters
                                         are required to configure or initialize the generator instance, they are passed using the
                                         <code class="literal">&lt;param&gt;</code> element.
                                     
                  </p><pre class="programlisting">&lt;id name="id" type="long" column="cat_id"&gt;
        &lt;generator class="org.hibernate.id.TableHiLoGenerator"&gt;
                &lt;param name="table"&gt;uid_table&lt;/param&gt;
                &lt;param name="column"&gt;next_hi_value_column&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                                         All generators implement the interface <code class="literal">org.hibernate.id.IdentifierGenerator</code>.
                                         This is a very simple interface; some applications may choose to provide their own specialized
                                         implementations. However, Hibernate provides a range of built-in implementations. There are shortcut
                                         names for the built-in generators:
                     
                                         
                  </p>
                  <div class="variablelist">
                     <dl>
                        <dt><span class="term"><code class="literal">increment</code></span></dt>
                        <dd>
                           <p>
                                                              generates identifiers of type <code class="literal">long</code>, <code class="literal">short</code> or
                                                              <code class="literal">int</code> that are unique only when no other process is inserting data
                                                              into the same table.
                                                              <span class="emphasis"><em>Do not use in a cluster.</em></span>
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">identity</code></span></dt>
                        <dd>
                           <p>
                                                              supports identity columns in DB2, MySQL, MS SQL Server, Sybase and
                                                              HypersonicSQL. The returned identifier is of type <code class="literal">long</code>,
                                                              <code class="literal">short</code> or <code class="literal">int</code>.
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">sequence</code></span></dt>
                        <dd>
                           <p>
                                                              uses a sequence in DB2, PostgreSQL, Oracle, SAP DB, McKoi or a generator
                                                              in Interbase. The returned identifier is of type <code class="literal">long</code>,
                                                              <code class="literal">short</code> or <code class="literal">int</code>
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">hilo</code></span></dt>
                        <dd>
                           <p><a name="mapping-declaration-id-hilodescription"></a>
                                                              uses a hi/lo algorithm to efficiently generate identifiers of
                                                              type <code class="literal">long</code>, <code class="literal">short</code> or <code class="literal">int</code>,
                                                              given a table and column (by default <code class="literal">hibernate_unique_key</code> and
                                                              <code class="literal">next_hi</code> respectively) as a source of hi values. The hi/lo
                                                              algorithm generates identifiers that are unique only for a particular database.
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">seqhilo</code></span></dt>
                        <dd>
                           <p>
                                                              uses a hi/lo algorithm to efficiently generate identifiers of type
                                                              <code class="literal">long</code>, <code class="literal">short</code> or <code class="literal">int</code>,
                                                              given a named database sequence.
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">uuid</code></span></dt>
                        <dd>
                           <p>
                                                              uses a 128-bit UUID algorithm to generate identifiers of type string,
                                                              unique within a network (the IP address is used). The UUID is encoded
                                                              as a string of hexadecimal digits of length 32.
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">guid</code></span></dt>
                        <dd>
                           <p>
                                                              uses a database-generated GUID string on MS SQL Server and MySQL.
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">native</code></span></dt>
                        <dd>
                           <p>
                                                              picks <code class="literal">identity</code>, <code class="literal">sequence</code> or
                                                              <code class="literal">hilo</code> depending upon the capabilities of the
                                                              underlying database.
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">assigned</code></span></dt>
                        <dd>
                           <p>
                                                              lets the application to assign an identifier to the object before
                                                              <code class="literal">save()</code> is called. This is the default strategy
                                                              if no <code class="literal">&lt;generator&gt;</code> element is specified.
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">select</code></span></dt>
                        <dd>
                           <p>
                                                              retrieves a primary key assigned by a database trigger by selecting
                                                              the row by some unique key and retrieving the primary key value.
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">foreign</code></span></dt>
                        <dd>
                           <p>
                                                              uses the identifier of another associated object. Usually used in conjunction
                                                              with a <code class="literal">&lt;one-to-one&gt;</code> primary key association.
                                                          
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">sequence-identity</code></span></dt>
                        <dd>
                           <p>
                                                              a specialized sequence generation strategy which utilizes a
                                                              database sequence for the actual value generation, but combines
                                                              this with JDBC3 getGeneratedKeys to actually return the generated
                                                              identifier value as part of the insert statement execution.  This
                                                              strategy is only known to be supported on Oracle 10g drivers
                                                              targetted for JDK 1.4.  Note comments on these insert statements
                                                              are disabled due to a bug in the Oracle drivers.
                                                          
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <p>
                     
                                     
                  </p>
               </div>
               <div class="sect3" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-hilo"></a>5.1.4.2.&nbsp;Hi/lo algorithm
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>
                                         The <code class="literal">hilo</code> and <code class="literal">seqhilo</code> generators provide two alternate
                                         implementations of the hi/lo algorithm, a favorite approach to identifier generation. The
                                         first implementation requires a "special" database table to hold the next available "hi" value.
                                         The second uses an Oracle-style sequence (where supported).
                                     
                  </p><pre class="programlisting">&lt;id name="id" type="long" column="cat_id"&gt;
        &lt;generator class="hilo"&gt;
                &lt;param name="table"&gt;hi_value&lt;/param&gt;
                &lt;param name="column"&gt;next_value&lt;/param&gt;
                &lt;param name="max_lo"&gt;100&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><pre class="programlisting">&lt;id name="id" type="long" column="cat_id"&gt;
        &lt;generator class="seqhilo"&gt;
                &lt;param name="sequence"&gt;hi_value&lt;/param&gt;
                &lt;param name="max_lo"&gt;100&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                                         Unfortunately, you can't use <code class="literal">hilo</code> when supplying your own
                                         <code class="literal">Connection</code> to Hibernate. When Hibernate is using an application
                                         server datasource to obtain connections enlisted with JTA, you must properly configure
                                         the <code class="literal">hibernate.transaction.manager_lookup_class</code>.
                                     
                  </p>
               </div>
               <div class="sect3" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-uuid"></a>5.1.4.3.&nbsp;UUID algorithm
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>
                                         The UUID contains: IP address, startup time of the JVM (accurate to a quarter
                                         second), system time and a counter value (unique within the JVM). It's not
                                         possible to obtain a MAC address or memory address from Java code, so this is
                                         the best we can do without using JNI.
                                     
                  </p>
               </div>
               <div class="sect3" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-sequences"></a>5.1.4.4.&nbsp;Identity columns and sequences
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>
                                         For databases which support identity columns (DB2, MySQL, Sybase, MS SQL), you
                                         may use <code class="literal">identity</code> key generation. For databases that support
                                         sequences (DB2, Oracle, PostgreSQL, Interbase, McKoi, SAP DB) you may use
                                         <code class="literal">sequence</code> style key generation. Both these strategies require
                                         two SQL queries to insert a new object.
                                     
                  </p><pre class="programlisting">&lt;id name="id" type="long" column="person_id"&gt;
        &lt;generator class="sequence"&gt;
                &lt;param name="sequence"&gt;person_id_sequence&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><pre class="programlisting">&lt;id name="id" type="long" column="person_id" unsaved-value="0"&gt;
        &lt;generator class="identity"/&gt;
&lt;/id&gt;</pre><p>
                                         For cross-platform development, the <code class="literal">native</code> strategy will
                                         choose from the <code class="literal">identity</code>, <code class="literal">sequence</code> and
                                         <code class="literal">hilo</code> strategies, dependant upon the capabilities of the
                                         underlying database.
                                     
                  </p>
               </div>
               <div class="sect3" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-assigned"></a>5.1.4.5.&nbsp;Assigned identifiers
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>
                                         If you want the application to assign identifiers (as opposed to having
                                         Hibernate generate them), you may use the <code class="literal">assigned</code> generator.
                                         This special generator will use the identifier value already assigned to the
                                         object's identifier property. This generator is used when the primary key
                                         is a natural key instead of a surrogate key. This is the default behavior
                                         if you do no specify a <code class="literal">&lt;generator&gt;</code> element.
                                     
                  </p>
                  <p>
                                         Choosing the <code class="literal">assigned</code> generator makes Hibernate use
                                         <code class="literal">unsaved-value="undefined"</code>, forcing Hibernate to go to
                                         the database to determine if an instance is transient or detached, unless
                                         there is a version or timestamp property, or you define
                                         <code class="literal">Interceptor.isUnsaved()</code>.
                                     
                  </p>
               </div>
               <div class="sect3" lang="en-US">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-select"></a>5.1.4.6.&nbsp;Primary keys assigned by triggers
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>
                                         For legacy schemas only (Hibernate does not generate DDL with triggers).
                                     
                  </p><pre class="programlisting">&lt;id name="id" type="long" column="person_id"&gt;
        &lt;generator class="select"&gt;
                &lt;param name="key"&gt;socialSecurityNumber&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><p>
                                         In the above example, there is a unique valued property named
                                         <code class="literal">socialSecurityNumber</code> defined by the class, as a
                                         natural key, and a surrogate key named <code class="literal">person_id</code>
                                         whose value is generated by a trigger.
                                     
                  </p>
               </div>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-id-enhanced"></a>5.1.5.&nbsp;Enhanced identifier generators
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  Starting with release 3.2.3, there are 2 new generators which represent a re-thinking of 2 different
                                  aspects of identifier generation.  The first aspect is database portability; the second is optimization
                                  (not having to query the database for every request for a new identifier value).  These two new
                                  generators are intended to take the place of some of the named generators described above (starting
                                  in 3.3.x); however, they are included in the current releases and can be referenced by FQN.
                              
               </p>
               <p>
                                  The first of these new generators is <code class="literal">org.hibernate.id.enhanced.SequenceStyleGenerator</code>
                                  which is intended firstly as a replacement for the <code class="literal">sequence</code> generator and secondly as
                                  a better portability generator than <code class="literal">native</code> (because <code class="literal">native</code>
                                  (generally) chooses between <code class="literal">identity</code> and <code class="literal">sequence</code> which have
                                  largely different semantics which can cause subtle isssues in applications eyeing portability).
                                  <code class="literal">org.hibernate.id.enhanced.SequenceStyleGenerator</code> however achieves portability in
                                  a different manner.  It chooses between using a table or a sequence in the database to store its
                                  incrementing values depending on the capabilities of the dialect being used.  The difference between this
                                  and <code class="literal">native</code> is that table-based and sequence-based storage have the same exact
                                  semantic (in fact sequences are exactly what Hibernate tries to emmulate with its table-based
                                  generators).  This generator has a number of configuration parameters:
                                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p>
                                                       <code class="literal">sequence_name</code> (optional, defaults to <code class="literal">hibernate_sequence</code>):
                                                       The name of the sequence (or table) to be used.
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">initial_value</code> (optional, defaults to <code class="literal">1</code>): The initial
                                                       value to be retrieved from the sequence/table.  In sequence creation terms, this is analogous
                                                       to the clause typical named "STARTS WITH".
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">increment_size</code> (optional, defaults to <code class="literal">1</code>): The value by
                                                       which subsequent calls to the sequence/table should differ.  In sequence creation terms, this
                                                       is analogous to the clause typical named "INCREMENT BY".
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">force_table_use</code> (optional, defaults to <code class="literal">false</code>): Should
                                                       we force the use of a table as the backing structure even though the dialect might support
                                                       sequence?
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">value_column</code> (optional, defaults to <code class="literal">next_val</code>): Only
                                                       relevant for table structures!  The name of the column on the table which is used to
                                                       hold the value.
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">optimizer</code> (optional, defaults to <code class="literal">none</code>):
                                                       See <a href="mapping.html#mapping-declaration-id-enhanced-optimizers" title="5.1.6.&nbsp;Identifier generator optimization">Section&nbsp;5.1.6, &#8220;Identifier generator optimization&#8221;</a>
                                                   
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                              
               </p>
               <p>
                                  The second of these new generators is <code class="literal">org.hibernate.id.enhanced.TableGenerator</code> which
                                  is intended firstly as a replacement for the <code class="literal">table</code> generator (although it actually
                                  functions much more like <code class="literal">org.hibernate.id.MultipleHiLoPerTableGenerator</code>) and secondly
                                  as a re-implementation of <code class="literal">org.hibernate.id.MultipleHiLoPerTableGenerator</code> utilizing the
                                  notion of pluggable optimiziers.  Essentially this generator defines a table capable of holding
                                  a number of different increment values simultaneously by using multiple distinctly keyed rows.  This
                                  generator has a number of configuration parameters:
                                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p>
                                                       <code class="literal">table_name</code> (optional, defaults to <code class="literal">hibernate_sequences</code>):
                                                       The name of the table to be used.
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">value_column_name</code> (optional, defaults to <code class="literal">next_val</code>):
                                                       The name of the column on the table which is used to hold the value.
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">segment_column_name</code> (optional, defaults to <code class="literal">sequence_name</code>):
                                                       The name of the column on the table which is used to hold the "segement key".  This is the
                                                       value which distinctly identifies which increment value to use.
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">segment_value</code> (optional, defaults to <code class="literal">default</code>):
                                                       The "segment key" value for the segment from which we want to pull increment values for
                                                       this generator.
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">segment_value_length</code> (optional, defaults to <code class="literal">255</code>):
                                                       Used for schema generation; the column size to create this segment key column.
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">initial_value</code> (optional, defaults to <code class="literal">1</code>):
                                                       The initial value to be retrieved from the table.
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">increment_size</code> (optional, defaults to <code class="literal">1</code>):
                                                       The value by which subsequent calls to the table should differ.
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">optimizer</code> (optional, defaults to <code class="literal"></code>):
                                                       See <a href="mapping.html#mapping-declaration-id-enhanced-optimizers" title="5.1.6.&nbsp;Identifier generator optimization">Section&nbsp;5.1.6, &#8220;Identifier generator optimization&#8221;</a>
                                                   
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-id-enhanced-optimizers"></a>5.1.6.&nbsp;Identifier generator optimization
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  For identifier generators which store values in the database, it is inefficient for them to hit the
                                  database on each and every call to generate a new identifier value.  Instead, you'd ideally want to
                                  group a bunch of them in memory and only hit the database when you have exhausted your in-memory
                                  value group.  This is the role of the pluggable optimizers.  Currently only the two enhanced generators
                                  (<a href="mapping.html#mapping-declaration-id-enhanced" title="5.1.5.&nbsp;Enhanced identifier generators">Section&nbsp;5.1.5, &#8220;Enhanced identifier generators&#8221;</a> support this notion.
                                  
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p>
                                                       <code class="literal">none</code> (generally this is the default if no optimizer was specified):  This
                                                       says to not perform any optimizations, and hit the database each and every request.
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">hilo</code>: applies a hi/lo algorithm around the database retrieved values.  The
                                                       values from the database for this optimizer are expected to be sequential.  The values
                                                       retrieved from the database structure for this optimizer indicates the "group number"; the
                                                       <code class="literal">increment_size</code> is multiplied by that value in memory to define a group
                                                       "hi value".
                                                   
                        </p>
                     </li>
                     <li>
                        <p>
                                                       <code class="literal">pooled</code>: like was discussed for <code class="literal">hilo</code>, this optimizers
                                                       attempts to minimize the number of hits to the database.  Here, however, we simply store
                                                       the starting value for the "next group" into the database structure rather than a sequential
                                                       value in combination with an in-memory grouping algorithm.  <code class="literal">increment_size</code>
                                                       here refers to the values coming from the database.
                                                   
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-compositeid"></a>5.1.7.&nbsp;composite-id
                        </h3>
                     </div>
                  </div>
               </div><pre class="programlisting">&lt;composite-id
        name="propertyName"
        class="ClassName"
        mapped="true|false"
        access="field|property|ClassName"&gt;
        node="element-name|."

        &lt;key-property name="propertyName" type="typename" column="column_name"/&gt;
        &lt;key-many-to-one name="propertyName class="ClassName" column="column_name"/&gt;
        ......
&lt;/composite-id&gt;</pre><p>
                                  For a table with a composite key, you may map multiple properties of the class
                                  as identifier properties. The <code class="literal">&lt;composite-id&gt;</code> element
                                  accepts <code class="literal">&lt;key-property&gt;</code> property mappings and
                                  <code class="literal">&lt;key-many-to-one&gt;</code> mappings as child elements.
                              
               </p><pre class="programlisting">&lt;composite-id&gt;
        &lt;key-property name="medicareNumber"/&gt;
        &lt;key-property name="dependent"/&gt;
&lt;/composite-id&gt;</pre><p>
                                  Your persistent class <span class="emphasis"><em>must</em></span> override <code class="literal">equals()</code>
                                  and <code class="literal">hashCode()</code> to implement composite identifier equality. It must
                                  also implements <code class="literal">Serializable</code>.
                              
               </p>
               <p>
                                  Unfortunately, this approach to composite identifiers means that a persistent object
                                  is its own identifier. There is no convenient "handle" other than the object itself.
                                  You must instantiate an instance of the persistent class itself and populate its
                                  identifier properties before you can <code class="literal">load()</code> the persistent state
                                  associated with a composite key. We call this approach an <span class="emphasis"><em>embedded</em></span>
                                  composite identifier, and discourage it for serious applications.
                              
               </p>
               <p>
                                  A second approach is what we call a <span class="emphasis"><em>mapped</em></span> composite identifier,
                                  where the identifier properties named inside the <code class="literal">&lt;composite-id&gt;</code>
                                  element are duplicated on both the persistent class and a separate identifier class.
                              
               </p><pre class="programlisting">&lt;composite-id class="MedicareId" mapped="true"&gt;
        &lt;key-property name="medicareNumber"/&gt;
        &lt;key-property name="dependent"/&gt;
&lt;/composite-id&gt;</pre><p>
                                  In this example, both the composite identifier class, <code class="literal">MedicareId</code>,
                                  and the entity class itself have properties named <code class="literal">medicareNumber</code>
                                  and <code class="literal">dependent</code>. The identifier class must override
                                  <code class="literal">equals()</code> and <code class="literal">hashCode()</code> and implement.
                                  <code class="literal">Serializable</code>. The disadvantage of this approach is quite
                                  obviouscode duplication.
                              
               </p>
               <p>
                                  The following attributes are used to specify a mapped composite identifier:
                              
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p>
                                                   <code class="literal">mapped</code> (optional, defaults to <code class="literal">false</code>):
                                                   indicates that a mapped composite identifier is used, and that the contained
                                                   property mappings refer to both the entity class and the composite identifier
                                                   class.
                                               
                        </p>
                     </li>
                     <li>
                        <p>
                                                   <code class="literal">class</code> (optional, but required for a mapped composite identifier):
                                                   The class used as a composite identifier.
                                               
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                                  We will describe a third, even more convenient approach where the composite identifier
                                  is implemented as a component class in <a href="components-compositeid.html" title="8.4.&nbsp;Components as composite identifiers">Section&nbsp;8.4, &#8220;Components as composite identifiers&#8221;</a>. The
                                  attributes described below apply only to this alternative approach:
                              
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p>
                                                   <code class="literal">name</code> (optional, required for this approach): A property of
                                                   component type that holds the composite identifier (see chapter 9).
                                               
                        </p>
                     </li>
                     <li>
                        <p>
                                                   <code class="literal">access</code> (optional - defaults to <code class="literal">property</code>):
                                                   The strategy Hibernate should use for accessing the property value.
                                               
                        </p>
                     </li>
                     <li>
                        <p>
                                                   <code class="literal">class</code> (optional - defaults to the property type determined by
                                                   reflection): The component class used as a composite identifier (see next section).
                                               
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                                  This third approach, an <span class="emphasis"><em>identifier component</em></span> is the one we recommend
                                  for almost all applications.
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-discriminator"></a>5.1.8.&nbsp;discriminator
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  The <code class="literal">&lt;discriminator&gt;</code> element is required for polymorphic persistence
                                  using the table-per-class-hierarchy mapping strategy and declares a discriminator column of the
                                  table. The discriminator column contains marker values that tell the persistence layer what
                                  subclass to instantiate for a particular row. A restricted set of types may be used:
                                  <code class="literal">string</code>, <code class="literal">character</code>, <code class="literal">integer</code>,
                                  <code class="literal">byte</code>, <code class="literal">short</code>, <code class="literal">boolean</code>,
                                  <code class="literal">yes_no</code>, <code class="literal">true_false</code>.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;discriminator
        column="discriminator_column"                      <span class="co">(1)</span>
        type="discriminator_type"                          <span class="co">(2)</span>
        force="true|false"                                 <span class="co">(3)</span>
        insert="true|false"                                <span class="co">(4)</span>
        formula="arbitrary sql expression"                 <span class="co">(5)</span>
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">column</code> (optional - defaults to <code class="literal">class</code>) the
                                                             name of the discriminator column.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">type</code> (optional - defaults to <code class="literal">string</code>) a
                                                             name that indicates the Hibernate type
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">force</code> (optional - defaults to <code class="literal">false</code>)
                                                             "force" Hibernate to specify allowed discriminator values even when retrieving
                                                             all instances of the root class.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">insert</code> (optional - defaults to <code class="literal">true</code>)
                                                             set this to <code class="literal">false</code> if your discriminator column is also part
                                                             of a mapped composite identifier. (Tells Hibernate to not include the column
                                                             in SQL <code class="literal">INSERT</code>s.)
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">formula</code> (optional) an arbitrary SQL expression that is
                                                             executed when a type has to be evaluated. Allows content-based discrimination.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  Actual values of the discriminator column are specified by the
                                  <code class="literal">discriminator-value</code> attribute of the <code class="literal">&lt;class&gt;</code> and
                                  <code class="literal">&lt;subclass&gt;</code> elements.
                              
               </p>
               <p>
                                  The <code class="literal">force</code> attribute is (only) useful if the table contains rows with
                                  "extra" discriminator values that are not mapped to a persistent class. This will not
                                  usually be the case.
                              
               </p>
               <p>
                                  Using the <code class="literal">formula</code> attribute you can declare an arbitrary SQL expression
                                  that will be used to evaluate the type of a row:
                              
               </p><pre class="programlisting">&lt;discriminator
    formula="case when CLASS_TYPE in ('a', 'b', 'c') then 0 else 1 end"
    type="integer"/&gt;</pre></div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-version"></a>5.1.9.&nbsp;version (optional)
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  The <code class="literal">&lt;version&gt;</code> element is optional and indicates that
                                  the table contains versioned data. This is particularly useful if you plan to
                                  use <span class="emphasis"><em>long transactions</em></span> (see below).
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;version
        column="version_column"                                      <span class="co">(1)</span>
        name="propertyName"                                          <span class="co">(2)</span>
        type="typename"                                              <span class="co">(3)</span>
        access="field|property|ClassName"                            <span class="co">(4)</span>
        unsaved-value="null|negative|undefined"                      <span class="co">(5)</span>
        generated="never|always"                                     <span class="co">(6)</span>
        insert="true|false"                                          <span class="co">(7)</span>
        node="element-name|@attribute-name|element/@attribute|."
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">column</code> (optional - defaults to the property name): The name
                                                             of the column holding the version number.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: The name of a property  of the persistent class.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">type</code> (optional - defaults to <code class="literal">integer</code>):
                                                             The type of the version number.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The
                                                             strategy Hibernate should use for accessing the property value.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">unsaved-value</code> (optional - defaults to <code class="literal">undefined</code>):
                                                             A version property value that indicates that an instance is newly instantiated
                                                             (unsaved), distinguishing it from detached instances that were saved or loaded
                                                             in a previous session. (<code class="literal">undefined</code> specifies that the identifier
                                                             property value should be used.)
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">generated</code> (optional - defaults to <code class="literal">never</code>):
                                                             Specifies that this version property value is actually generated by the database.
                                                             See the discussion of <a href="mapping-generated.html" title="5.6.&nbsp;Generated Properties">generated properties</a>.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">insert</code> (optional - defaults to <code class="literal">true</code>):
                                                             Specifies whether the version column should be included in SQL insert statements.
                                                             May be set to <code class="literal">false</code> if and only if the database column
                                                             is defined with a default value of <code class="literal">0</code>.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  Version numbers may be of Hibernate type <code class="literal">long</code>, <code class="literal">integer</code>,
                                  <code class="literal">short</code>, <code class="literal">timestamp</code> or <code class="literal">calendar</code>.
                              
               </p>
               <p>
                                  A version or timestamp property should never be null for a detached instance, so
                                  Hibernate will detect any instance with a null version or timestamp as transient,
                                  no matter what other <code class="literal">unsaved-value</code> strategies are specified.
                                  <span class="emphasis"><em>Declaring a nullable version or timestamp property is an easy way to avoid
                                        any problems with transitive reattachment in Hibernate, especially useful for people
                                        using assigned identifiers or composite keys!</em></span>
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-timestamp"></a>5.1.10.&nbsp;timestamp (optional)
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  The optional <code class="literal">&lt;timestamp&gt;</code> element indicates that the table contains
                                  timestamped data. This is intended as an alternative to versioning. Timestamps are by nature
                                  a less safe implementation of optimistic locking. However, sometimes the application might
                                  use the timestamps in other ways.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;timestamp
        column="timestamp_column"                                    <span class="co">(1)</span>
        name="propertyName"                                          <span class="co">(2)</span>
        access="field|property|ClassName"                            <span class="co">(3)</span>
        unsaved-value="null|undefined"                               <span class="co">(4)</span>
        source="vm|db"                                               <span class="co">(5)</span>
        generated="never|always"                                     <span class="co">(6)</span>
        node="element-name|@attribute-name|element/@attribute|."
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">column</code> (optional - defaults to the property name): The name
                                                             of a column holding the timestamp.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: The name of a JavaBeans style property of
                                                             Java type <code class="literal">Date</code> or <code class="literal">Timestamp</code> of the
                                                             persistent class.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The
                                                             strategy Hibernate should use for accessing the property value.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">unsaved-value</code> (optional - defaults to <code class="literal">null</code>):
                                                             A version property value that indicates that an instance is newly instantiated
                                                             (unsaved), distinguishing it from detached instances that were saved or loaded
                                                             in a previous session. (<code class="literal">undefined</code> specifies that the identifier
                                                             property value should be used.)
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">source</code> (optional - defaults to <code class="literal">vm</code>):
                                                             From where should Hibernate retrieve the timestamp value?  From the database,
                                                             or from the current JVM?  Database-based timestamps incur an overhead because
                                                             Hibernate must hit the database in order to determine the "next value",
                                                             but will be safer for use in clustered environments.  Note also, that not
                                                             all <code class="literal">Dialect</code>s are known to support retrieving of the
                                                             database's current timestamp, while others might be unsafe for usage
                                                             in locking due to lack of precision (Oracle 8 for example).
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">generated</code> (optional - defaults to <code class="literal">never</code>):
                                                             Specifies that this timestamp property value is actually generated by the database.
                                                             See the discussion of <a href="mapping-generated.html" title="5.6.&nbsp;Generated Properties">generated properties</a>.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  Note that <code class="literal">&lt;timestamp&gt;</code> is equivalent to
                                  <code class="literal">&lt;version type="timestamp"&gt;</code>.  And
                                   <code class="literal">&lt;timestamp source="db"&gt;</code> is equivalent to
                                  <code class="literal">&lt;version type="dbtimestamp"&gt;</code>
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-property"></a>5.1.11.&nbsp;property
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  The <code class="literal">&lt;property&gt;</code> element declares a persistent, JavaBean style
                                  property of the class.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;property
        name="propertyName"                                          <span class="co">(1)</span>
        column="column_name"                                         <span class="co">(2)</span>
        type="typename"                                              <span class="co">(3)</span>
        update="true|false"                                          <span class="co">(4)</span>
        insert="true|false"                                          <span class="co">(4)</span>
        formula="arbitrary SQL expression"                           <span class="co">(5)</span>
        access="field|property|ClassName"                            <span class="co">(6)</span>
        lazy="true|false"                                            <span class="co">(7)</span>
        unique="true|false"                                          <span class="co">(8)</span>
        not-null="true|false"                                        <span class="co">(9)</span>
        optimistic-lock="true|false"                                 <span class="co">(10)</span>
        generated="never|insert|always"                              <span class="co">(11)</span>
        node="element-name|@attribute-name|element/@attribute|."
        index="index_name"
        unique_key="unique_key_id"
        length="L"
        precision="P"
        scale="S"
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: the name of the property, with an initial lowercase
                                                             letter.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">column</code> (optional - defaults to the property name): the name
                                                             of the mapped database table column. This may also be specified by nested
                                                             <code class="literal">&lt;column&gt;</code> element(s).
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">type</code> (optional): a name that indicates the Hibernate type.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">update, insert</code> (optional - defaults to <code class="literal">true</code>) :
                                                             specifies that the mapped columns should be included in SQL <code class="literal">UPDATE</code>
                                                             and/or <code class="literal">INSERT</code> statements. Setting both to <code class="literal">false</code>
                                                             allows a pure "derived" property whose value is initialized from some other
                                                             property that maps to the same colum(s) or by a trigger or other application.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">formula</code> (optional): an SQL expression that defines the value for a
                                                             <span class="emphasis"><em>computed</em></span> property. Computed properties do not have a column
                                                             mapping of their own.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The
                                                             strategy Hibernate should use for accessing the property value.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">lazy</code> (optional - defaults to <code class="literal">false</code>): Specifies
                                                             that this property should be fetched lazily when the instance variable is first
                                                             accessed (requires build-time bytecode instrumentation).
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(8)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">unique</code> (optional): Enable the DDL generation of a unique
                                                             constraint for the columns. Also, allow this to be the target of
                                                             a <code class="literal">property-ref</code>.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(9)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">not-null</code> (optional): Enable the DDL generation of a nullability
                                                             constraint for the columns.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(10)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">true</code>):
                                                             Specifies that updates to this property do or do not require acquisition of the
                                                             optimistic lock. In other words, determines if a version increment should occur when
                                                             this property is dirty.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(11)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">generated</code> (optional - defaults to <code class="literal">never</code>):
                                                             Specifies that this property value is actually generated by the database.
                                                             See the discussion of <a href="mapping-generated.html" title="5.6.&nbsp;Generated Properties">generated properties</a>.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  <span class="emphasis"><em>typename</em></span> could be:
                              
               </p>
               <div class="orderedlist">
                  <ol type="1" compact>
                     <li>
                        <p>
                                                   The name of a Hibernate basic type (eg. <code class="literal">integer, string, character,
                                                      date, timestamp, float, binary, serializable, object, blob</code>).
                                               
                        </p>
                     </li>
                     <li>
                        <p>
                                                   The name of a Java class with a default basic type (eg. <code class="literal">int, float,
                                                      char, java.lang.String, java.util.Date, java.lang.Integer, java.sql.Clob</code>).
                                               
                        </p>
                     </li>
                     <li>
                        <p>
                                                   The name of a serializable Java class.
                                               
                        </p>
                     </li>
                     <li>
                        <p>
                                                   The class name of a custom type (eg. <code class="literal">com.illflow.type.MyCustomType</code>).
                                               
                        </p>
                     </li>
                  </ol>
               </div>
               <p>
                                  If you do not specify a type, Hibernate will use reflection upon the named
                                  property to take a guess at the correct Hibernate type. Hibernate will try to
                                  interpret the name of the return class of the property getter using rules 2, 3,
                                  4 in that order. However, this is not always enough.
                                  In certain cases you will still need the <code class="literal">type</code>
                                  attribute. (For example, to distinguish between <code class="literal">Hibernate.DATE</code> and
                                  <code class="literal">Hibernate.TIMESTAMP</code>, or to specify a custom type.)
                              
               </p>
               <p>
                                  The <code class="literal">access</code> attribute lets you control how Hibernate will access
                                  the property at runtime. By default, Hibernate will call the property get/set pair.
                                  If you specify <code class="literal">access="field"</code>, Hibernate will bypass the get/set
                                  pair and access the field directly, using reflection. You may specify your own
                                  strategy for property access by naming a class that implements the interface
                                  <code class="literal">org.hibernate.property.PropertyAccessor</code>.
                              
               </p>
               <p>
                                  An especially powerful feature are derived properties. These properties are by
                                  definition read-only, the property value is computed at load time. You declare
                                  the computation as a SQL expression, this translates to a <code class="literal">SELECT</code>
                                  clause subquery in the SQL query that loads an instance:
                              
               </p><pre class="programlisting">
&lt;property name="totalPrice"
    formula="( SELECT SUM (li.quantity*p.price) FROM LineItem li, Product p
                WHERE li.productId = p.productId
                AND li.customerId = customerId
                AND li.orderNumber = orderNumber )"/&gt;</pre><p>
                                  Note that you can reference the entities own table by not declaring an alias on
                                  a particular column (<code class="literal">customerId</code> in the given example). Also note
                                  that you can use the nested <code class="literal">&lt;formula&gt;</code> mapping element
                                  if you don't like to use the attribute.
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-manytoone"></a>5.1.12.&nbsp;many-to-one
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  An ordinary association to another persistent class is declared using a
                                  <code class="literal">many-to-one</code> element. The relational model is a
                                  many-to-one association: a foreign key in one table is referencing
                                  the primary key column(s) of the target table.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;many-to-one
        name="propertyName"                                          <span class="co">(1)</span>
        column="column_name"                                         <span class="co">(2)</span>
        class="ClassName"                                            <span class="co">(3)</span>
        cascade="cascade_style"                                      <span class="co">(4)</span>
        fetch="join|select"                                          <span class="co">(5)</span>
        update="true|false"                                          <span class="co">(6)</span>
        insert="true|false"                                          <span class="co">(6)</span>
        property-ref="propertyNameFromAssociatedClass"               <span class="co">(7)</span>
        access="field|property|ClassName"                            <span class="co">(8)</span>
        unique="true|false"                                          <span class="co">(9)</span>
        not-null="true|false"                                        <span class="co">(10)</span>
        optimistic-lock="true|false"                                 <span class="co">(11)</span>
        lazy="proxy|no-proxy|false"                                  <span class="co">(12)</span>
        not-found="ignore|exception"                                 <span class="co">(13)</span>
        entity-name="EntityName"                                     <span class="co">(14)</span>
        formula="arbitrary SQL expression"                           <span class="co">(15)</span>
        node="element-name|@attribute-name|element/@attribute|."
        embed-xml="true|false"
        index="index_name"
        unique_key="unique_key_id"
        foreign-key="foreign_key_name"
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: The name of the property.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">column</code> (optional): The name of the foreign key column.
                                                             This may also be specified by nested <code class="literal">&lt;column&gt;</code>
                                                             element(s).
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">class</code> (optional - defaults to the property type
                                                             determined by reflection): The name of the associated class.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">cascade</code> (optional): Specifies which operations should
                                                             be cascaded from the parent object to the associated object.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">fetch</code> (optional - defaults to <code class="literal">select</code>):
                                                             Chooses between outer-join fetching or sequential select fetching.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">update, insert</code> (optional - defaults to <code class="literal">true</code>)
                                                             specifies that the mapped columns should be included in SQL <code class="literal">UPDATE</code>
                                                             and/or <code class="literal">INSERT</code> statements. Setting both to <code class="literal">false</code>
                                                             allows a pure "derived" association whose value is initialized from some other
                                                             property that maps to the same colum(s) or by a trigger or other application.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">property-ref</code>: (optional) The name of a property of the associated
                                                             class that is joined to this foreign key. If not specified, the primary key of
                                                             the associated class is used.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(8)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The
                                                             strategy Hibernate should use for accessing the property value.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(9)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">unique</code> (optional): Enable the DDL generation of a unique
                                                             constraint for the foreign-key column. Also, allow this to be the target of
                                                             a <code class="literal">property-ref</code>. This makes the association multiplicity
                                                             effectively one to one.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(10)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">not-null</code> (optional): Enable the DDL generation of a nullability
                                                             constraint for the foreign key columns.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(11)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">true</code>):
                                                             Specifies that updates to this property do or do not require acquisition of the
                                                             optimistic lock. In other words, dertermines if a version increment should occur when
                                                             this property is dirty.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(12)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">lazy</code> (optional - defaults to <code class="literal">proxy</code>):
                                                             By default, single point associations are proxied. <code class="literal">lazy="no-proxy"</code>
                                                             specifies that the property should be fetched lazily when the instance variable
                                                             is first accessed (requires build-time bytecode instrumentation).
                                                             <code class="literal">lazy="false"</code> specifies that the association will always
                                                             be eagerly fetched.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(13)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">not-found</code> (optional - defaults to <code class="literal">exception</code>):
                                                             Specifies how foreign keys that reference missing rows will be handled:
                                                             <code class="literal">ignore</code> will treat a missing row as a null association.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(14)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">entity-name</code> (optional): The entity name of the associated class.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(15)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">formula</code> (optional): an SQL expression that defines the value for a
                                                             <span class="emphasis"><em>computed</em></span> foreign key.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  Setting a value of the <code class="literal">cascade</code> attribute to any meaningful
                                  value other than <code class="literal">none</code> will propagate certain operations to the
                                  associated object. The meaningful values are the names of Hibernate's basic
                                  operations, <code class="literal">persist, merge, delete, save-update, evict, replicate, lock,
                                     refresh</code>, as well as the special values <code class="literal">delete-orphan</code>
                                  and <code class="literal">all</code> and comma-separated combinations of operation
                                  names, for example, <code class="literal">cascade="persist,merge,evict"</code> or
                                  <code class="literal">cascade="all,delete-orphan"</code>. See <a href="objectstate-transitive.html" title="10.11.&nbsp;Transitive persistence">Section&nbsp;10.11, &#8220;Transitive persistence&#8221;</a>
                                  for a full explanation. Note that single valued associations (many-to-one and
                                  one-to-one associations) do not support orphan delete.
                              
               </p>
               <p>
                                  A typical <code class="literal">many-to-one</code> declaration looks as simple as this:
                              
               </p><pre class="programlisting">&lt;many-to-one name="product" class="Product" column="PRODUCT_ID"/&gt;</pre><p>
                                  The <code class="literal">property-ref</code> attribute should only be used for mapping legacy
                                  data where a foreign key refers to a unique key of the associated table other than
                                  the primary key. This is an ugly relational model. For example, suppose the
                                  <code class="literal">Product</code> class had a unique serial number, that is not the primary
                                  key. (The <code class="literal">unique</code> attribute controls Hibernate's DDL generation with
                                  the SchemaExport tool.)
                              
               </p><pre class="programlisting">&lt;property name="serialNumber" unique="true" type="string" column="SERIAL_NUMBER"/&gt;</pre><p>
                                  Then the mapping for <code class="literal">OrderItem</code> might use:
                              
               </p><pre class="programlisting">&lt;many-to-one name="product" property-ref="serialNumber" column="PRODUCT_SERIAL_NUMBER"/&gt;</pre><p>
                                  This is certainly not encouraged, however.
                              
               </p>
               <p>
                                  If the referenced unique key comprises multiple properties of the associated entity, you should
                                  map the referenced properties inside a named <code class="literal">&lt;properties&gt;</code> element.
                              
               </p>
               <p>
                              	If the referenced unique key is the property of a component, you may specify a property path:
                              
               </p><pre class="programlisting">&lt;many-to-one name="owner" property-ref="identity.ssn" column="OWNER_SSN"/&gt;</pre></div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-onetoone"></a>5.1.13.&nbsp;one-to-one
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  A one-to-one association to another persistent class is declared using a
                                  <code class="literal">one-to-one</code> element.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;one-to-one
        name="propertyName"                                          <span class="co">(1)</span>
        class="ClassName"                                            <span class="co">(2)</span>
        cascade="cascade_style"                                      <span class="co">(3)</span>
        constrained="true|false"                                     <span class="co">(4)</span>
        fetch="join|select"                                          <span class="co">(5)</span>
        property-ref="propertyNameFromAssociatedClass"               <span class="co">(6)</span>
        access="field|property|ClassName"                            <span class="co">(7)</span>
        formula="any SQL expression"                                 <span class="co">(8)</span>
        lazy="proxy|no-proxy|false"                                  <span class="co">(9)</span>
        entity-name="EntityName"                                     <span class="co">(10)</span>
        node="element-name|@attribute-name|element/@attribute|."
        embed-xml="true|false"
        foreign-key="foreign_key_name"
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: The name of the property.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">class</code> (optional - defaults to the property type
                                                             determined by reflection): The name of the associated class.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">cascade</code> (optional) specifies which operations should
                                                             be cascaded from the parent object to the associated object.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">constrained</code> (optional) specifies that a foreign key constraint
                                                             on the primary key of the mapped table references the table of the associated
                                                             class. This option affects the order in which <code class="literal">save()</code> and
                                                             <code class="literal">delete()</code> are cascaded, and determines whether the association
                                                             may be proxied (it is also used by the schema export tool).
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">fetch</code> (optional - defaults to <code class="literal">select</code>):
                                                             Chooses between outer-join fetching or sequential select fetching.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">property-ref</code>: (optional) The name of a property of the associated class
                                                             that is joined to the primary key of this class. If not specified, the primary key of
                                                             the associated class is used.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The
                                                             strategy Hibernate should use for accessing the property value.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(8)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">formula</code> (optional): Almost all one to one associations map to the
                                                             primary key of the owning entity. In the rare case that this is not the case, you may
                                                             specify a some other column, columns or expression to join on using an SQL formula. (See
                                                             <code class="literal">org.hibernate.test.onetooneformula</code> for an example.)
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(9)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">lazy</code> (optional - defaults to <code class="literal">proxy</code>):
                                                             By default, single point associations are proxied. <code class="literal">lazy="no-proxy"</code>
                                                             specifies that the property should be fetched lazily when the instance variable
                                                             is first accessed (requires build-time bytecode instrumentation).
                                                             <code class="literal">lazy="false"</code> specifies that the association will always
                                                             be eagerly fetched. <span class="emphasis"><em>Note that if <code class="literal">constrained="false"</code>,
                                                                   proxying is impossible and Hibernate will eager fetch the association!</em></span>
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(10)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">entity-name</code> (optional): The entity name of the associated class.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  There are two varieties of one-to-one association:
                              
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>
                                           primary key associations
                                       
                        </p>
                     </li>
                     <li>
                        <p>
                                           unique foreign key associations
                                       
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                                  Primary key associations don't need an extra table column; if two rows are related by
                                  the association then the two table rows share the same primary key value. So if you want
                                  two objects to be related by a primary key association, you must make sure that they
                                  are assigned the same identifier value!
                              
               </p>
               <p>
                                  For a primary key association, add the following mappings to <code class="literal">Employee</code> and
                                  <code class="literal">Person</code>, respectively.
                              
               </p><pre class="programlisting">&lt;one-to-one name="person" class="Person"/&gt;</pre><pre class="programlisting">&lt;one-to-one name="employee" class="Employee" constrained="true"/&gt;</pre><p>
                                  Now we must ensure that the primary keys of related rows in the PERSON and
                                  EMPLOYEE tables are equal. We use a special Hibernate identifier generation strategy
                                  called <code class="literal">foreign</code>:
                              
               </p><pre class="programlisting">&lt;class name="person" table="PERSON"&gt;
    &lt;id name="id" column="PERSON_ID"&gt;
        &lt;generator class="foreign"&gt;
            &lt;param name="property"&gt;employee&lt;/param&gt;
        &lt;/generator&gt;
    &lt;/id&gt;
    ...
    &lt;one-to-one name="employee"
        class="Employee"
        constrained="true"/&gt;
&lt;/class&gt;</pre><p>
                                  A newly saved instance of <code class="literal">Person</code> is then assigned the same primary
                                  key value as the <code class="literal">Employee</code> instance refered with the <code class="literal">employee</code>
                                  property of that <code class="literal">Person</code>.
                              
               </p>
               <p>
                                  Alternatively, a foreign key with a unique constraint, from <code class="literal">Employee</code> to
                                  <code class="literal">Person</code>, may be expressed as:
                              
               </p><pre class="programlisting">&lt;many-to-one name="person" class="Person" column="PERSON_ID" unique="true"/&gt;</pre><p>
                                  And this association may be made bidirectional by adding the following to the
                                  <code class="literal">Person</code> mapping:
                              
               </p><pre class="programlisting">&lt;one-to-one name="employee" class="Employee" property-ref="person"/&gt;</pre></div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-naturalid"></a>5.1.14.&nbsp;natural-id
                        </h3>
                     </div>
                  </div>
               </div><pre class="programlisting">&lt;natural-id mutable="true|false"/&gt;
        &lt;property ... /&gt;
        &lt;many-to-one ... /&gt;
        ......
&lt;/natural-id&gt;</pre><p>
                                  Even though we recommend the use of surrogate keys as primary keys, you should still try
                                  to identify natural keys for all entities. A natural key is a property or combination of
                                  properties that is unique and non-null. If it is also immutable, even better. Map the
                                  properties of the natural key inside the <code class="literal">&lt;natural-id&gt;</code> element.
                                  Hibernate will generate the necessary unique key and nullability constraints, and your
                                  mapping will be more self-documenting.
                              
               </p>
               <p>
                                  We strongly recommend that you implement <code class="literal">equals()</code> and
                                  <code class="literal">hashCode()</code> to compare the natural key properties of the entity.
                              
               </p>
               <p>
                                  This mapping is not intended for use with entities with natural primary keys.
                              
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p>
                                                   <code class="literal">mutable</code> (optional, defaults to <code class="literal">false</code>):
                                                   By default, natural identifier properties as assumed to be immutable (constant).
                                               
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-component"></a>5.1.15.&nbsp;component, dynamic-component
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  The <code class="literal">&lt;component&gt;</code> element maps properties of a
                                  child object to columns of the table of a parent class. Components may, in
                                  turn, declare their own properties, components or collections. See
                                  "Components" below.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;component
        name="propertyName"                 <span class="co">(1)</span>
        class="className"                   <span class="co">(2)</span>
        insert="true|false"                 <span class="co">(3)</span>
        update="true|false"                 <span class="co">(4)</span>
        access="field|property|ClassName"   <span class="co">(5)</span>
        lazy="true|false"                   <span class="co">(6)</span>
        optimistic-lock="true|false"        <span class="co">(7)</span>
        unique="true|false"                 <span class="co">(8)</span>
        node="element-name|."
&gt;

        &lt;property ...../&gt;
        &lt;many-to-one .... /&gt;
        ........
&lt;/component&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: The name of the property.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">class</code> (optional - defaults to the property type
                                                             determined by reflection): The name of the component (child) class.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">insert</code>: Do the mapped columns appear in SQL
                                                             <code class="literal">INSERT</code>s?
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">update</code>: Do the mapped columns appear in SQL
                                                             <code class="literal">UPDATE</code>s?
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The
                                                             strategy Hibernate should use for accessing the property value.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">lazy</code> (optional - defaults to <code class="literal">false</code>): Specifies
                                                             that this component should be fetched lazily when the instance variable is first
                                                             accessed (requires build-time bytecode instrumentation).
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                                 <code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">true</code>):
                                                                 Specifies that updates to this component do or do not require acquisition of the
                                                                 optimistic lock. In other words, determines if a version increment should occur when
                                                                 this property is dirty.
                                                             
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(8)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                                 <code class="literal">unique</code> (optional - defaults to <code class="literal">false</code>):
                                                                 Specifies that a unique constraint exists upon all mapped columns of the
                                                                 component.
                                                             
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  The child <code class="literal">&lt;property&gt;</code> tags map properties of the
                                  child class to table columns.
                              
               </p>
               <p>
                                  The <code class="literal">&lt;component&gt;</code> element allows a <code class="literal">&lt;parent&gt;</code>
                                  subelement that maps a property of the component class as a reference back to the
                                  containing entity.
                              
               </p>
               <p>
                                  The <code class="literal">&lt;dynamic-component&gt;</code> element allows a <code class="literal">Map</code>
                                  to be mapped as a component, where the property names refer to keys of the map, see
                                  <a href="components-dynamic.html" title="8.5.&nbsp;Dynamic components">Section&nbsp;8.5, &#8220;Dynamic components&#8221;</a>.
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-properties"></a>5.1.16.&nbsp;properties
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  The <code class="literal">&lt;properties&gt;</code> element allows the definition of a named,
                                  logical grouping of properties of a class. The most important use of the construct
                                  is that it allows a combination of properties to be the target of a
                                  <code class="literal">property-ref</code>. It is also a convenient way to define a multi-column
                                  unique constraint.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;properties
        name="logicalName"                  <span class="co">(1)</span>
        insert="true|false"                 <span class="co">(2)</span>
        update="true|false"                 <span class="co">(3)</span>
        optimistic-lock="true|false"        <span class="co">(4)</span>
        unique="true|false"                 <span class="co">(5)</span>
&gt;

        &lt;property ...../&gt;
        &lt;many-to-one .... /&gt;
        ........
&lt;/properties&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: The logical name of the grouping -
                                                             <span class="emphasis"><em>not</em></span> an actual property name.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">insert</code>: Do the mapped columns appear in SQL
                                                             <code class="literal">INSERT</code>s?
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">update</code>: Do the mapped columns appear in SQL
                                                             <code class="literal">UPDATE</code>s?
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                                 <code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">true</code>):
                                                                 Specifies that updates to these properties do or do not require acquisition of the
                                                                 optimistic lock. In other words, determines if a version increment should occur when
                                                                 these properties are dirty.
                                                             
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                                 <code class="literal">unique</code> (optional - defaults to <code class="literal">false</code>):
                                                                 Specifies that a unique constraint exists upon all mapped columns of the
                                                                 component.
                                                             
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  For example, if we have the following <code class="literal">&lt;properties&gt;</code> mapping:
                              
               </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="personNumber"/&gt;
    ...
    &lt;properties name="name"
            unique="true" update="false"&gt;
        &lt;property name="firstName"/&gt;
        &lt;property name="initial"/&gt;
        &lt;property name="lastName"/&gt;
    &lt;/properties&gt;
&lt;/class&gt;</pre><p>
                                  Then we might have some legacy data association which refers to this unique key of
                                  the <code class="literal">Person</code> table, instead of to the primary key:
                              
               </p><pre class="programlisting">&lt;many-to-one name="person"
         class="Person" property-ref="name"&gt;
    &lt;column name="firstName"/&gt;
    &lt;column name="initial"/&gt;
    &lt;column name="lastName"/&gt;
&lt;/many-to-one&gt;</pre><p>
                                  We don't recommend the use of this kind of thing outside the context of mapping
                                  legacy data.
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-subclass"></a>5.1.17.&nbsp;subclass
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  Finally, polymorphic persistence requires the declaration of each subclass of
                                  the root persistent class. For the table-per-class-hierarchy
                                  mapping strategy, the <code class="literal">&lt;subclass&gt;</code> declaration is used.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;subclass
        name="ClassName"                              <span class="co">(1)</span>
        discriminator-value="discriminator_value"     <span class="co">(2)</span>
        proxy="ProxyInterface"                        <span class="co">(3)</span>
        lazy="true|false"                             <span class="co">(4)</span>
        dynamic-update="true|false"
        dynamic-insert="true|false"
        entity-name="EntityName"
        node="element-name"
        extends="SuperclassName"&gt;

        &lt;property .... /&gt;
        .....
&lt;/subclass&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: The fully qualified class name of the subclass.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">discriminator-value</code> (optional - defaults to the class name): A
                                                             value that distiguishes individual subclasses.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">proxy</code> (optional): Specifies a class or interface to use for
                                                             lazy initializing proxies.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">lazy</code> (optional, defaults to <code class="literal">true</code>): Setting
                                                             <code class="literal">lazy="false"</code> disables the use of lazy fetching.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  Each subclass should declare its own persistent properties and subclasses.
                                  <code class="literal">&lt;version&gt;</code> and <code class="literal">&lt;id&gt;</code> properties
                                  are assumed to be inherited from the root class. Each subclass in a heirarchy must
                                  define a unique <code class="literal">discriminator-value</code>. If none is specified, the
                                  fully qualified Java class name is used.
                              
               </p>
               <p>
                                  For information about inheritance mappings, see <a href="inheritance.html" title="Chapter&nbsp;9.&nbsp;Inheritance Mapping">Chapter&nbsp;9, <i xmlns:xlink="http://www.w3.org/1999/xlink">Inheritance Mapping</i></a>.
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-joinedsubclass"></a>5.1.18.&nbsp;joined-subclass
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  Alternatively, each subclass may be mapped to its own table (table-per-subclass
                                  mapping strategy). Inherited state is retrieved by joining with the table of the
                                  superclass. We use the <code class="literal">&lt;joined-subclass&gt;</code> element.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;joined-subclass
        name="ClassName"                    <span class="co">(1)</span>
        table="tablename"                   <span class="co">(2)</span>
        proxy="ProxyInterface"              <span class="co">(3)</span>
        lazy="true|false"                   <span class="co">(4)</span>
        dynamic-update="true|false"
        dynamic-insert="true|false"
        schema="schema"
        catalog="catalog"
        extends="SuperclassName"
        persister="ClassName"
        subselect="SQL expression"
        entity-name="EntityName"
        node="element-name"&gt;

        &lt;key .... &gt;

        &lt;property .... /&gt;
        .....
&lt;/joined-subclass&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: The fully qualified class name of the subclass.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">table</code>: The name of the subclass table.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">proxy</code> (optional): Specifies a class or interface to use
                                                             for lazy initializing proxies.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                              <code class="literal">lazy</code> (optional, defaults to <code class="literal">true</code>): Setting
                                                             <code class="literal">lazy="false"</code> disables the use of lazy fetching.
                                                          
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  No discriminator column is required for this mapping strategy. Each subclass must,
                                  however, declare a table column holding the object identifier using the
                                  <code class="literal">&lt;key&gt;</code> element. The mapping at the start of the chapter
                                  would be re-written as:
                              
               </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;

&lt;hibernate-mapping package="eg"&gt;

        &lt;class name="Cat" table="CATS"&gt;
                &lt;id name="id" column="uid" type="long"&gt;
                        &lt;generator class="hilo"/&gt;
                &lt;/id&gt;
                &lt;property name="birthdate" type="date"/&gt;
                &lt;property name="color" not-null="true"/&gt;
                &lt;property name="sex" not-null="true"/&gt;
                &lt;property name="weight"/&gt;
                &lt;many-to-one name="mate"/&gt;
                &lt;set name="kittens"&gt;
                        &lt;key column="MOTHER"/&gt;
                        &lt;one-to-many class="Cat"/&gt;
                &lt;/set&gt;
                &lt;joined-subclass name="DomesticCat" table="DOMESTIC_CATS"&gt;
                    &lt;key column="CAT"/&gt;
                    &lt;property name="name" type="string"/&gt;
                &lt;/joined-subclass&gt;
        &lt;/class&gt;

        &lt;class name="eg.Dog"&gt;
                &lt;!-- mapping for Dog could go here --&gt;
        &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>
                                   For information about inheritance mappings, see <a href="inheritance.html" title="Chapter&nbsp;9.&nbsp;Inheritance Mapping">Chapter&nbsp;9, <i xmlns:xlink="http://www.w3.org/1999/xlink">Inheritance Mapping</i></a>.
                               
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-unionsubclass"></a>5.1.19.&nbsp;union-subclass
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                 A third option is to map only the concrete classes of an inheritance hierarchy
                                 to tables, (the table-per-concrete-class strategy) where each table defines all
                                 persistent state of the class, including inherited state. In Hibernate, it is
                                 not absolutely necessary to explicitly map such inheritance hierarchies. You
                                 can simply map each class with a separate <code class="literal">&lt;class&gt;</code>
                                 declaration. However, if you wish use polymorphic associations (e.g. an association
                                 to the superclass of your hierarchy), you need to
                                 use the <code class="literal">&lt;union-subclass&gt;</code> mapping.
                             
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;union-subclass
        name="ClassName"                    <span class="co">(1)</span>
        table="tablename"                   <span class="co">(2)</span>
        proxy="ProxyInterface"              <span class="co">(3)</span>
        lazy="true|false"                   <span class="co">(4)</span>
        dynamic-update="true|false"
        dynamic-insert="true|false"
        schema="schema"
        catalog="catalog"
        extends="SuperclassName"
        abstract="true|false"
        persister="ClassName"
        subselect="SQL expression"
        entity-name="EntityName"
        node="element-name"&gt;

        &lt;property .... /&gt;
        .....
&lt;/union-subclass&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: The fully qualified class name of the subclass.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">table</code>: The name of the subclass table.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">proxy</code> (optional): Specifies a class or interface to use
                                                             for lazy initializing proxies.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">lazy</code> (optional, defaults to <code class="literal">true</code>): Setting
                                                             <code class="literal">lazy="false"</code> disables the use of lazy fetching.
                                                          
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  No discriminator column or key column is required for this mapping strategy.
                              
               </p>
               <p>
                                  For information about inheritance mappings, see <a href="inheritance.html" title="Chapter&nbsp;9.&nbsp;Inheritance Mapping">Chapter&nbsp;9, <i xmlns:xlink="http://www.w3.org/1999/xlink">Inheritance Mapping</i></a>.
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-join"></a>5.1.20.&nbsp;join
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  Using the <code class="literal">&lt;join&gt;</code> element, it is possible to map
                                  properties of one class to several tables, when there's a 1-to-1 relationship between the tables.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;join
        table="tablename"                        <span class="co">(1)</span>
        schema="owner"                           <span class="co">(2)</span>
        catalog="catalog"                        <span class="co">(3)</span>
        fetch="join|select"                      <span class="co">(4)</span>
        inverse="true|false"                     <span class="co">(5)</span>
        optional="true|false"&gt;                   <span class="co">(6)</span>

        &lt;key ... /&gt;

        &lt;property ... /&gt;
        ...
&lt;/join&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">table</code>: The name of the joined table.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">schema</code> (optional): Override the schema name specified by
                                                             the root <code class="literal">&lt;hibernate-mapping&gt;</code> element.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">catalog</code> (optional): Override the catalog name specified by
                                                             the root <code class="literal">&lt;hibernate-mapping&gt;</code> element.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">fetch</code> (optional - defaults to <code class="literal">join</code>):
                                                             If set to <code class="literal">join</code>, the default, Hibernate will use an inner join
                                                             to retrieve a <code class="literal">&lt;join&gt;</code> defined by a class or its superclasses
                                                             and an outer join for a <code class="literal">&lt;join&gt;</code> defined by a subclass.
                                                             If set to <code class="literal">select</code> then Hibernate will use a sequential select for
                                                             a <code class="literal">&lt;join&gt;</code> defined on a subclass, which will be issued only
                                                             if a row turns out to represent an instance of the subclass. Inner joins will still
                                                             be used to retrieve a <code class="literal">&lt;join&gt;</code> defined by the class and its
                                                             superclasses.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">inverse</code> (optional - defaults to <code class="literal">false</code>):
                                                             If enabled, Hibernate will not try to insert or update the properties defined
                                                             by this join.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">optional</code> (optional - defaults to <code class="literal">false</code>):
                                                             If enabled, Hibernate will insert a row only if the properties defined by this
                                                             join are non-null and will always use an outer join to retrieve the properties.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  For example, the address information for a person can be mapped to a separate
                                  table (while preserving value type semantics for all properties):
                              
               </p><pre class="programlisting">&lt;class name="Person"
    table="PERSON"&gt;

    &lt;id name="id" column="PERSON_ID"&gt;...&lt;/id&gt;

    &lt;join table="ADDRESS"&gt;
        &lt;key column="ADDRESS_ID"/&gt;
        &lt;property name="address"/&gt;
        &lt;property name="zip"/&gt;
        &lt;property name="country"/&gt;
    &lt;/join&gt;
    ...</pre><p>
                                  This feature is often only useful for legacy data models, we recommend fewer
                                  tables than classes and a fine-grained domain model. However, it is useful
                                  for switching between inheritance mapping strategies in a single hierarchy, as
                                  explained later.
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-key"></a>5.1.21.&nbsp;key
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  We've seen the <code class="literal">&lt;key&gt;</code> element crop up a few times
                                  now. It appears anywhere the parent mapping element defines a join to
                                  a new table, and defines the foreign key in the joined table, that references
                                  the primary key of the original table.
                              
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;key
        column="columnname"                      <span class="co">(1)</span>
        on-delete="noaction|cascade"             <span class="co">(2)</span>
        property-ref="propertyName"              <span class="co">(3)</span>
        not-null="true|false"                    <span class="co">(4)</span>
        update="true|false"                      <span class="co">(5)</span>
        unique="true|false"                      <span class="co">(6)</span>
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">column</code> (optional): The name of the foreign key column.
                                                             This may also be specified by nested <code class="literal">&lt;column&gt;</code>
                                                             element(s).
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">on-delete</code> (optional, defaults to <code class="literal">noaction</code>):
                                                             Specifies whether the foreign key constraint has database-level cascade delete
                                                             enabled.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">property-ref</code> (optional): Specifies that the foreign key refers
                                                             to columns that are not the primary key of the orginal table. (Provided for
                                                             legacy data.)
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">not-null</code> (optional): Specifies that the foreign key columns
                                                             are not nullable (this is implied whenever the foreign key is also part of the
                                                             primary key).
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">update</code> (optional): Specifies that the foreign key should never
                                                             be updated (this is implied whenever the foreign key is also part of the primary
                                                             key).
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">unique</code> (optional): Specifies that the foreign key should have
                                                             a unique constraint (this is implied whenever the foreign key is also the primary key).
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>
                                  We recommend that for systems where delete performance is important, all keys should be
                                  defined <code class="literal">on-delete="cascade"</code>, and Hibernate will use a database-level
                                  <code class="literal">ON CASCADE DELETE</code> constraint, instead of many individual
                                  <code class="literal">DELETE</code> statements. Be aware that this feature bypasses Hibernate's
                                  usual optimistic locking strategy for versioned data.
                              
               </p>
               <p>
                                  The <code class="literal">not-null</code> and <code class="literal">update</code> attributes are useful when
                                  mapping a unidirectional one to many association. If you map a unidirectional one to many
                                  to a non-nullable foreign key, you <span class="emphasis"><em>must</em></span> declare the key column using
                                  <code class="literal">&lt;key not-null="true"&gt;</code>.
                              
               </p>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-column"></a>5.1.22.&nbsp;column and formula elements
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                 Any mapping element which accepts a <code class="literal">column</code> attribute will alternatively
                                 accept a <code class="literal">&lt;column&gt;</code> subelement. Likewise, <code class="literal">&lt;formula&gt;</code>
                                 is an alternative to the <code class="literal">formula</code> attribute.
                             
               </p><pre class="programlisting">&lt;column
        name="column_name"
        length="N"
        precision="N"
        scale="N"
        not-null="true|false"
        unique="true|false"
        unique-key="multicolumn_unique_key_name"
        index="index_name"
        sql-type="sql_type_name"
        check="SQL expression"
        default="SQL expression"/&gt;</pre><pre class="programlisting">&lt;formula&gt;SQL expression&lt;/formula&gt;</pre><p>
                                  <code class="literal">column</code> and <code class="literal">formula</code> attributes may even be combined
                                  within the same property or association mapping to express, for example, exotic join
                                  conditions.
                              
               </p><pre class="programlisting">&lt;many-to-one name="homeAddress" class="Address"
        insert="false" update="false"&gt;
    &lt;column name="person_id" not-null="true" length="10"/&gt;
    &lt;formula&gt;'MAILING'&lt;/formula&gt;
&lt;/many-to-one&gt;</pre></div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-import"></a>5.1.23.&nbsp;import
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  Suppose your application has two persistent classes with the same name, and you don't want to
                                  specify the fully qualified (package) name in Hibernate queries. Classes may be "imported"
                                  explicitly, rather than relying upon <code class="literal">auto-import="true"</code>. You may even import
                                  classes and interfaces that are not explicitly mapped.
                              
               </p><pre class="programlisting">&lt;import class="java.lang.Object" rename="Universe"/&gt;</pre><div class="programlistingco"><pre class="programlisting">&lt;import
        class="ClassName"              <span class="co">(1)</span>
        rename="ShortName"             <span class="co">(2)</span>
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">class</code>: The fully qualified class name of of any Java class.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">rename</code> (optional - defaults to the unqualified class name):
                                                             A name that may be used in the query language.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="sect2" lang="en-US">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-types-anymapping"></a>5.1.24.&nbsp;any
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                                  There is one further type of property mapping. The <code class="literal">&lt;any&gt;</code> mapping element
                                  defines a polymorphic association to classes from multiple tables. This type of mapping always
                                  requires more than one column. The first column holds the type of the associated entity.
                                  The remaining columns hold the identifier. It is impossible to specify a foreign key constraint
                                  for this kind of association, so this is most certainly not meant as the usual way of mapping
                                  (polymorphic) associations. You should use this only in very special cases (eg. audit logs,
                                  user session data, etc).
                              
               </p>
               <p>
                                   The <code class="literal">meta-type</code> attribute lets the application specify a custom type that
                                   maps database column values to persistent classes which have identifier properties of the
                                   type specified by <code class="literal">id-type</code>. You must specify the mapping from values of
                                   the meta-type to class names.
                              
               </p><pre class="programlisting">&lt;any name="being" id-type="long" meta-type="string"&gt;
    &lt;meta-value value="TBL_ANIMAL" class="Animal"/&gt;
    &lt;meta-value value="TBL_HUMAN" class="Human"/&gt;
    &lt;meta-value value="TBL_ALIEN" class="Alien"/&gt;
    &lt;column name="table_name"/&gt;
    &lt;column name="id"/&gt;
&lt;/any&gt;</pre><div class="programlistingco"><pre class="programlisting">&lt;any
        name="propertyName"                      <span class="co">(1)</span>
        id-type="idtypename"                     <span class="co">(2)</span>
        meta-type="metatypename"                 <span class="co">(3)</span>
        cascade="cascade_style"                  <span class="co">(4)</span>
        access="field|property|ClassName"        <span class="co">(5)</span>
        optimistic-lock="true|false"             <span class="co">(6)</span>
&gt;
        &lt;meta-value ... /&gt;
        &lt;meta-value ... /&gt;
        .....
        &lt;column .... /&gt;
        &lt;column .... /&gt;
        .....
&lt;/any&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">name</code>: the property name.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">id-type</code>: the identifier type.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">meta-type</code> (optional - defaults to <code class="literal">string</code>):
                                                             Any type that is allowed for a discriminator mapping.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">cascade</code> (optional- defaults to <code class="literal">none</code>):
                                                             the cascade style.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The
                                                             strategy Hibernate should use for accessing the property value.
                                                         
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p>
                                                             <code class="literal">optimistic-lock</code> (optional - defaults to <code class="literal">true</code>):
                                                             Specifies that updates to this property do or do not require acquisition of the
                                                             optimistic lock. In other words, define if a version increment should occur if this
                                                             property is dirty.
                                                         
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="persistent-classes-extensions.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center">&nbsp;</td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="mapping-types.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">4.6.&nbsp;Extentsions&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;5.2.&nbsp;Hibernate Types</td>
            </tr>
         </table>
      </div>
   </body>
</html>