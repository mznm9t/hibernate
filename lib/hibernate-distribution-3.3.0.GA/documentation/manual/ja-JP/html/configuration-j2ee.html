<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>3.8. J2EE&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12469;&#12540;&#12496;&#12392;&#12398;&#32113;&#21512;</title>
      <link rel="stylesheet" href="css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="HIBERNATE - Relational Persistence for Idiomatic Java">
      <link rel="up" href="session-configuration.html" title="&#31532;3&#31456; &#35373;&#23450;">
      <link rel="prev" href="configuration-xmlconfig.html" title="3.7. XML&#35373;&#23450;&#12501;&#12449;&#12452;&#12523;">
      <link rel="next" href="persistent-classes.html" title="&#31532;4&#31456; &#27704;&#32154;&#12463;&#12521;&#12473;">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">3.8. J2EE&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12469;&#12540;&#12496;&#12392;&#12398;&#32113;&#21512;</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="configuration-xmlconfig.html">&#21069;&#12398;&#12506;&#12540;&#12472;</a>&nbsp;
               </td>
               <th width="60%" align="center">&#31532;3&#31456; &#35373;&#23450;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="persistent-classes.html">&#27425;&#12398;&#12506;&#12540;&#12472;</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="ja-JP">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="configuration-j2ee"></a>3.8. J2EE&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12469;&#12540;&#12496;&#12392;&#12398;&#32113;&#21512;
                  </h2>
               </div>
            </div>
         </div>
         <p>Hibernate&#12399;J2EE&#27083;&#36896;&#12392;&#32113;&#21512;&#12377;&#12427;&#12509;&#12452;&#12531;&#12488;&#12434;&#12469;&#12509;&#12540;&#12488;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290; </p>
         <div class="itemizedlist">
            <ul type="disc">
               <li>
                  <p><span class="emphasis"><em>&#12467;&#12531;&#12486;&#12490;&#31649;&#29702;&#12487;&#12540;&#12479;&#12477;&#12540;&#12473;</em></span>&#65306;Hibernate&#12399; JNDI&#12364;&#25552;&#20379;&#12375;&#12289;&#12467;&#12531;&#12486;&#12490;&#12364;&#31649;&#29702;&#12377;&#12427;JDBC&#12467;&#12493;&#12463;&#12471;&#12519;&#12531;&#12434;&#20351;&#29992;&#12391;&#12365;&#12414;&#12377;&#12290; &#36890;&#24120;&#12289;JTA&#28310;&#25312;&#12398; <code class="literal">TransactionManager</code> &#12392; <code class="literal">ResourceManager</code> &#12364;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#31649;&#29702;(CMT)&#12289; &#29305;&#12395;&#27096;&#12293;&#12394;&#12487;&#12540;&#12479;&#12477;&#12540;&#12473;&#12395;&#12414;&#12383;&#12364;&#12427;&#20998;&#25955;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12434;&#25201;&#12356;&#12414;&#12377;&#12290; &#24403;&#28982;&#12503;&#12525;&#12464;&#12521;&#12512;&#12391;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#22659;&#30028;&#12434;&#25351;&#23450;&#12391;&#12365;&#12414;&#12377;(BMT)&#12290; &#12354;&#12427;&#12356;&#12399;&#12289;&#35352;&#36848;&#12375;&#12383;&#12467;&#12540;&#12489;&#12398;&#12509;&#12540;&#12479;&#12499;&#12522;&#12486;&#12451;&#12434;&#20445;&#12388;&#12383;&#12417;&#12395;&#12289; &#12458;&#12503;&#12471;&#12519;&#12531;&#12398;Hibernate&#12398;
                     <code class="literal">Transaction</code> API&#12434;&#20351;&#12356;&#12383;&#12367;&#12394;&#12427;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#12290; 
                  </p>
               </li>
            </ul>
         </div>
         <div class="itemizedlist">
            <ul type="disc">
               <li>
                  <p><span class="emphasis"><em>&#33258;&#21205;JNDI&#12496;&#12452;&#12531;&#12487;&#12451;&#12531;&#12464;</em></span>&#65306;Hibernate&#12399;JNDI&#12364;&#31435;&#12385;&#19978;&#12364;&#12387;&#12383;&#24460;&#12395; <code class="literal">SessionFactory</code> &#12434;&#29983;&#25104;&#12375;&#12414;&#12377;&#12290; 
                  </p>
               </li>
            </ul>
         </div>
         <div class="itemizedlist">
            <ul type="disc">
               <li>
                  <p><span class="emphasis"><em>JTA&#12475;&#12483;&#12471;&#12519;&#12531;&#12496;&#12452;&#12531;&#12487;&#12451;&#12531;&#12464;</em></span> &#65306; Hibernate <code class="literal">Session</code> &#12398;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#22659;&#30028;&#12399;JTA&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12392;&#21516;&#12376;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290; &#21336;&#32020;&#12395; <code class="literal">SessionFactory</code> &#12434;JNDI&#12363;&#12425;lookup&#12375;&#12390;&#12289; &#29694;&#22312;&#12398; <code class="literal">Session</code> &#12434;&#21462;&#24471;&#12375;&#12414;&#12377;&#12290; JTA&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12364;&#23436;&#20102;&#12375;&#12383;&#12392;&#12365;&#12395;&#12289;Hibernate&#12364; <code class="literal">Session</code> &#12434;&#12501;&#12521;&#12483;&#12471;&#12517;&#12375;&#12289;&#12463;&#12525;&#12540;&#12474;&#12375;&#12414;&#12377;&#12290; EJB&#12487;&#12503;&#12525;&#12452;&#12513;&#12531;&#12488;&#12487;&#12451;&#12473;&#12463;&#12522;&#12503;&#12479;&#12398;&#20013;&#12395;&#12289;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#22659;&#30028;&#12434;&#23459;&#35328;&#12375;&#12414;&#12377;&#12290; 
                  </p>
               </li>
            </ul>
         </div>
         <div class="itemizedlist">
            <ul type="disc">
               <li>
                  <p><span class="emphasis"><em>JMX&#12487;&#12503;&#12525;&#12452;:</em></span> &#12418;&#12375;JMX&#12364;&#20351;&#29992;&#21487;&#33021;&#12394;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12469;&#12540;&#12496;&#65288;&#20363;&#12360;&#12400;JBOSS&#65289; &#12364;&#12354;&#12427;&#22580;&#21512;&#12289;Hibernate&#12434;MBean&#12392;&#12375;&#12390;&#12487;&#12503;&#12525;&#12452;&#12377;&#12427;&#12371;&#12392;&#12434;&#36984;&#12409;&#12414;&#12377;&#12290; &#12371;&#12428;&#12399; <code class="literal">Configuration</code> &#12363;&#12425; <code class="literal">SessionFactory</code> &#12434; &#29983;&#25104;&#12377;&#12427;&#12467;&#12540;&#12489;&#12434;&#28961;&#12367;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290; &#12467;&#12531;&#12486;&#12490;&#12399; <code class="literal">HibernateService</code> &#12434;&#36215;&#21205;&#12375;&#12289; &#12469;&#12540;&#12499;&#12473;&#12398;&#20381;&#23384;&#12434;&#29702;&#24819;&#30340;&#12395;&#31649;&#29702;&#12375;&#12414;&#12377;&#65288;&#12487;&#12540;&#12479;&#12477;&#12540;&#12473;&#12399;Hibernate&#12420;&#12381;&#12398;&#20182;&#12364;&#36215;&#21205;&#12377;&#12427;&#21069;&#12395; &#20351;&#29992;&#12391;&#12365;&#12427;&#12424;&#12358;&#12395;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#65289;&#12290; 
                  </p>
               </li>
            </ul>
         </div>
         <p>&#29872;&#22659;&#12395;&#20381;&#23384;&#12375;&#12414;&#12377;&#12364;&#12289;&#12418;&#12375;&#12289;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12469;&#12540;&#12496;&#12364;"connection containment"&#12398;&#20363;&#22806;&#12434;&#12473;&#12525;&#12540;&#12377;&#12427;&#12394;&#12425; &#35373;&#23450;&#12398;&#12458;&#12503;&#12471;&#12519;&#12531; <code class="literal">hibernate.connection.aggressive_release</code> &#12434;true&#12395;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; 
         </p>
         <div class="sect2" lang="ja-JP">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="configuration-optional-transactionstrategy"></a>3.8.1. &#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#25126;&#30053;&#35373;&#23450;
                     </h3>
                  </div>
               </div>
            </div>
            <p>Hibernate <code class="literal">Session</code> API&#12399;&#12289;&#12450;&#12540;&#12461;&#12486;&#12463;&#12481;&#12515;&#20869;&#12398;&#12471;&#12473;&#12486;&#12512;&#12398;&#31649;&#36676;&#12391;&#12354;&#12427; &#12354;&#12425;&#12422;&#12427;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12395;&#20381;&#23384;&#12375;&#12414;&#12379;&#12435;&#12290; &#12418;&#12375;&#12467;&#12493;&#12463;&#12471;&#12519;&#12531;&#12503;&#12540;&#12523;&#12398;JDBC&#12434;&#30452;&#25509;&#20351;&#12356;&#12383;&#12356;&#22580;&#21512;&#12289;JDBC API&#12363;&#12425; &#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12434;&#21628;&#12406;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290; &#12418;&#12375;&#12289;J2EE&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12469;&#12540;&#12496;&#12391;&#21205;&#20316;&#12373;&#12379;&#12427;&#12394;&#12425;&#12289;Bean&#31649;&#29702;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12434;&#20351;&#12356;&#12289;
               &#24517;&#35201;&#12395;&#24540;&#12376;&#12390; <code class="literal">UserTransaction</code> &#12434;JTA API&#12363;&#12425;&#21628;&#12406;&#12371;&#12392;&#12395;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290; 
            </p>
            <p>2&#12388;&#65288;&#12381;&#12428;&#20197;&#19978;&#65289;&#12398;&#29872;&#22659;&#12391;&#20114;&#25563;&#24615;&#12398;&#12354;&#12427;&#12467;&#12540;&#12489;&#12434;&#32173;&#25345;&#12377;&#12427;&#12383;&#12417;&#12395;&#12289;&#12458;&#12503;&#12471;&#12519;&#12531;&#12392;&#12375;&#12390;&#26681;&#26412;&#30340;&#12394;&#12471;&#12473;&#12486;&#12512;&#12434; &#12521;&#12483;&#12500;&#12531;&#12464;&#12377;&#12427;Hibernate <code class="literal">Transaction</code> API&#12434;&#25512;&#22888;&#12375;&#12414;&#12377;&#12290; Hibernate&#35373;&#23450;&#12503;&#12525;&#12497;&#12486;&#12451;&#12398; <code class="literal">hibernate.transaction.factory_class</code> &#12434;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12391; &#12354;&#12427;&#29305;&#23450;&#12398; <code class="literal">Transaction</code> &#12463;&#12521;&#12473;&#12398;&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#12434;&#25345;&#12388;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290; 
            </p>
            <p>3&#12388;&#12398;&#22522;&#26412;&#30340;&#12394;&#65288;&#26082;&#12395;&#12354;&#12427;&#65289;&#36984;&#25246;&#12434;&#25369;&#12370;&#12414;&#12377;&#65306; </p>
            <div class="variablelist">
               <dl>
                  <dt><span class="term"><code class="literal">org.hibernate.transaction.JDBCTransactionFactory</code></span></dt>
                  <dd>
                     <p>&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;(JDBC)&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12395;&#22996;&#35698;&#12375;&#12414;&#12377;&#65288;&#12487;&#12501;&#12457;&#12523;&#12488;&#65289;</p>
                  </dd>
                  <dt><span class="term"><code class="literal">org.hibernate.transaction.JTATransactionFactory</code></span></dt>
                  <dd>
                     <p>&#12418;&#12375;&#12289;&#12371;&#12398;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#65288;&#20363;&#12360;&#12400;&#12289;EJB&#12475;&#12483;&#12471;&#12519;&#12531;Bean&#12513;&#12477;&#12483;&#12489;&#65289;&#12391;&#36914;&#34892;&#20013;&#12398;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12364;&#23384;&#22312;&#12377;&#12427;&#12289;&#12418;&#12375;&#12367;&#12399; &#26032;&#12375;&#12356;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12364;&#38283;&#22987;&#12373;&#12428;&#12390;&#12362;&#12426;&#12289;Bean&#31649;&#29702;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12364;&#20351;&#12431;&#12428;&#12390;&#12356;&#12427;&#22580;&#21512;&#12289; &#12467;&#12531;&#12486;&#12490;&#31649;&#29702;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12395;&#22996;&#35698;&#12375;&#12414;&#12377;&#12290;
                        
                     </p>
                  </dd>
                  <dt><span class="term"><code class="literal">org.hibernate.transaction.CMTTransactionFactory</code></span></dt>
                  <dd>
                     <p>&#12467;&#12531;&#12486;&#12490;&#31649;&#29702;JTA&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12395;&#22996;&#35698;&#12375;&#12414;&#12377;</p>
                  </dd>
               </dl>
            </div>
            <p>&#33258;&#20998;&#33258;&#36523;&#12398;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#25126;&#30053;&#65288;&#20363;&#12360;&#12400;&#12289;CORBA&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12469;&#12540;&#12499;&#12473;&#65289;&#12434;&#23450;&#32681;&#12377;&#12427;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290; </p>
            <p>Hibernate&#12398;&#12356;&#12367;&#12388;&#12363;&#12398;&#27231;&#33021;&#65288;&#20363;&#12360;&#12400;&#12289;&#20108;&#27425;&#12461;&#12515;&#12483;&#12471;&#12517;&#12289;JTA&#12395;&#12424;&#12427;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12475;&#12483;&#12471;&#12519;&#12531; &#31561;&#65289;&#12399; &#31649;&#29702;&#12373;&#12428;&#12383;&#29872;&#22659;&#12398;&#20013;&#12398;JTA <code class="literal">TransactionManager</code> &#12408;&#12398;&#12450;&#12463;&#12475;&#12473;&#12434;&#35201;&#27714;&#12375;&#12414;&#12377;&#12290; J2EE&#12364;&#12402;&#12392;&#12388;&#12398;&#12513;&#12459;&#12491;&#12474;&#12512;&#12395;&#35215;&#26684;&#21270;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;&#12398;&#12391;&#12289; &#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12469;&#12540;&#12496;&#12395;&#12362;&#12356;&#12390;&#12289;Hibernate&#12364; <code class="literal">TransactionManager</code> &#12398;&#12522;&#12501;&#12449;&#12524;&#12531;&#12473; &#12434;&#21462;&#24471;&#12377;&#12427;&#26041;&#27861;&#12434;&#26126;&#30906;&#12395;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290; 
            </p>
            <div class="table"><a name="jtamanagerlookup"></a><p class="title"><b>&#34920; 3.10. JTA &#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12510;&#12493;&#12540;&#12472;&#12515;</b></p>
               <div class="table-contents">
                  <table summary="JTA &#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12510;&#12493;&#12540;&#12472;&#12515;" border="1">
                     <colgroup>
                        <col>
                        <col>
                     </colgroup>
                     <thead>
                        <tr>
                           <th>Transaction Factory</th>
                           <th align="center">Application Server</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td><code class="literal">org.hibernate.transaction.JBossTransactionManagerLookup</code></td>
                           <td align="center">JBoss</td>
                        </tr>
                        <tr>
                           <td><code class="literal">org.hibernate.transaction.WeblogicTransactionManagerLookup</code></td>
                           <td align="center">Weblogic</td>
                        </tr>
                        <tr>
                           <td><code class="literal">org.hibernate.transaction.WebSphereTransactionManagerLookup</code></td>
                           <td align="center">WebSphere</td>
                        </tr>
                        <tr>
                           <td><code class="literal">org.hibernate.transaction.WebSphereExtendedJTATransactionLookup</code></td>
                           <td align="center">WebSphere 6</td>
                        </tr>
                        <tr>
                           <td><code class="literal">org.hibernate.transaction.OrionTransactionManagerLookup</code></td>
                           <td align="center">Orion</td>
                        </tr>
                        <tr>
                           <td><code class="literal">org.hibernate.transaction.ResinTransactionManagerLookup</code></td>
                           <td align="center">Resin</td>
                        </tr>
                        <tr>
                           <td><code class="literal">org.hibernate.transaction.JOTMTransactionManagerLookup</code></td>
                           <td align="center">JOTM</td>
                        </tr>
                        <tr>
                           <td><code class="literal">org.hibernate.transaction.JOnASTransactionManagerLookup</code></td>
                           <td align="center">JOnAS</td>
                        </tr>
                        <tr>
                           <td><code class="literal">org.hibernate.transaction.JRun4TransactionManagerLookup</code></td>
                           <td align="center">JRun4</td>
                        </tr>
                        <tr>
                           <td><code class="literal">org.hibernate.transaction.BESTransactionManagerLookup</code></td>
                           <td align="center">Borland ES</td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div><br class="table-break"></div>
         <div class="sect2" lang="ja-JP">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="configuration-optional-jndi"></a>3.8.2. <code class="literal">SessionFactory</code> &#12398;JNDI&#12408;&#12398;&#30331;&#37682;
                     </h3>
                  </div>
               </div>
            </div>
            <p>JNDI&#12395;&#30331;&#37682;&#12375;&#12383;Hibernate <code class="literal">SessionFactory</code> &#12399;&#21336;&#32020;&#12395; &#12501;&#12449;&#12463;&#12488;&#12522;&#12434;&#12523;&#12483;&#12463;&#12450;&#12483;&#12503;&#12375;&#12289;&#26032;&#12375;&#12356; <code class="literal">Session</code> &#12434;&#20316;&#12426;&#12414;&#12377;&#12290; &#12371;&#12428;&#12399;JNDI&#12395;&#30331;&#37682;&#12373;&#12428;&#12383; <code class="literal">Datasource</code> &#12395;&#12399;&#38306;&#36899;&#12379;&#12378;&#12289; &#12362;&#20114;&#12356;&#12395;&#12471;&#12531;&#12503;&#12523;&#12395;&#12371;&#12428;&#12425;&#12398;&#30331;&#37682;&#12434;&#20351;&#12358;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; 
            </p>
            <p>&#12418;&#12375; <code class="literal">SessionFactory</code> &#12434;JNDI&#12493;&#12540;&#12512;&#12473;&#12506;&#12540;&#12473;&#12395;&#30331;&#37682;&#12375;&#12383;&#12356;&#22580;&#21512;&#12289; &#29305;&#21029;&#12394;&#21517;&#21069;&#65288;&#20363;&#12360;&#12400;&#12289; <code class="literal">java:hibernate/SessionFactory</code> &#65289;&#12434; <code class="literal">hibernate.session_factory_name</code> &#12503;&#12525;&#12497;&#12486;&#12451;&#12395;&#20351;&#12387;&#12390;&#12367;&#12384;&#12373;&#12356; &#12418;&#12375;&#12371;&#12398;&#12503;&#12525;&#12497;&#12486;&#12451;&#12434;&#30465;&#30053;&#12375;&#12383;&#22580;&#21512;&#12289; <code class="literal">SessionFactory</code> &#12399; JNDI&#12395;&#30331;&#37682;&#12373;&#12428;&#12414;&#12379;&#12435;&#12290;&#65288;&#12371;&#12428;&#12399;Tomcat&#12398;&#12424;&#12358;&#12394;&#12487;&#12501;&#12457;&#12523;&#12488;&#23455;&#35013;&#12391;JNDI&#12364;&#35501;&#12415;&#12424;&#12426;&#23554;&#29992;&#12398;&#29872;&#22659;&#12398;&#22580;&#21512;&#29305;&#12395;&#20415;&#21033;&#12391;&#12377;&#12290;&#65289; 
            </p>
            <p><code class="literal">SessionFactory</code> &#12434;JNDI&#12395;&#30331;&#37682;&#12377;&#12427;&#12392;&#12365;&#12289;Hibernate&#12399; <code class="literal">hibernate.jndi.url</code> &#12398;&#20516;&#12434;&#20351;&#29992;&#12375;&#12289;<code class="literal">hibernate.jndi.class</code> &#12434;&#12452;&#12491;&#12471;&#12515;&#12523;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12392;&#12375;&#12390;&#20855;&#20307;&#21270;&#12375;&#12414;&#12377;&#12290; &#12418;&#12375;&#20309;&#12418;&#35373;&#23450;&#12375;&#12394;&#12356;&#22580;&#21512;&#12399;&#12289;&#12487;&#12501;&#12457;&#12523;&#12488;&#12398; <code class="literal">InitialContext</code> &#12434;&#20351;&#29992;&#12375;&#12414;&#12377;&#12290; 
            </p>
            <p><code class="literal">cfg.buildSessionFactory()</code> &#12434;&#12467;&#12540;&#12523;&#24460; Hibernate&#12399;&#33258;&#21205;&#30340;&#12395; <code class="literal">SessionFactory</code> &#12434;JNDI&#12395;&#37197;&#32622;&#12375;&#12414;&#12377;&#12290; <code class="literal">HibernateService</code> &#12392;&#19968;&#32210;&#12395;JMX&#12487;&#12503;&#12525;&#12452;&#12513;&#12531;&#12488;&#12434;&#20351;&#12431;&#12394;&#12356;&#38480;&#12426;&#12289; &#12371;&#12428;&#12399;&#12371;&#12398;&#21628;&#12403;&#20986;&#12375;&#12434;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#20869;&#12398;&#20309;&#12425;&#12363;&#12398;&#12473;&#12479;&#12540;&#12488;&#12450;&#12483;&#12503;&#12467;&#12540;&#12489;&#65288;&#12418;&#12375;&#12367;&#12399;&#12518;&#12540;&#12486;&#12451;&#12522;&#12486;&#12451;&#12463;&#12521;&#12473;&#65289; &#12395;&#37197;&#32622;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12394;&#12356;&#12371;&#12392;&#12434;&#24847;&#21619;&#12375;&#12414;&#12377;&#12290;&#65288;&#24460;&#12391;&#35696;&#35542;&#12375;&#12414;&#12377;&#65289; 
            </p>
            <p>&#12418;&#12375;JNDI <code class="literal">SessionFactory</code> &#12434;&#20351;&#12358;&#22580;&#21512;&#12289;EJB&#12420;&#20182;&#12398;&#12463;&#12521;&#12473;&#12399; JNDI&#12523;&#12483;&#12463;&#12450;&#12483;&#12503;&#12434;&#20351;&#12387;&#12390; <code class="literal">SessionFactory</code> &#12434;&#21462;&#24471;&#12375;&#12414;&#12377;&#12290; 
            </p>
            <p>&#31649;&#29702;&#12373;&#12428;&#12383;&#29872;&#22659;&#12391;&#12399; <code class="literal">SessionFactory</code> &#12434;JNDI&#12395;&#12496;&#12452;&#12531;&#12489;&#12375;&#12289; &#12381;&#12358;&#12391;&#12394;&#12369;&#12428;&#12400; <code class="literal">static</code> &#12471;&#12531;&#12464;&#12523;&#12488;&#12531;&#12434;&#20351;&#12358;&#12371;&#12392;&#12434;&#25512;&#22888;&#12375;&#12414;&#12377;&#12290; &#12371;&#12358;&#12356;&#12387;&#12383;&#35443;&#32048;&#12363;&#12425;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12467;&#12540;&#12489;&#12434;&#20445;&#35703;&#12377;&#12427;&#12383;&#12417;&#12395;&#12289; <code class="literal">HibernateUtil.getSessionFactory()</code> &#12398;&#12424;&#12358;&#12394;&#12504;&#12523;&#12497;&#12540;&#12463;&#12521;&#12473;&#12398;&#20013;&#12395;&#12289; <code class="literal">SessionFactory</code> &#12434;&#12523;&#12483;&#12463;&#12450;&#12483;&#12503;&#12377;&#12427;&#12467;&#12540;&#12489;&#12434;&#38560;&#12377;&#12371;&#12392;&#12434;&#25512;&#22888;&#12375;&#12414;&#12377;&#12290; &#12371;&#12398;&#12424;&#12358;&#12394;&#12504;&#12523;&#12497;&#12540;&#12463;&#12521;&#12473;&#12399;Hibernate&#12434;&#38283;&#22987;&#12377;&#12427;&#20415;&#21033;&#12394;&#25163;&#27573;&#12391;&#12418;&#12354;&#12426;&#12414;&#12377;&#12290; &#65297;&#31456;&#12434;&#21442;&#29031;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; 
            </p>
         </div>
         <div class="sect2" lang="ja-JP">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="configuration-j2ee-currentsession"></a>3.8.3. JTA&#12395;&#12424;&#12427;&#29694;&#22312;&#12398;&#12475;&#12483;&#12471;&#12519;&#12531;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12510;&#12493;&#12540;&#12472;&#12513;&#12531;&#12488;
                     </h3>
                  </div>
               </div>
            </div>
            <p>&#12418;&#12387;&#12392;&#12418;&#31777;&#21336;&#12395; <code class="literal">Session</code> &#12392;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12434;&#25201;&#12358;&#26041;&#27861;&#12399;&#12289; Hibernate&#12364;&#33258;&#21205;&#30340;&#12395;&#12300;&#29694;&#22312;&#12398;&#12301; <code class="literal">Session</code> &#12434;&#31649;&#29702;&#12377;&#12427;&#12371;&#12392;&#12391;&#12377;&#12290; <a href="architecture-current-session.html" title="2.5. &#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#19978;&#12398;&#12475;&#12483;&#12471;&#12519;&#12531;">&#38917;2.5. &#12300;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#19978;&#12398;&#12475;&#12483;&#12471;&#12519;&#12531;&#12301;</a> &#12398;&#35500;&#26126;&#12434;&#21442;&#29031;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; &#12418;&#12375; <code class="literal">&#12300;JTA&#12301;</code> &#12475;&#12483;&#12471;&#12519;&#12531;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12434;&#20351;&#12387;&#12383;&#19978;&#12391;&#12289; &#29694;&#22312;&#12398;JTA&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12392;Hibernate <code class="literal">Session</code> &#12364;&#38306;&#36899;&#12375;&#12390;&#12356;&#12394;&#12356;&#22580;&#21512;&#12399;&#12289; &#26368;&#21021;&#12395; <code class="literal">sessionFactory.getCurrentSession()</code> &#12434;&#12467;&#12540;&#12523;&#12375;&#12289; JTA&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12392;&#12398;&#38306;&#36899;&#20184;&#12369;&#12434;&#34892;&#12387;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; <code class="literal">&#12300;JTA&#12301;</code> &#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12398; <code class="literal">getCurrentSession()</code> &#12434; &#36890;&#12376;&#12390;&#21462;&#24471;&#12375;&#12383; <code class="literal">Session</code> &#12399;&#12289;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12364;&#23436;&#20102;&#12377;&#12427;&#21069;&#12395; &#33258;&#21205;&#30340;&#12395;&#12501;&#12521;&#12483;&#12471;&#12517;&#12375;&#12289;&#23436;&#20102;&#12375;&#12383;&#24460;&#12395;&#12399;&#33258;&#21205;&#30340;&#12395;&#12463;&#12525;&#12540;&#12474;&#12375;&#12414;&#12377;&#12290; &#12414;&#12383;&#12289;&#21508;&#12473;&#12486;&#12540;&#12488;&#12513;&#12531;&#12488;&#24460;&#12395;JDBC&#12467;&#12493;&#12463;&#12471;&#12519;&#12531;&#12434;&#31309;&#26997;&#30340;&#12395;&#12522;&#12522;&#12540;&#12473;&#12375;&#12414;&#12377;&#12290; &#12371;&#12428;&#12395;&#12424;&#12426;JTA&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12398;&#12521;&#12452;&#12501;&#12469;&#12452;&#12463;&#12523;&#12391; <code class="literal">Session</code> &#12434;&#31649;&#29702;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12289; &#12518;&#12540;&#12470;&#12540;&#12398;&#12467;&#12540;&#12489;&#12363;&#12425;&#12381;&#12398;&#12424;&#12358;&#12394;&#31649;&#29702;&#12434;&#12377;&#12427;&#12467;&#12540;&#12489;&#12434;&#25490;&#38500;&#12391;&#12365;&#12414;&#12377;&#12290; <code class="literal">UserTransaction</code> &#12434;&#36890;&#12376;&#12390;JTA&#12434;&#12503;&#12525;&#12464;&#12521;&#12512;&#12391;&#31649;&#29702;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290; &#12414;&#12383;&#12399;&#12289;&#65288;&#12509;&#12540;&#12479;&#12502;&#12523;&#12394;&#12467;&#12540;&#12489;&#12391;&#12354;&#12428;&#12400;&#65289;Hibernate <code class="literal">Transaction</code> API&#12434; &#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#22659;&#30028;&#12392;&#12375;&#12390;&#20351;&#12358;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290; EJB&#12467;&#12531;&#12486;&#12490;&#12434;&#20351;&#12358;&#12392;&#12365;&#12399;&#12289;CMT&#12395;&#12424;&#12427;&#23459;&#35328;&#30340;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#22659;&#30028;&#12364;&#22909;&#12414;&#12375;&#12356;&#12391;&#12377;&#12290; 
            </p>
         </div>
         <div class="sect2" lang="ja-JP">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title"><a name="configuration-j2ee-jmx"></a>3.8.4. JMX&#12487;&#12503;&#12525;&#12452;&#12513;&#12531;&#12488;
                     </h3>
                  </div>
               </div>
            </div>
            <p><code class="literal">SessionFactory</code> &#12434;JNDI&#12363;&#12425;&#21462;&#24471;&#12377;&#12427;&#12383;&#12417;&#12395;&#12399; <code class="literal">cfg.buildSessionFactory()</code> &#34892;&#12434;&#12393;&#12371;&#12363;&#12391;&#23455;&#34892;&#12375;&#12390;&#12356;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290; &#12354;&#12394;&#12383;&#12399;&#12371;&#12428;&#12434;&#12289;<code class="literal">static</code> &#21021;&#26399;&#21270;&#12502;&#12525;&#12483;&#12463;&#20869;&#65288; <code class="literal">HibernateUtil</code> &#12398;&#12424;&#12358;&#12394;&#65289;&#12363; <span class="emphasis"><em>managed service</em></span> &#12392;&#12375;&#12390;Hibernate&#12434;&#12487;&#12503;&#12525;&#12452;&#12377;&#12427;&#12363;&#12289;&#12393;&#12385;&#12425;&#12363;&#12391;&#23455;&#34892;&#12391;&#12365;&#12414;&#12377;&#12290; 
            </p>
            <p>JBOSS&#12398;&#12424;&#12358;&#12394;JMX&#12398;&#27231;&#33021;&#12391;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12469;&#12540;&#12496;&#12395;&#12487;&#12503;&#12525;&#12452;&#12377;&#12427;&#12383;&#12417;&#12395; <code class="literal">org.hibernate.jmx.HibernateService</code> &#12434;&#20351;&#12387;&#12390;&#12289;&#37197;&#32622;&#12375;&#12414;&#12377;&#12290; &#23455;&#38555;&#12398;&#12487;&#12503;&#12525;&#12452;&#12513;&#12531;&#12488;&#12392;&#35373;&#23450;&#12399;&#12505;&#12531;&#12480;&#12540;&#29305;&#26377;&#12391;&#12377;&#12290; &#12371;&#12371;&#12391;&#20363;&#12392;&#12375;&#12390;JBOSS 4.0.x&#29992;&#12398; <code class="literal">jboss-service.xml</code> &#12434;&#31034;&#12375;&#12414;&#12377;&#12290; 
            </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;server&gt;

&lt;mbean code="org.hibernate.jmx.HibernateService"
    name="jboss.jca:service=HibernateFactory,name=HibernateFactory"&gt;

    &lt;!-- Required services --&gt;
    &lt;depends&gt;jboss.jca:service=RARDeployer&lt;/depends&gt;
    &lt;depends&gt;jboss.jca:service=LocalTxCM,name=HsqlDS&lt;/depends&gt;

    &lt;!-- Bind the Hibernate service to JNDI --&gt;
    &lt;attribute name="JndiName"&gt;java:/hibernate/SessionFactory&lt;/attribute&gt;

    &lt;!-- Datasource settings --&gt;
    &lt;attribute name="Datasource"&gt;java:HsqlDS&lt;/attribute&gt;
    &lt;attribute name="Dialect"&gt;org.hibernate.dialect.HSQLDialect&lt;/attribute&gt;

    &lt;!-- Transaction integration --&gt;
    &lt;attribute name="TransactionStrategy"&gt;
        org.hibernate.transaction.JTATransactionFactory&lt;/attribute&gt;
    &lt;attribute name="TransactionManagerLookupStrategy"&gt;
        org.hibernate.transaction.JBossTransactionManagerLookup&lt;/attribute&gt;
    &lt;attribute name="FlushBeforeCompletionEnabled"&gt;true&lt;/attribute&gt;
    &lt;attribute name="AutoCloseSessionEnabled"&gt;true&lt;/attribute&gt;

    &lt;!-- Fetching options --&gt;
    &lt;attribute name="MaximumFetchDepth"&gt;5&lt;/attribute&gt;

    &lt;!-- Second-level caching --&gt;
    &lt;attribute name="SecondLevelCacheEnabled"&gt;true&lt;/attribute&gt;
    &lt;attribute name="CacheProviderClass"&gt;org.hibernate.cache.EhCacheProvider&lt;/attribute&gt;
    &lt;attribute name="QueryCacheEnabled"&gt;true&lt;/attribute&gt;

    &lt;!-- Logging --&gt;
    &lt;attribute name="ShowSqlEnabled"&gt;true&lt;/attribute&gt;

    &lt;!-- Mapping files --&gt;
    &lt;attribute name="MapResources"&gt;auction/Item.hbm.xml,auction/Category.hbm.xml&lt;/attribute&gt;

&lt;/mbean&gt;

&lt;/server&gt;</pre><p>&#12371;&#12398;&#12501;&#12449;&#12452;&#12523;&#12399; <code class="literal">META-INF</code> &#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12395;&#37197;&#32622;&#12373;&#12428;&#12289; JAR&#12501;&#12449;&#12452;&#12523;&#12434;&#25313;&#24373;&#12375;&#12383; <code class="literal">.sar</code> (service archive)&#12391;&#12497;&#12483;&#12465;&#12540;&#12472;&#21270;&#12373;&#12428;&#12414;&#12377;&#12290; &#21516;&#27096;&#12395;Hibernate&#12497;&#12483;&#12465;&#12540;&#12472;&#12418;&#24517;&#35201;&#12391;&#12377;&#12290;&#12414;&#12383;&#12289;Hibernate&#12399;&#12469;&#12540;&#12489;&#12497;&#12540;&#12486;&#12451;&#12398;&#12521;&#12452;&#12502;&#12521;&#12522;&#12418;&#35201;&#27714;&#12375;&#12414;&#12377;&#12290; &#12467;&#12531;&#12497;&#12452;&#12523;&#12375;&#12383;&#27704;&#32154;&#21270;&#12463;&#12521;&#12473;&#12392;&#12381;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#12501;&#12449;&#12452;&#12523;&#12418;&#21516;&#27096;&#12395;&#12450;&#12540;&#12459;&#12452;&#12502;&#65288;.sar&#12501;&#12449;&#12452;&#12523;&#65289;&#12395;&#20837;&#12428;&#12414;&#12377;&#12290;
               &#12456;&#12531;&#12479;&#12540;&#12503;&#12521;&#12452;&#12474;bean&#65288;&#36890;&#24120;&#12399;&#12475;&#12483;&#12471;&#12519;&#12531;bean&#65289;&#12399;&#33258;&#36523;&#12398;JAR&#12501;&#12449;&#12452;&#12523;&#12434;&#20445;&#25345;&#12375;&#12414;&#12377;&#12364;&#12289; 1&#22238;&#12391;&#65288;&#12507;&#12483;&#12488;&#65289;&#12487;&#12503;&#12525;&#12452;&#21487;&#33021;&#12394;&#12518;&#12491;&#12483;&#12488;&#12398;&#12383;&#12417;&#12395;&#12513;&#12452;&#12531;&#12469;&#12540;&#12499;&#12473;&#12450;&#12540;&#12459;&#12452;&#12502;&#12392;&#12375;&#12390;&#12371;&#12398;EJB JAR&#12501;&#12449;&#12452;&#12523;&#12434;&#12452;&#12531;&#12463;&#12523;&#12540;&#12489;&#12377;&#12427; &#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;JBoss&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12469;&#12540;&#12496;&#12398;&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12395;JXM&#12469;&#12540;&#12499;&#12473;&#12392;
               EJB&#12487;&#12503;&#12525;&#12452;&#12513;&#12531;&#12488;&#12398;&#12424;&#12426;&#22810;&#12367;&#12398;&#24773;&#22577;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290; 
            </p>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="configuration-xmlconfig.html">&#21069;&#12398;&#12506;&#12540;&#12472;</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="session-configuration.html">&#19978;&#12395;&#25147;&#12427;</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="persistent-classes.html">&#27425;&#12398;&#12506;&#12540;&#12472;</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">3.7. XML&#35373;&#23450;&#12501;&#12449;&#12452;&#12523;&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">&#12507;&#12540;&#12512;</a></td>
               <td width="40%" align="right" valign="top">&nbsp;&#31532;4&#31456; &#27704;&#32154;&#12463;&#12521;&#12473;</td>
            </tr>
         </table>
      </div>
   </body>
</html>