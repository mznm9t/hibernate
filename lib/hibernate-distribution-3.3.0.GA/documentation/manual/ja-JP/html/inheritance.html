<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>&#31532;9&#31456; &#32153;&#25215;&#12510;&#12483;&#12500;&#12531;&#12464;</title>
      <link rel="stylesheet" href="css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="HIBERNATE - Relational Persistence for Idiomatic Java">
      <link rel="up" href="index.html" title="HIBERNATE - Relational Persistence for Idiomatic Java">
      <link rel="prev" href="components-dynamic.html" title="8.5. &#21205;&#30340;&#12467;&#12531;&#12509;&#12540;&#12493;&#12531;&#12488;">
      <link rel="next" href="inheritance-limitations.html" title="9.2. &#21046;&#38480;">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">&#31532;9&#31456; &#32153;&#25215;&#12510;&#12483;&#12500;&#12531;&#12464;</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="components-dynamic.html">&#21069;&#12398;&#12506;&#12540;&#12472;</a>&nbsp;
               </td>
               <th width="60%" align="center">&nbsp;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="inheritance-limitations.html">&#27425;&#12398;&#12506;&#12540;&#12472;</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="chapter" lang="ja-JP">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title"><a name="inheritance"></a>&#31532;9&#31456; &#32153;&#25215;&#12510;&#12483;&#12500;&#12531;&#12464;
                  </h2>
               </div>
            </div>
         </div>
         <div class="sect1" lang="ja-JP">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="inheritance-strategies"></a>9.1. 3&#12388;&#12398;&#25126;&#30053;
                     </h2>
                  </div>
               </div>
            </div>
            <p>Hibernate&#12399;3&#12388;&#12398;&#22522;&#26412;&#30340;&#12394;&#32153;&#25215;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#25126;&#30053;&#12434;&#12469;&#12509;&#12540;&#12488;&#12375;&#12414;&#12377;&#12290; </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     <p>&#12463;&#12521;&#12473;&#38542;&#23652;&#12372;&#12392;&#12398;&#12486;&#12540;&#12502;&#12523;&#65288;table-per-class-hierarchy&#65289; </p>
                  </li>
                  <li>
                     <p>table per subclass </p>
                  </li>
                  <li>
                     <p>&#20855;&#35937;&#12463;&#12521;&#12473;&#12372;&#12392;&#12398;&#12486;&#12540;&#12502;&#12523;&#65288;table-per-concrete-class&#65289; </p>
                  </li>
               </ul>
            </div>
            <p>&#21152;&#12360;&#12390;4&#12388;&#30446;&#12395;&#12289;Hibernate&#12399;&#12431;&#12378;&#12363;&#12395;&#30064;&#12394;&#12427;&#24615;&#36074;&#12434;&#25345;&#12387;&#12383;&#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12474;&#12512;&#12434;&#12469;&#12509;&#12540;&#12488;&#12375;&#12414;&#12377;&#12290; </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     <p>&#26263;&#40665;&#30340;&#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12474;&#12512; </p>
                  </li>
               </ul>
            </div>
            <p>&#21516;&#19968;&#12398;&#32153;&#25215;&#38542;&#23652;&#12398;&#30064;&#12394;&#12427;&#12502;&#12521;&#12531;&#12481;&#12395;&#23550;&#12375;&#12390;&#30064;&#12394;&#12427;&#12510;&#12483;&#12500;&#12531;&#12464;&#25126;&#30053;&#12434;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290; &#12381;&#12398;&#22580;&#21512;&#12395;&#12399;&#20840;&#20307;&#12398;&#38542;&#23652;&#12395;&#28193;&#12427;&#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12474;&#12512;&#12434;&#23455;&#29694;&#12377;&#12427;&#12383;&#12417;&#12395;&#26263;&#40665;&#30340;&#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12474;&#12512;&#12434;&#20351;&#29992;&#12375;&#12414;&#12377;&#12290; &#12375;&#12363;&#12375;&#12289;Hibernate&#12399;&#21516;&#12376;&#12523;&#12540;&#12488; <code class="literal">&lt;class&gt;</code> &#35201;&#32032;&#20869;&#12391; <code class="literal">&lt;subclass&gt;</code> &#12510;&#12483;&#12500;&#12531;&#12464;&#12289;<code class="literal">&lt;joined-subclass&gt;</code> &#12510;&#12483;&#12500;&#12531;&#12464;&#12289; <code class="literal">&lt;union-subclass&gt;</code> &#12510;&#12483;&#12500;&#12531;&#12464;&#12398;&#21516;&#26178;&#20351;&#29992;&#12434;&#12469;&#12509;&#12540;&#12488;&#12375;&#12390;&#12356;&#12414;&#12379;&#12435;&#12290; <code class="literal">&lt;subclass&gt;</code> &#35201;&#32032;&#12392; <code class="literal">&lt;join&gt;</code> &#35201;&#32032;&#12434;&#32068;&#12415;&#21512;&#12431;&#12379;&#12427;&#12371;&#12392;&#12391;&#12289; &#21516;&#19968; <code class="literal">&lt;class&gt;</code> &#35201;&#32032;&#20869;&#12391;&#12398; table-per-hierarchy &#25126;&#30053;&#12392; table-per-subclass &#25126;&#30053;&#12398;&#21516;&#26178;&#20351;&#29992;&#12399;&#21487;&#33021;&#12391;&#12377;&#12290;&#27425;&#12398;&#20363;&#12434;&#35211;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; 
            </p>
            <p><code class="literal">subclass</code>, <code class="literal">union-subclass</code> &#12392; <code class="literal">joined-subclass</code> &#12510;&#12483;&#12500;&#12531;&#12464;&#12434;&#35079;&#25968;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12395;&#23450;&#32681;&#12377;&#12427;&#12371;&#12392;&#12364;&#20986;&#26469;&#12289; <code class="literal">hibernate-mapping</code> &#12398;&#30452;&#19979;&#12395;&#37197;&#32622;&#12375;&#12414;&#12377;&#12290; &#12371;&#12428;&#12399;&#26032;&#12375;&#12356;&#12510;&#12483;&#12500;&#12531;&#12464;&#12501;&#12449;&#12452;&#12523;&#12434;&#36861;&#21152;&#12377;&#12427;&#12384;&#12369;&#12391;&#12289;&#12463;&#12521;&#12473;&#38542;&#23652;&#12434;&#25313;&#24373;&#12391;&#12365;&#12427;&#12392;&#12356;&#12358;&#12371;&#12392;&#12391;&#12377;&#12290; &#12354;&#12425;&#12363;&#12376;&#12417;&#12510;&#12483;&#12503;&#12375;&#12383;&#12473;&#12540;&#12497;&#12540;&#12463;&#12521;&#12473;&#12434;&#25351;&#23450;&#12375;&#12390;&#12289;&#12469;&#12502;&#12463;&#12521;&#12473;&#12510;&#12483;&#12500;&#12531;&#12464;&#12395; <code class="literal">extends</code> &#23646;&#24615;&#12434;&#35352;&#36848;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290; &#27880;&#24847;&#65306;&#12371;&#12398;&#29305;&#24500;&#12395;&#12424;&#12426;&#12289;&#20197;&#21069;&#12399;&#12510;&#12483;&#12500;&#12531;&#12464;&#12539;&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12398;&#38918;&#30058;&#12364;&#37325;&#35201;&#12391;&#12375;&#12383;&#12290; Hibernate3&#12363;&#12425;&#12399;&#12289;extends&#12461;&#12540;&#12527;&#12540;&#12489;&#12434;&#20351;&#12358;&#22580;&#21512;&#12289;&#12510;&#12483;&#12500;&#12531;&#12464;&#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12398;&#38918;&#30058;&#12399;&#21839;&#38988;&#12395;&#12394;&#12426;&#12414;&#12379;&#12435;&#12290; &#65297;&#12388;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#12501;&#12449;&#12452;&#12523;&#20869;&#12391;&#38918;&#30058;&#20184;&#12369;&#12434;&#34892;&#12358;&#12392;&#12365;&#12399;&#12289;
               &#20381;&#28982;&#12392;&#12375;&#12390;&#12289;&#12469;&#12502;&#12463;&#12521;&#12473;&#12434;&#23450;&#32681;&#12377;&#12427;&#21069;&#12395;&#12473;&#12540;&#12497;&#12540;&#12463;&#12521;&#12473;&#12434;&#23450;&#32681;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;) 
            </p><pre class="programlisting">
 &lt;hibernate-mapping&gt;
     &lt;subclass name="DomesticCat" extends="Cat" discriminator-value="D"&gt;
          &lt;property name="name" type="string"/&gt;
     &lt;/subclass&gt;
 &lt;/hibernate-mapping&gt;</pre><div class="sect2" lang="ja-JP">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="inheritance-tableperclass"></a>9.1.1. &#12463;&#12521;&#12473;&#38542;&#23652;&#12372;&#12392;&#12398;&#12486;&#12540;&#12502;&#12523;&#65288;table-per-class-hierarchy&#65289;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#20363;&#12360;&#12400;&#12289;&#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12452;&#12473; <code class="literal">Payment</code> &#12392;&#12289;&#12381;&#12428;&#12434;&#23455;&#35013;&#12375;&#12383; <code class="literal">CreditCardPayment</code>&#12289;<code class="literal">CashPayment</code>&#12289; <code class="literal">ChequePayment</code> &#12364;&#12354;&#12427;&#12392;&#12375;&#12414;&#12377;&#12290;&#38542;&#23652;&#12372;&#12392;&#12398;&#12486;&#12540;&#12502;&#12523;&#12510;&#12483;&#12500;&#12531;&#12464;&#12399; &#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290; 
               </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="PAYMENT_TYPE" type="string"/&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;subclass name="CreditCardPayment" discriminator-value="CREDIT"&gt;
        &lt;property name="creditCardType" column="CCTYPE"/&gt;
        ...
    &lt;/subclass&gt;
    &lt;subclass name="CashPayment" discriminator-value="CASH"&gt;
        ...
    &lt;/subclass&gt;
    &lt;subclass name="ChequePayment" discriminator-value="CHEQUE"&gt;
        ...
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>&#12385;&#12423;&#12358;&#12393;&#19968;&#12388;&#12398;&#12486;&#12540;&#12502;&#12523;&#12364;&#24517;&#35201;&#12391;&#12377;&#12290; &#12371;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#25126;&#30053;&#12395;&#12399;&#19968;&#12388;&#22823;&#12365;&#12394;&#21046;&#38480;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290; <code class="literal">CCTYPE</code> &#12398;&#12424;&#12358;&#12394;&#12289;&#12469;&#12502;&#12463;&#12521;&#12473;&#12391;&#23459;&#35328;&#12373;&#12428;&#12383;&#12459;&#12521;&#12512;&#12399; <code class="literal">NOT NULL</code> &#21046;&#32004;&#12434;&#25345;&#12390;&#12414;&#12379;&#12435;&#12290; 
               </p>
            </div>
            <div class="sect2" lang="ja-JP">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="inheritance-tablepersubclass"></a>9.1.2. &#12469;&#12502;&#12463;&#12521;&#12473;&#12372;&#12392;&#12398;&#12486;&#12540;&#12502;&#12523;&#65288;table-per-subclass&#65289;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>table-per-subclass &#12510;&#12483;&#12500;&#12531;&#12464;&#12399;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290; </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;joined-subclass name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        &lt;property name="creditCardType" column="CCTYPE"/&gt;
        ...
    &lt;/joined-subclass&gt;
    &lt;joined-subclass name="CashPayment" table="CASH_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        ...
    &lt;/joined-subclass&gt;
    &lt;joined-subclass name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        ...
    &lt;/joined-subclass&gt;
&lt;/class&gt;</pre><p>&#12371;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#12395;&#12399;4&#12388;&#12398;&#12486;&#12540;&#12502;&#12523;&#12364;&#24517;&#35201;&#12391;&#12377;&#12290;3&#12388;&#12398;&#12469;&#12502;&#12463;&#12521;&#12473;&#12486;&#12540;&#12502;&#12523;&#12399; &#12473;&#12540;&#12497;&#12540;&#12463;&#12521;&#12473;&#12486;&#12540;&#12502;&#12523;&#12392;&#12398;&#38306;&#36899;&#12434;&#31034;&#12377;&#20027;&#12461;&#12540;&#12434;&#25345;&#12387;&#12390;&#12356;&#12414;&#12377; &#65288;&#23455;&#38555;&#12289;&#38306;&#20418;&#12514;&#12487;&#12523;&#19978;&#12399;&#19968;&#23550;&#19968;&#38306;&#36899;&#12391;&#12377;&#65289;&#12290; </p>
            </div>
            <div class="sect2" lang="ja-JP">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="inheritance-tablepersubclass-discriminator"></a>9.1.3. &#24321;&#21029;&#23376;&#12434;&#29992;&#12356;&#12383; table-per-subclass
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Hibernate&#12398; table-per-subclass &#23455;&#35013;&#12399;&#12289;discriminator&#12459;&#12521;&#12512;&#12434;&#24517;&#35201;&#12392;&#12375;&#12394;&#12356;&#12371;&#12392;&#12434;&#35226;&#12360;&#12390;&#12362;&#12356;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; Hibernate&#20197;&#22806;&#12398;O/R&#12510;&#12483;&#12497;&#12540;&#12399;&#12289;table-per-subclass &#12395;&#30064;&#12394;&#12427;&#23455;&#35013;&#12434;&#29992;&#12356;&#12414;&#12377;&#12290;
                  &#12381;&#12428;&#12399;&#12289;&#12473;&#12540;&#12497;&#12540;&#12463;&#12521;&#12473;&#12398;&#12486;&#12540;&#12502;&#12523;&#12395;&#12479;&#12452;&#12503;discriminator&#12459;&#12521;&#12512;&#12434;&#24517;&#35201;&#12392;&#12375;&#12414;&#12377;&#12290; &#12371;&#12398;&#12450;&#12503;&#12525;&#12540;&#12481;&#12399;&#23455;&#35013;&#12364;&#22256;&#38627;&#12395;&#12394;&#12426;&#12414;&#12377;&#12364;&#12289;&#38306;&#20418;&#12398;&#35222;&#28857;&#12363;&#12425;&#35211;&#12427;&#12392;&#12289;&#12424;&#12426;&#27491;&#30906;&#12394;&#12418;&#12398;&#12391;&#12377;&#12290; table-per-subclass &#25126;&#30053;&#12391;discriminator&#12459;&#12521;&#12512;&#12434;&#20351;&#12356;&#12383;&#12369;&#12428;&#12400;&#12289;
                  <code class="literal">&lt;subclass&gt;</code> &#12392; <code class="literal">&lt;join&gt;</code> &#12434;&#20197;&#19979;&#12398;&#12424;&#12358;&#12395;&#32068;&#12415;&#21512;&#12431;&#12379;&#12390;&#20351;&#12387;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; 
               </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="PAYMENT_TYPE" type="string"/&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;subclass name="CreditCardPayment" discriminator-value="CREDIT"&gt;
        &lt;join table="CREDIT_PAYMENT"&gt;
            &lt;key column="PAYMENT_ID"/&gt;
            &lt;property name="creditCardType" column="CCTYPE"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
    &lt;subclass name="CashPayment" discriminator-value="CASH"&gt;
        &lt;join table="CASH_PAYMENT"&gt;
            &lt;key column="PAYMENT_ID"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
    &lt;subclass name="ChequePayment" discriminator-value="CHEQUE"&gt;
        &lt;join table="CHEQUE_PAYMENT" fetch="select"&gt;
            &lt;key column="PAYMENT_ID"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>&#12458;&#12503;&#12471;&#12519;&#12531;&#12398; <code class="literal">fetch="select"</code> &#23459;&#35328;&#12399;&#12289; &#12473;&#12540;&#12497;&#12540;&#12463;&#12521;&#12473;&#12398;&#12463;&#12456;&#12522;&#23455;&#34892;&#26178;&#12395;&#22806;&#37096;&#32080;&#21512;&#12434;&#20351;&#12387;&#12390;&#12289; &#12469;&#12502;&#12463;&#12521;&#12473;&#12398; <code class="literal">ChequePayment</code> &#12487;&#12540;&#12479;&#12434;&#21462;&#24471;&#12375;&#12394;&#12356;&#12424;&#12358;&#12395;&#25351;&#23450;&#12377;&#12427;&#12383;&#12417;&#12398;&#12418;&#12398;&#12391;&#12377;&#12290; 
               </p>
            </div>
            <div class="sect2" lang="ja-JP">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="inheritance-mixing-tableperclass-tablepersubclass"></a>9.1.4. table-per-subclass &#12392; table-per-class-hierarchy &#12398;&#28151;&#21512;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#12371;&#12398;&#12450;&#12503;&#12525;&#12540;&#12481;&#12434;&#20351;&#29992;&#12377;&#12427;&#12392;&#12289;table-per-hierarchy &#12392; table-per-subclass &#25126;&#30053;&#12434; &#32068;&#12415;&#21512;&#12431;&#12379;&#12427;&#20107;&#12418;&#21487;&#33021;&#12391;&#12377;&#12290; </p><pre class="programlisting">&lt;class name="Payment" table="PAYMENT"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="PAYMENT_TYPE" type="string"/&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;subclass name="CreditCardPayment" discriminator-value="CREDIT"&gt;
        &lt;join table="CREDIT_PAYMENT"&gt;
            &lt;property name="creditCardType" column="CCTYPE"/&gt;
            ...
        &lt;/join&gt;
    &lt;/subclass&gt;
    &lt;subclass name="CashPayment" discriminator-value="CASH"&gt;
        ...
    &lt;/subclass&gt;
    &lt;subclass name="ChequePayment" discriminator-value="CHEQUE"&gt;
        ...
    &lt;/subclass&gt;
&lt;/class&gt;</pre><p>&#12356;&#12378;&#12428;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#25126;&#30053;&#12391;&#12354;&#12387;&#12390;&#12418;&#12289;&#12523;&#12540;&#12488;&#12391;&#12354;&#12427; <code class="literal">Payment</code> &#12463;&#12521;&#12473;&#12408;&#12398; &#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12483;&#12463;&#12394;&#38306;&#36899;&#12399; <code class="literal">&lt;many-to-one&gt;</code> &#12434;&#20351;&#12387;&#12390;&#12510;&#12483;&#12500;&#12531;&#12464;&#12375;&#12414;&#12377;&#12290; 
               </p><pre class="programlisting">&lt;many-to-one name="payment" column="PAYMENT_ID" class="Payment"/&gt;</pre></div>
            <div class="sect2" lang="ja-JP">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="inheritance-tableperconcrete"></a>9.1.5. &#20855;&#35937;&#12463;&#12521;&#12473;&#12372;&#12392;&#12398;&#12486;&#12540;&#12502;&#12523;&#65288;table-per-concrete-class&#65289;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>table-per-concrete-class &#25126;&#30053;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#12395;&#23550;&#12377;&#12427;&#12450;&#12503;&#12525;&#12540;&#12481;&#12399;&#12289;2&#12388;&#12354;&#12426;&#12414;&#12377;&#12290; 1&#12388;&#30446;&#12399; <code class="literal">&lt;union-subclass&gt;</code> &#12434;&#21033;&#29992;&#12377;&#12427;&#26041;&#27861;&#12391;&#12377;&#12290; 
               </p><pre class="programlisting">&lt;class name="Payment"&gt;
    &lt;id name="id" type="long" column="PAYMENT_ID"&gt;
        &lt;generator class="sequence"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="AMOUNT"/&gt;
    ...
    &lt;union-subclass name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
        &lt;property name="creditCardType" column="CCTYPE"/&gt;
        ...
    &lt;/union-subclass&gt;
    &lt;union-subclass name="CashPayment" table="CASH_PAYMENT"&gt;
        ...
    &lt;/union-subclass&gt;
    &lt;union-subclass name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
        ...
    &lt;/union-subclass&gt;
&lt;/class&gt;</pre><p>&#12469;&#12502;&#12463;&#12521;&#12473;&#12372;&#12392;&#12395;3&#12388;&#12398;&#12486;&#12540;&#12502;&#12523;&#12364;&#24517;&#35201;&#12391;&#12377;&#12290;&#12381;&#12428;&#12382;&#12428;&#12398;&#12486;&#12540;&#12502;&#12523;&#12399;&#12289;&#32153;&#25215;&#12503;&#12525;&#12497;&#12486;&#12451;&#12434;&#21547;&#12435;&#12384;&#12289; &#12463;&#12521;&#12473;&#12398;&#20840;&#12390;&#12398;&#12503;&#12525;&#12497;&#12486;&#12451;&#12395;&#23550;&#12377;&#12427;&#12459;&#12521;&#12512;&#12434;&#23450;&#32681;&#12375;&#12414;&#12377;&#12290; </p>
               <p>&#12371;&#12398;&#12450;&#12503;&#12525;&#12540;&#12481;&#12395;&#12399;&#21046;&#38480;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290; &#12381;&#12428;&#12399;&#12289;&#12503;&#12525;&#12497;&#12486;&#12451;&#12364;&#12473;&#12540;&#12497;&#12540;&#12463;&#12521;&#12473;&#12395;&#12510;&#12483;&#12500;&#12531;&#12464;&#12373;&#12428;&#12390;&#12356;&#12383;&#22580;&#21512;&#12289; &#20840;&#12390;&#12398;&#12469;&#12502;&#12463;&#12521;&#12473;&#12395;&#12362;&#12356;&#12390;&#12459;&#12521;&#12512;&#21517;&#12364;&#21516;&#12376;&#12391;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12394;&#12356;&#12392;&#12356;&#12358;&#12418;&#12398;&#12391;&#12377;&#12290; &#65288;Hibernate&#12398;&#20170;&#24460;&#12398;&#12522;&#12522;&#12540;&#12473;&#12391;&#32233;&#21644;&#12373;&#12428;&#12427;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#65289;&#12290; &lt;union-subclass&gt;
                  &#12434;&#20351;&#12387;&#12383; table-per-concrete-class &#25126;&#30053;&#12391;&#12399;&#35672;&#21029;&#23376;&#29983;&#25104;&#25126;&#30053;&#12434;&#20351;&#29992;&#12391;&#12365;&#12414;&#12379;&#12435;&#12290; &#20027;&#12461;&#12540;&#12434;&#29983;&#25104;&#12377;&#12427;&#12383;&#12417;&#12398;&#12471;&#12540;&#12489;&#12399;&#12289;&#20840;&#12390;&#12398; union subclass &#12398;&#38542;&#23652;&#20869;&#12391;&#20849;&#26377;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#12363;&#12425;&#12391;&#12377;&#12290; 
               </p>
               <p>&#12418;&#12375;&#12473;&#12540;&#12497;&#12540;&#12463;&#12521;&#12473;&#12364;&#25277;&#35937;&#12463;&#12521;&#12473;&#12394;&#12425;&#12289;<code class="literal">abstract="true"</code>&#12392;&#12510;&#12483;&#12500;&#12531;&#12464;&#12375;&#12414;&#12377;&#12290; &#12418;&#12385;&#12429;&#12435;&#12289;&#12473;&#12540;&#12497;&#12540;&#12463;&#12521;&#12473;&#12364;&#25277;&#35937;&#12463;&#12521;&#12473;&#12391;&#12394;&#12356;&#12394;&#12425;&#12289;&#12473;&#12540;&#12497;&#12540;&#12463;&#12521;&#12473;&#12398;&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#12434; &#20445;&#25345;&#12377;&#12427;&#12383;&#12417;&#12398;&#12486;&#12540;&#12502;&#12523;&#12398;&#36861;&#21152;&#12364;&#24517;&#35201;&#12392;&#12394;&#12426;&#12414;&#12377;(&#19978;&#12398;&#20363;&#12391;&#12398;&#12487;&#12501;&#12457;&#12523;&#12488;&#12399; <code class="literal">PAYMENT</code> )&#12290; 
               </p>
            </div>
            <div class="sect2" lang="ja-JP">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="inheritance-tableperconcreate-polymorphism"></a>9.1.6. &#26263;&#40665;&#30340;&#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12474;&#12512;&#12434;&#29992;&#12356;&#12383; table-per-concrete-class
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#12418;&#12358;&#19968;&#12388;&#12398;&#12450;&#12503;&#12525;&#12540;&#12481;&#12399;&#26263;&#40665;&#30340;&#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12474;&#12512;&#12398;&#20351;&#29992;&#12391;&#12377;&#12290; </p><pre class="programlisting">&lt;class name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CREDIT_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="CREDIT_AMOUNT"/&gt;
    ...
&lt;/class&gt;

&lt;class name="CashPayment" table="CASH_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CASH_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="CASH_AMOUNT"/&gt;
    ...
&lt;/class&gt;

&lt;class name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CHEQUE_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="amount" column="CHEQUE_AMOUNT"/&gt;
    ...
&lt;/class&gt;</pre><p><code class="literal">Payment</code> &#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12452;&#12473;&#12364;&#12393;&#12371;&#12395;&#12418;&#26126;&#31034;&#30340;&#12395;&#31034;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; &#12381;&#12375;&#12390;&#12289;<code class="literal">Payment</code> &#12503;&#12525;&#12497;&#12486;&#12451;&#12364;&#12381;&#12428;&#12382;&#12428;&#12398;&#12469;&#12502;&#12463;&#12521;&#12473;&#12395;&#12510;&#12483;&#12500;&#12531;&#12464;&#12373;&#12428;&#12390;&#12356;&#12427;&#12371;&#12392;&#12395;&#12418;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; &#12418;&#12375;&#37325;&#35079;&#12434;&#36991;&#12369;&#12383;&#12356;&#12398;&#12391;&#12354;&#12428;&#12400;&#12289;XML&#12456;&#12531;&#12486;&#12451;&#12486;&#12451;&#12398;&#21033;&#29992;&#12434;&#32771;&#12360;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; &#65288;&#20363;&#65306; <code class="literal">DOCTYPE</code> &#23459;&#35328;&#12395;&#12362;&#12369;&#12427; <code class="literal">[ &lt;!ENTITY allproperties SYSTEM "allproperties.xml"&gt; ]</code> &#12392;&#12289;&#12510;&#12483;&#12500;&#12531;&#12464;&#12395;&#12362;&#12369;&#12427; <code class="literal">&amp;allproperties;</code>&#65289; 
               </p>
               <p>&#12371;&#12398;&#12450;&#12503;&#12525;&#12540;&#12481;&#12398;&#27424;&#28857;&#12399;&#12289;Hibernate&#12364;&#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12483;&#12463;&#12394;&#12463;&#12456;&#12522;&#12398;&#23455;&#34892;&#26178;&#12395;SQL <code class="literal">UNION</code> &#12434;&#29983;&#25104;&#12375;&#12394;&#12356;&#28857;&#12391;&#12377;&#12290; 
               </p>
               <p>&#12371;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#25126;&#30053;&#12395;&#23550;&#12375;&#12390;&#12399;&#12289;<code class="literal">Payment</code> &#12408;&#12398;&#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12483;&#12463;&#12394;&#38306;&#36899;&#12399; &#36890;&#24120;&#12289;<code class="literal">&lt;any&gt;</code> &#12434;&#20351;&#12387;&#12390;&#12510;&#12483;&#12500;&#12531;&#12464;&#12373;&#12428;&#12414;&#12377;&#12290; 
               </p><pre class="programlisting">&lt;any name="payment" meta-type="string" id-type="long"&gt;
    &lt;meta-value value="CREDIT" class="CreditCardPayment"/&gt;
    &lt;meta-value value="CASH" class="CashPayment"/&gt;
    &lt;meta-value value="CHEQUE" class="ChequePayment"/&gt;
    &lt;column name="PAYMENT_CLASS"/&gt;
    &lt;column name="PAYMENT_ID"/&gt;
&lt;/any&gt;</pre></div>
            <div class="sect2" lang="ja-JP">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="inheritace-mixingpolymorphism"></a>9.1.7. &#20182;&#12398;&#32153;&#25215;&#12510;&#12483;&#12500;&#12531;&#12464;&#12392;&#26263;&#40665;&#30340;&#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12474;&#12512;&#12398;&#32068;&#12415;&#21512;&#12431;&#12379;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#12371;&#12398;&#12510;&#12483;&#12500;&#12531;&#12464;&#12395;&#12388;&#12356;&#12390;&#12398;&#26356;&#12394;&#12427;&#27880;&#24847;&#28857;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290; &#12469;&#12502;&#12463;&#12521;&#12473;&#12364;&#33258;&#36523;&#12434; <code class="literal">&lt;class&gt;</code> &#35201;&#32032;&#12392;&#12375;&#12390;&#12510;&#12483;&#12500;&#12531;&#12464;&#12375;&#12390;&#12356;&#12427;&#12398;&#12391;&#12289; &#65288;&#12363;&#12388; <code class="literal">Payment</code> &#12399;&#21336;&#12394;&#12427;&#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12452;&#12473;&#12394;&#12398;&#12391;&#65289;&#12289; &#12381;&#12428;&#12382;&#12428;&#12398;&#12469;&#12502;&#12463;&#12521;&#12473;&#12399;&#31777;&#21336;&#12395;&#12381;&#12398;&#20182;&#12398;&#32153;&#25215;&#38542;&#23652;&#12398;&#19968;&#37096;&#12392;&#12394;&#12426;&#12414;&#12377;&#12290; &#65288;&#12375;&#12363;&#12418;&#12289;&#20170;&#12414;&#12391;&#12393;&#12362;&#12426; <code class="literal">Payment</code> &#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12452;&#12473;&#12395;&#23550;&#12377;&#12427;&#12509;&#12522;&#12514;&#12540;&#12501;&#12451;&#12483;&#12463;&#12394;&#12463;&#12456;&#12522; &#12434;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65289; 
               </p><pre class="programlisting">&lt;class name="CreditCardPayment" table="CREDIT_PAYMENT"&gt;
    &lt;id name="id" type="long" column="CREDIT_PAYMENT_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;discriminator column="CREDIT_CARD" type="string"/&gt;
    &lt;property name="amount" column="CREDIT_AMOUNT"/&gt;
    ...
    &lt;subclass name="MasterCardPayment" discriminator-value="MDC"/&gt;
    &lt;subclass name="VisaPayment" discriminator-value="VISA"/&gt;
&lt;/class&gt;

&lt;class name="NonelectronicTransaction" table="NONELECTRONIC_TXN"&gt;
    &lt;id name="id" type="long" column="TXN_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    ...
    &lt;joined-subclass name="CashPayment" table="CASH_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        &lt;property name="amount" column="CASH_AMOUNT"/&gt;
        ...
    &lt;/joined-subclass&gt;
    &lt;joined-subclass name="ChequePayment" table="CHEQUE_PAYMENT"&gt;
        &lt;key column="PAYMENT_ID"/&gt;
        &lt;property name="amount" column="CHEQUE_AMOUNT"/&gt;
        ...
    &lt;/joined-subclass&gt;
&lt;/class&gt;</pre><p>&#12418;&#12358;&#19968;&#24230;&#36848;&#12409;&#12414;&#12377;&#12364;&#12289;<code class="literal">Payment</code> &#12399;&#26126;&#31034;&#30340;&#12395;&#23450;&#32681;&#12373;&#12428;&#12414;&#12379;&#12435;&#12290; &#12418;&#12375;&#12289;<code class="literal">Payment</code> &#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12452;&#12473;&#12395;&#23550;&#12375;&#12390;&#12463;&#12456;&#12522;&#12434;&#23455;&#34892;&#12377;&#12427;&#12394;&#12425; &#65288;&#20363;&#12360;&#12400; <code class="literal">from Payment</code> &#31680;&#12434;&#20351;&#12387;&#12390;&#65289;&#12289; Hibernate&#12399;&#33258;&#21205;&#30340;&#12395; <code class="literal">CreditCardPayment</code> &#65288;&#12392;CreditCardPayment&#12398;&#12469;&#12502;&#12463;&#12521;&#12473;&#12289;<code class="literal">Payment</code> &#12398;&#23455;&#35013;&#12391;&#12354;&#12427;&#12383;&#12417;&#65289;&#12289; &#12362;&#12424;&#12403;&#12289;<code class="literal">CashPayment</code> &#12289;<code class="literal">ChequePayment</code> &#12398;&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#12434;&#36820;&#12375;&#12414;&#12377;&#12290; <code class="literal">NonelectronicTransaction</code> &#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#12399;&#36820;&#12375;&#12414;&#12379;&#12435;&#12290; 
               </p>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="components-dynamic.html">&#21069;&#12398;&#12506;&#12540;&#12472;</a>&nbsp;
               </td>
               <td width="20%" align="center">&nbsp;</td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="inheritance-limitations.html">&#27425;&#12398;&#12506;&#12540;&#12472;</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">8.5. &#21205;&#30340;&#12467;&#12531;&#12509;&#12540;&#12493;&#12531;&#12488;&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">&#12507;&#12540;&#12512;</a></td>
               <td width="40%" align="right" valign="top">&nbsp;9.2. &#21046;&#38480;</td>
            </tr>
         </table>
      </div>
   </body>
</html>