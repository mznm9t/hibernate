<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>4.4. &#21205;&#30340;&#12514;&#12487;&#12523;</title>
      <link rel="stylesheet" href="css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="HIBERNATE - Relational Persistence for Idiomatic Java">
      <link rel="up" href="persistent-classes.html" title="&#31532;4&#31456; &#27704;&#32154;&#12463;&#12521;&#12473;">
      <link rel="prev" href="persistent-classes-equalshashcode.html" title="4.3. equals() &#12392; hashCode() &#12398;&#23455;&#35013;">
      <link rel="next" href="persistent-classes-tuplizers.html" title="4.5. Tuplizer">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">4.4. &#21205;&#30340;&#12514;&#12487;&#12523;</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="persistent-classes-equalshashcode.html">&#21069;&#12398;&#12506;&#12540;&#12472;</a>&nbsp;
               </td>
               <th width="60%" align="center">&#31532;4&#31456; &#27704;&#32154;&#12463;&#12521;&#12473;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="persistent-classes-tuplizers.html">&#27425;&#12398;&#12506;&#12540;&#12472;</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="ja-JP">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="persistent-classes-dynamicmodels"></a>4.4. &#21205;&#30340;&#12514;&#12487;&#12523;
                  </h2>
               </div>
            </div>
         </div>
         <p>
                        <span class="emphasis"><em>&#20197;&#19979;&#12398;&#27231;&#33021;&#12399;&#29694;&#22312;&#23455;&#39443;&#27573;&#38542;&#12395;&#12354;&#12427;&#12392;&#35211;&#12394;&#12373;&#12428;&#12390;&#12362;&#12426;&#12289; &#36817;&#12356;&#23558;&#26469;&#22793;&#26356;&#12373;&#12428;&#12427;&#21487;&#33021;&#24615;&#12364;&#12354;&#12427;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290;</em></span>
                    
         </p>
         <p>&#27704;&#32154;&#12456;&#12531;&#12486;&#12451;&#12486;&#12451;&#12399;&#12289;&#24517;&#12378;&#12375;&#12418;&#23455;&#34892;&#26178;&#12395;POJO&#12463;&#12521;&#12473;&#12420;JavaBean&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12391;&#34920;&#29694;&#12377;&#12427;&#24517;&#35201;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290; Hibernate&#12399;&#65288;&#23455;&#34892;&#26178;&#12395; <code class="literal">Map</code> &#12398; <code class="literal">Map</code> &#12434;&#20351;&#12358;&#65289;&#21205;&#30340;&#12514;&#12487;&#12523;&#12392;&#12289; DOM4J&#12484;&#12522;&#12540;&#12392;&#12375;&#12390;&#12398;&#12456;&#12531;&#12486;&#12451;&#12486;&#12451;&#12398;&#34920;&#29694;&#12418;&#12469;&#12509;&#12540;&#12488;&#12375;&#12414;&#12377;&#12290; &#12371;&#12398;&#12450;&#12503;&#12525;&#12540;&#12481;&#12434;&#20351;&#12358;&#12392;&#27704;&#32154;&#12463;&#12521;&#12473;&#12434;&#26360;&#12363;&#12378;&#12289;&#12510;&#12483;&#12500;&#12531;&#12464;&#12501;&#12449;&#12452;&#12523;&#12384;&#12369;&#12434;&#26360;&#12367;&#12371;&#12392;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290; 
         </p>
         <p>&#12487;&#12501;&#12457;&#12523;&#12488;&#12391;&#12399;&#12289;Hibernate&#12399;&#36890;&#24120;&#12398;POJO&#12514;&#12540;&#12489;&#12391;&#21205;&#20316;&#12375;&#12414;&#12377;&#12290; <code class="literal">default_entity_mode</code> &#35373;&#23450;&#12458;&#12503;&#12471;&#12519;&#12531;&#12434;&#20351;&#12387;&#12390;&#12289; &#29305;&#23450;&#12398; <code class="literal">SessionFactory</code> &#12395;&#23550;&#12377;&#12427;&#12487;&#12501;&#12457;&#12523;&#12488;&#12398;&#12456;&#12531;&#12486;&#12451;&#12486;&#12451;&#34920;&#29694;&#12514;&#12540;&#12489;&#12434;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377; &#65288;<a href="configuration-optional.html#configuration-optional-properties" title="&#34920; 3.3. Hibernate&#35373;&#23450;&#12503;&#12525;&#12497;&#12486;&#12451;">&#34920;&nbsp;3.3. &#12300;Hibernate&#35373;&#23450;&#12503;&#12525;&#12497;&#12486;&#12451;&#12301;</a> &#12434;&#35211;&#12390;&#12367;&#12384;&#12373;&#12356;&#65289;&#12290; 
         </p>
         <p>&#20197;&#19979;&#12398;&#20363;&#12391;&#12399; <code class="literal">Map</code> &#12434;&#20351;&#12387;&#12383;&#34920;&#29694;&#12434;&#32057;&#20171;&#12375;&#12414;&#12377;&#12290; &#12414;&#12378;&#12510;&#12483;&#12500;&#12531;&#12464;&#12501;&#12449;&#12452;&#12523;&#12391;&#12289;&#12463;&#12521;&#12473;&#21517;&#12398;&#20195;&#12431;&#12426;&#12395;&#65288;&#12414;&#12383;&#12399;&#12381;&#12428;&#12395;&#21152;&#12360;&#12390;&#65289; <code class="literal">entity-name</code> &#12434;&#23450;&#32681;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#65306; 
         </p><pre class="programlisting">&lt;hibernate-mapping&gt;

    &lt;class entity-name="Customer"&gt;

        &lt;id name="id"
            type="long"
            column="ID"&gt;
            &lt;generator class="sequence"/&gt;
        &lt;/id&gt;

        &lt;property name="name"
            column="NAME"
            type="string"/&gt;

        &lt;property name="address"
            column="ADDRESS"
            type="string"/&gt;

        &lt;many-to-one name="organization"
            column="ORGANIZATION_ID"
            class="Organization"/&gt;

        &lt;bag name="orders"
            inverse="true"
            lazy="false"
            cascade="all"&gt;
            &lt;key column="CUSTOMER_ID"/&gt;
            &lt;one-to-many class="Order"/&gt;
        &lt;/bag&gt;

    &lt;/class&gt;
    
&lt;/hibernate-mapping&gt;</pre><p>&#38306;&#36899;&#12364;&#12479;&#12540;&#12466;&#12483;&#12488;&#12398;&#12463;&#12521;&#12473;&#21517;&#12434;&#20351;&#12387;&#12390;&#23450;&#32681;&#12375;&#12390;&#12356;&#12383;&#12392;&#12375;&#12390;&#12418;&#12289; &#38306;&#36899;&#12398;&#12479;&#12540;&#12466;&#12483;&#12488;&#22411;&#12418;POJO&#12391;&#12399;&#12394;&#12367;&#21205;&#30340;&#12394;&#12456;&#12531;&#12486;&#12451;&#12486;&#12451;&#12391;&#12418;&#27083;&#12431;&#12394;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; </p>
         <p><code class="literal">SessionFactory</code> &#12395;&#23550;&#12375;&#12390;&#12487;&#12501;&#12457;&#12523;&#12488;&#12398;&#12456;&#12531;&#12486;&#12451;&#12486;&#12451;&#12514;&#12540;&#12489;&#12434; <code class="literal">dynamic-map</code> &#12395;&#35373;&#23450;&#12375;&#12383;&#24460;&#12289; &#23455;&#34892;&#26178;&#12395; <code class="literal">Map</code> &#12398; <code class="literal">Map</code> &#12434;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65306; 
         </p><pre class="programlisting">Session s = openSession();
Transaction tx = s.beginTransaction();
Session s = openSession();

// Create a customer
Map david = new HashMap();
david.put("name", "David");

// Create an organization
Map foobar = new HashMap();
foobar.put("name", "Foobar Inc.");

// Link both
david.put("organization", foobar);

// Save both
s.save("Customer", david);
s.save("Organization", foobar);

tx.commit();
s.close();</pre><p>&#21205;&#30340;&#12394;&#12510;&#12483;&#12500;&#12531;&#12464;&#12398;&#21033;&#28857;&#12399;&#12289;&#12456;&#12531;&#12486;&#12451;&#12486;&#12451;&#12463;&#12521;&#12473;&#12398;&#23455;&#35013;&#12434;&#24517;&#35201;&#12392;&#12375;&#12394;&#12356;&#12383;&#12417;&#12289; &#12503;&#12525;&#12488;&#12479;&#12452;&#12500;&#12531;&#12464;&#12395;&#35201;&#12377;&#12427;&#12479;&#12540;&#12531;&#12450;&#12521;&#12454;&#12531;&#12489;&#12479;&#12452;&#12512;&#12364;&#26089;&#12356;&#12392;&#12356;&#12358;&#12371;&#12392;&#12391;&#12377;&#12290; &#12375;&#12363;&#12375;&#12467;&#12531;&#12497;&#12452;&#12523;&#26178;&#12398;&#22411;&#12481;&#12455;&#12483;&#12463;&#12364;&#12394;&#12356;&#12398;&#12391;&#12289;&#23455;&#34892;&#26178;&#12395;&#38750;&#24120;&#12395;&#22810;&#12367;&#12398;&#20363;&#22806;&#20966;&#29702;&#12434;&#25201;&#12431;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12394;&#12356;&#12391;&#12375;&#12423;&#12358;&#12290;
            Hibernate&#12510;&#12483;&#12500;&#12531;&#12464;&#12398;&#12362;&#12363;&#12370;&#12391;&#12289;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12473;&#12461;&#12540;&#12510;&#12399;&#23481;&#26131;&#12395;&#27491;&#35215;&#21270;&#12391;&#12365;&#12289;&#20581;&#20840;&#12395;&#12394;&#12426;&#12289; &#24460;&#12391;&#36969;&#20999;&#12394;&#12489;&#12513;&#12452;&#12531;&#12514;&#12487;&#12523;&#12398;&#23455;&#35013;&#12434;&#36861;&#21152;&#12377;&#12427;&#12371;&#12392;&#12364;&#21487;&#33021;&#12395;&#12394;&#12426;&#12414;&#12377;&#12290; 
         </p>
         <p>&#12456;&#12531;&#12486;&#12451;&#12486;&#12451;&#34920;&#29694;&#12514;&#12540;&#12489;&#12399; <code class="literal">Session</code> &#12372;&#12392;&#12395;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12418;&#21487;&#33021;&#12391;&#12377;&#12290; 
         </p><pre class="programlisting">Session dynamicSession = pojoSession.getSession(EntityMode.MAP);

// Create a customer
Map david = new HashMap();
david.put("name", "David");
dynamicSession.save("Customer", david);
...
dynamicSession.flush();
dynamicSession.close()
...
// Continue on pojoSession
</pre><p><code class="literal">EntityMode</code> &#12434;&#20351;&#12387;&#12383; <code class="literal">getSession()</code> &#12398;&#21628;&#12403;&#20986;&#12375;&#12399; <code class="literal">SessionFactory</code> &#12391;&#12399;&#12394;&#12367; <code class="literal">Session</code> API&#12395;&#12354;&#12427;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#12290; &#12381;&#12398;&#26041;&#27861;&#12391;&#12399;&#12289;&#26032;&#12375;&#12356; <code class="literal">Session</code> &#12399;&#12289;&#12505;&#12540;&#12473;&#12392;&#12394;&#12427;JDBC&#12467;&#12493;&#12463;&#12471;&#12519;&#12531;&#12289; &#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12289;&#12381;&#12398;&#20182;&#12398;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#24773;&#22577;&#12434;&#20849;&#26377;&#12375;&#12414;&#12377;&#12290; &#12371;&#12428;&#12399;2&#30058;&#30446;&#12398; <code class="literal">Session</code> &#12391;&#12399; <code class="literal">flush()</code> &#12392; <code class="literal">close()</code> &#12434;&#21628;&#12406;&#24517;&#35201;&#12364;&#12394;&#12356;&#12392;&#12356;&#12358;&#12371;&#12392;&#12289;&#12381;&#12398;&#12383;&#12417;&#12488;&#12521;&#12531;&#12470;&#12463;&#12471;&#12519;&#12531;&#12392;&#12467;&#12493;&#12463;&#12471;&#12519;&#12531;&#12398;&#31649;&#29702;&#12434; 1&#30058;&#30446;&#12398;&#20316;&#26989;&#21336;&#20301;(Unit of Work)&#12395;&#20219;&#12379;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12427;&#12392;&#12356;&#12358;&#12371;&#12392;&#12391;&#12377;&#12290; 
         </p>
         <p>XML&#34920;&#29694;&#12398;&#33021;&#21147;&#12395;&#12388;&#12356;&#12390;&#12398;&#12373;&#12425;&#12394;&#12427;&#24773;&#22577;&#12399; <a href="xml.html" title="&#31532;18&#31456; XML&#12510;&#12483;&#12500;&#12531;&#12464;">&#31456;&nbsp;18. <i xmlns:xlink="http://www.w3.org/1999/xlink">XML&#12510;&#12483;&#12500;&#12531;&#12464;</i></a> &#12391;&#35211;&#12388;&#12363;&#12426;&#12414;&#12377;&#12290; 
         </p>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="persistent-classes-equalshashcode.html">&#21069;&#12398;&#12506;&#12540;&#12472;</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="persistent-classes.html">&#19978;&#12395;&#25147;&#12427;</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="persistent-classes-tuplizers.html">&#27425;&#12398;&#12506;&#12540;&#12472;</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">4.3. <code class="literal">equals()</code> &#12392; <code class="literal">hashCode()</code> &#12398;&#23455;&#35013;&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">&#12507;&#12540;&#12512;</a></td>
               <td width="40%" align="right" valign="top">&nbsp;4.5. Tuplizer</td>
            </tr>
         </table>
      </div>
   </body>
</html>