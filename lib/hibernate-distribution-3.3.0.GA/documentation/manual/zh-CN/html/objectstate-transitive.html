<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>10.11.&nbsp;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)</title>
      <link rel="stylesheet" href="css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;">
      <link rel="up" href="objectstate.html" title="&#31532;&nbsp;10&nbsp;&#31456;&nbsp;&#19982;&#23545;&#35937;&#20849;&#20107;">
      <link rel="prev" href="objectstate-flushing.html" title="10.10.&nbsp;Session&#21047;&#20986;(flush)">
      <link rel="next" href="objectstate-metadata.html" title="10.12.&nbsp;&#20351;&#29992;&#20803;&#25968;&#25454;">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">10.11.&nbsp;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="objectstate-flushing.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <th width="60%" align="center">&#31532;&nbsp;10&nbsp;&#31456;&nbsp;&#19982;&#23545;&#35937;&#20849;&#20107;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="objectstate-metadata.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="zh-CN">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="objectstate-transitive"></a>10.11.&nbsp;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(transitive persistence)
                  </h2>
               </div>
            </div>
         </div>
         <p>&#23545;&#27599;&#19968;&#20010;&#23545;&#35937;&#37117;&#35201;&#25191;&#34892;&#20445;&#23384;&#65292;&#21024;&#38500;&#25110;&#37325;&#20851;&#32852;&#25805;&#20316;&#35753;&#20154;&#24863;&#35273;&#26377;&#28857;&#40635;&#28902;&#65292;&#23588;&#20854;&#26159;&#22312;&#22788;&#29702;&#35768;&#22810;&#24444;&#27492;&#20851;&#32852;&#30340;&#23545;&#35937;&#30340;&#26102;&#20505;&#12290; &#19968;&#20010;&#24120;&#35265;&#30340;&#20363;&#23376;&#26159;&#29238;&#23376;&#20851;&#31995;&#12290;&#32771;&#34385;&#19979;&#38754;&#30340;&#20363;&#23376;: </p>
         <p>&#22914;&#26524;&#19968;&#20010;&#29238;&#23376;&#20851;&#31995;&#20013;&#30340;&#23376;&#23545;&#35937;&#26159;&#20540;&#31867;&#22411;(value typed)&#65288;&#20363;&#22914;&#65292;&#22320;&#22336;&#25110;&#23383;&#31526;&#20018;&#30340;&#38598;&#21512;&#65289;&#30340;&#65292;&#20182;&#20204;&#30340;&#29983;&#21629;&#21608;&#26399;&#20250;&#20381;&#36182;&#20110;&#29238;&#23545;&#35937;&#65292;&#21487;&#20197;&#20139;&#21463;&#26041;&#20415;&#30340;&#32423;&#32852;&#25805;&#20316;(Cascading)&#65292;&#19981;&#38656;&#35201;&#39069;&#22806;&#30340;&#21160;&#20316;&#12290; &#29238;&#23545;&#35937;&#34987;&#20445;&#23384;&#26102;&#65292;&#36825;&#20123;&#20540;&#31867;&#22411;(value typed)&#23376;&#23545;&#35937;&#20063;&#23558;&#34987;&#20445;&#23384;&#65307;&#29238;&#23545;&#35937;&#34987;&#21024;&#38500;&#26102;&#65292;&#23376;&#23545;&#35937;&#20063;&#23558;&#34987;&#21024;&#38500;&#12290;
            &#36825;&#23545;&#23558;&#19968;&#20010;&#23376;&#23545;&#35937;&#20174;&#38598;&#21512;&#20013;&#31227;&#38500;&#26159;&#21516;&#26679;&#26377;&#25928;&#65306;Hibernate&#20250;&#26816;&#27979;&#21040;&#65292;&#24182;&#19988;&#22240;&#20026;&#20540;&#31867;&#22411;(value typed)&#30340;&#23545;&#35937;&#19981;&#21487;&#33021;&#34987;&#20854;&#20182;&#23545;&#35937;&#24341;&#29992;&#65292;&#25152;&#20197;Hibernate&#20250;&#22312;&#25968;&#25454;&#24211;&#20013;&#21024;&#38500;&#36825;&#20010;&#23376;&#23545;&#35937;&#12290; 
         </p>
         <p>&#29616;&#22312;&#32771;&#34385;&#21516;&#26679;&#30340;&#22330;&#26223;&#65292;&#19981;&#36807;&#29238;&#23376;&#23545;&#35937;&#37117;&#26159;&#23454;&#20307;(entities)&#31867;&#22411;&#65292;&#32780;&#38750;&#20540;&#31867;&#22411;(value typed)&#65288;&#20363;&#22914;&#65292;&#31867;&#21035;&#19982;&#20010;&#20307;&#65292;&#25110;&#27597;&#29483;&#21644;&#23567;&#29483;&#65289;&#12290; &#23454;&#20307;&#26377;&#33258;&#24049;&#30340;&#29983;&#21629;&#26399;&#65292;&#20801;&#35768;&#20849;&#20139;&#23545;&#20854;&#30340;&#24341;&#29992;&#65288;&#22240;&#27492;&#20174;&#38598;&#21512;&#20013;&#31227;&#38500;&#19968;&#20010;&#23454;&#20307;&#65292;&#19981;&#24847;&#21619;&#30528;&#23427;&#21487;&#20197;&#34987;&#21024;&#38500;&#65289;&#65292; &#24182;&#19988;&#23454;&#20307;&#21040;&#20854;&#20182;&#20851;&#32852;&#23454;&#20307;&#20043;&#38388;&#40664;&#35748;&#27809;&#26377;&#32423;&#32852;&#25805;&#20316;&#30340;&#35774;&#32622;&#12290;
            Hibernate&#40664;&#35748;&#19981;&#23454;&#29616;&#25152;&#35859;&#30340;<span class="emphasis"><em>&#21487;&#21040;&#36798;&#21363;&#25345;&#20037;&#21270;&#65288;persistence by reachability&#65289;</em></span>&#30340;&#31574;&#30053;&#12290; 
         </p>
         <p>&#27599;&#20010;Hibernate session&#30340;&#22522;&#26412;&#25805;&#20316; - &#21253;&#25324; <code class="literal">persist(), merge(), saveOrUpdate(), delete(), lock(), refresh(), evict(), replicate()</code> - &#37117;&#26377;&#23545;&#24212;&#30340;&#32423;&#32852;&#39118;&#26684;(cascade style)&#12290; &#36825;&#20123;&#32423;&#32852;&#39118;&#26684;(cascade style)&#39118;&#26684;&#20998;&#21035;&#21629;&#21517;&#20026; <code class="literal">create, merge, save-update, delete, lock, refresh, evict, replicate</code>&#12290; &#22914;&#26524;&#20320;&#24076;&#26395;&#19968;&#20010;&#25805;&#20316;&#34987;&#39034;&#30528;&#20851;&#32852;&#20851;&#31995;&#32423;&#32852;&#20256;&#25773;&#65292;&#20320;&#24517;&#39035;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#25351;&#20986;&#36825;&#19968;&#28857;&#12290;&#20363;&#22914;&#65306; 
         </p><pre class="programlisting">&lt;one-to-one name="person" cascade="persist"/&gt;</pre><p>&#32423;&#32852;&#39118;&#26684;(cascade style)&#26159;&#21487;&#32452;&#21512;&#30340;: </p><pre class="programlisting">&lt;one-to-one name="person" cascade="persist,delete,lock"/&gt;</pre><p>&#20320;&#21487;&#20197;&#20351;&#29992;<code class="literal">cascade="all"</code>&#26469;&#25351;&#23450;<span class="emphasis"><em>&#20840;&#37096;</em></span>&#25805;&#20316;&#37117;&#39034;&#30528;&#20851;&#32852;&#20851;&#31995;&#32423;&#32852;(cascaded)&#12290; &#40664;&#35748;&#20540;&#26159;<code class="literal">cascade="none"</code>&#65292;&#21363;&#20219;&#20309;&#25805;&#20316;&#37117;&#19981;&#20250;&#34987;&#32423;&#32852;(cascaded)&#12290; 
         </p>
         <p>&#27880;&#24847;&#26377;&#19968;&#20010;&#29305;&#27530;&#30340;&#32423;&#32852;&#39118;&#26684;(cascade style) <code class="literal">delete-orphan</code>&#65292;&#21482;&#24212;&#29992;&#20110;one-to-many&#20851;&#32852;&#65292;&#34920;&#26126;<code class="literal">delete()</code>&#25805;&#20316; &#24212;&#35813;&#34987;&#24212;&#29992;&#20110;&#25152;&#26377;&#20174;&#20851;&#32852;&#20013;&#21024;&#38500;&#30340;&#23545;&#35937;&#12290; 
         </p>
         <p>&#24314;&#35758;: </p>
         <div class="itemizedlist">
            <ul type="disc" compact>
               <li>
                  <p>&#36890;&#24120;&#22312;<code class="literal">&lt;many-to-one&gt;</code>&#25110;<code class="literal">&lt;many-to-many&gt;</code>&#20851;&#31995;&#20013;&#24212;&#29992;&#32423;&#32852;(cascade)&#27809;&#20160;&#20040;&#24847;&#20041;&#12290; &#32423;&#32852;(cascade)&#36890;&#24120;&#22312; <code class="literal">&lt;one-to-one&gt;</code>&#21644;<code class="literal">&lt;one-to-many&gt;</code>&#20851;&#31995;&#20013;&#27604;&#36739;&#26377;&#29992;&#12290; 
                  </p>
               </li>
               <li>
                  <p>&#22914;&#26524;&#23376;&#23545;&#35937;&#30340;&#23551;&#21629;&#38480;&#23450;&#22312;&#29238;&#20146;&#23545;&#35937;&#30340;&#23551;&#21629;&#20043;&#20869;&#65292;&#21487;&#36890;&#36807;&#25351;&#23450;<code class="literal">cascade="all,delete-orphan"</code>&#23558;&#20854;&#21464;&#20026;<span class="emphasis"><em>&#33258;&#21160;&#29983;&#21629;&#21608;&#26399;&#31649;&#29702;&#30340;&#23545;&#35937;(life cycle object)</em></span>&#12290; 
                  </p>
               </li>
               <li>
                  <p>&#20854;&#20182;&#24773;&#20917;&#65292;&#20320;&#21487;&#26681;&#26412;&#19981;&#38656;&#35201;&#32423;&#32852;(cascade)&#12290;&#20294;&#26159;&#22914;&#26524;&#20320;&#35748;&#20026;&#20320;&#20250;&#32463;&#24120;&#22312;&#26576;&#20010;&#20107;&#21153;&#20013;&#21516;&#26102;&#29992;&#21040;&#29238;&#23545;&#35937;&#19982;&#23376;&#23545;&#35937;&#65292;&#24182;&#19988;&#20320;&#24076;&#26395;&#23569;&#25171;&#28857;&#20799;&#23383;&#65292;&#21487;&#20197;&#32771;&#34385;&#20351;&#29992;<code class="literal">cascade="persist,merge,save-update"</code>&#12290; 
                  </p>
               </li>
            </ul>
         </div>
         <p>&#21487;&#20197;&#20351;&#29992;<code class="literal">cascade="all"</code>&#23558;&#19968;&#20010;&#20851;&#32852;&#20851;&#31995;&#65288;&#26080;&#35770;&#26159;&#23545;&#20540;&#23545;&#35937;&#30340;&#20851;&#32852;&#65292;&#25110;&#32773;&#23545;&#19968;&#20010;&#38598;&#21512;&#30340;&#20851;&#32852;&#65289;&#26631;&#35760;&#20026;<span class="emphasis"><em>&#29238;/&#23376;</em></span>&#20851;&#31995;&#30340;&#20851;&#32852;&#12290; &#36825;&#26679;&#23545;&#29238;&#23545;&#35937;&#36827;&#34892;save/update/delete&#25805;&#20316;&#23601;&#20250;&#23548;&#33268;&#23376;&#23545;&#35937;&#20063;&#36827;&#34892;save/update/delete&#25805;&#20316;&#12290; 
         </p>
         <p>&#27492;&#22806;&#65292;&#19968;&#20010;&#25345;&#20037;&#30340;&#29238;&#23545;&#35937;&#23545;&#23376;&#23545;&#35937;&#30340;&#27973;&#24341;&#29992;(mere reference)&#20250;&#23548;&#33268;&#23376;&#23545;&#35937;&#34987;&#21516;&#27493;save/update&#12290; &#19981;&#36807;&#65292;&#36825;&#20010;&#38544;&#21947;(metaphor)&#30340;&#35828;&#27861;&#24182;&#19981;&#23436;&#25972;&#12290;&#38500;&#38750;&#20851;&#32852;&#26159;<code class="literal">&lt;one-to-many&gt;</code>&#20851;&#32852;&#24182;&#19988;&#34987;&#26631;&#35760;&#20026;<code class="literal">cascade="delete-orphan"</code>&#65292; &#21542;&#21017;&#29238;&#23545;&#35937;&#22833;&#21435;&#23545;&#26576;&#20010;&#23376;&#23545;&#35937;&#30340;&#24341;&#29992;<span class="emphasis"><em>&#19981;&#20250;</em></span>&#23548;&#33268;&#35813;&#23376;&#23545;&#35937;&#34987;&#33258;&#21160;&#21024;&#38500;&#12290; &#29238;&#23376;&#20851;&#31995;&#30340;&#32423;&#32852;(cascading)&#25805;&#20316;&#20934;&#30830;&#35821;&#20041;&#22914;&#19979;&#65306; 
         </p>
         <div class="itemizedlist">
            <ul type="disc" compact>
               <li>
                  <p>&#22914;&#26524;&#29238;&#23545;&#35937;&#34987;<code class="literal">persist()</code>&#65292;&#37027;&#20040;&#25152;&#26377;&#23376;&#23545;&#35937;&#20063;&#20250;&#34987;<code class="literal">persist()</code> 
                  </p>
               </li>
               <li>
                  <p>&#22914;&#26524;&#29238;&#23545;&#35937;&#34987;<code class="literal">merge()</code>&#65292;&#37027;&#20040;&#25152;&#26377;&#23376;&#23545;&#35937;&#20063;&#20250;&#34987;<code class="literal">merge()</code> 
                  </p>
               </li>
               <li>
                  <p>&#22914;&#26524;&#29238;&#23545;&#35937;&#34987;<code class="literal">save()</code>&#65292;<code class="literal">update()</code>&#25110; <code class="literal">saveOrUpdate()</code>&#65292;&#37027;&#20040;&#25152;&#26377;&#23376;&#23545;&#35937;&#21017;&#20250;&#34987;<code class="literal">saveOrUpdate()</code> 
                  </p>
               </li>
               <li>
                  <p>&#22914;&#26524;&#26576;&#20010;&#25345;&#20037;&#30340;&#29238;&#23545;&#35937;&#24341;&#29992;&#20102;&#30636;&#26102;(transient)&#25110;&#32773;&#33073;&#31649;(detached)&#30340;&#23376;&#23545;&#35937;&#65292;&#37027;&#20040;&#23376;&#23545;&#35937;&#23558;&#20250;&#34987;<code class="literal">saveOrUpdate()</code> 
                  </p>
               </li>
               <li>
                  <p>&#22914;&#26524;&#29238;&#23545;&#35937;&#34987;&#21024;&#38500;&#65292;&#37027;&#20040;&#25152;&#26377;&#23376;&#23545;&#35937;&#20063;&#20250;&#34987;<code class="literal">delete()</code> 
                  </p>
               </li>
               <li>
                  <p>&#38500;&#38750;&#34987;&#26631;&#35760;&#20026;<code class="literal">cascade="delete-orphan"</code>&#65288;&#21024;&#38500;&#8220;&#23396;&#20799;&#8221;&#27169;&#24335;&#65292;&#27492;&#26102;&#19981;&#34987;&#20219;&#20309;&#19968;&#20010;&#29238;&#23545;&#35937;&#24341;&#29992;&#30340;&#23376;&#23545;&#35937;&#20250;&#34987;&#21024;&#38500;&#65289;&#65292; &#21542;&#21017;&#23376;&#23545;&#35937;&#22833;&#25481;&#29238;&#23545;&#35937;&#23545;&#20854;&#30340;&#24341;&#29992;&#26102;&#65292;<span class="emphasis"><em>&#20160;&#20040;&#20107;&#20063;&#19981;&#20250;&#21457;&#29983;</em></span>&#12290; &#22914;&#26524;&#26377;&#29305;&#27530;&#38656;&#35201;&#65292;&#24212;&#29992;&#31243;&#24207;&#21487;&#36890;&#36807;&#26174;&#24335;&#35843;&#29992;delete()&#21024;&#38500;&#23376;&#23545;&#35937;&#12290; 
                  </p>
               </li>
            </ul>
         </div>
         <p>&#26368;&#21518;&#65292;&#27880;&#24847;&#25805;&#20316;&#30340;&#32423;&#32852;&#21487;&#33021;&#26159;&#22312;<span class="emphasis"><em>&#35843;&#29992;&#26399;(call time)</em></span>&#25110;&#32773;<span class="emphasis"><em>&#20889;&#20837;&#26399;(flush time)</em></span>&#20316;&#29992;&#21040;&#23545;&#35937;&#22270;&#19978;&#30340;&#12290;&#25152;&#26377;&#30340;&#25805;&#20316;&#65292;&#22914;&#26524;&#20801;&#35768;&#65292;&#37117;&#22312;&#25805;&#20316;&#34987;&#25191;&#34892;&#30340;&#26102;&#20505;&#32423;&#32852;&#21040;&#21487;&#35302;&#21450;&#30340;&#20851;&#32852;&#23454;&#20307;&#19978;&#12290;&#28982;&#32780;&#65292;<code class="literal">save-upate</code>&#21644;<code class="literal">delete-orphan</code>&#26159;&#22312;<code class="literal">Session</code> flush&#30340;&#26102;&#20505;&#25165;&#20316;&#29992;&#21040;&#25152;&#26377;&#21487;&#35302;&#21450;&#30340;&#34987;&#20851;&#32852;&#23545;&#35937;&#19978;&#30340;&#12290; 
         </p>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="objectstate-flushing.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="objectstate.html">&#19978;&#19968;&#32423;</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="objectstate-metadata.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">10.10.&nbsp;Session&#21047;&#20986;(flush)&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td>
               <td width="40%" align="right" valign="top">&nbsp;10.12.&nbsp;&#20351;&#29992;&#20803;&#25968;&#25454;</td>
            </tr>
         </table>
      </div>
   </body>
</html>