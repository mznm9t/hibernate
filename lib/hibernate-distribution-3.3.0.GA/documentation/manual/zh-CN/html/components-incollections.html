<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>8.2.&nbsp;&#22312;&#38598;&#21512;&#20013;&#20986;&#29616;&#30340;&#20381;&#36182;&#23545;&#35937; (Collections of dependent objects)</title>
      <link rel="stylesheet" href="css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;">
      <link rel="up" href="components.html" title="&#31532;&nbsp;8&nbsp;&#31456;&nbsp;&#32452;&#20214;&#65288;Component&#65289;&#26144;&#23556;">
      <link rel="prev" href="components.html" title="&#31532;&nbsp;8&nbsp;&#31456;&nbsp;&#32452;&#20214;&#65288;Component&#65289;&#26144;&#23556;">
      <link rel="next" href="components-asmapindex.html" title="8.3.&nbsp;&#32452;&#20214;&#20316;&#20026;Map&#30340;&#32034;&#24341;&#65288;Components as Map indices &#65289;">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">8.2.&nbsp;&#22312;&#38598;&#21512;&#20013;&#20986;&#29616;&#30340;&#20381;&#36182;&#23545;&#35937; (Collections of dependent objects)</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="components.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <th width="60%" align="center">&#31532;&nbsp;8&nbsp;&#31456;&nbsp;&#32452;&#20214;&#65288;Component&#65289;&#26144;&#23556;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="components-asmapindex.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="zh-CN">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="components-incollections"></a>8.2.&nbsp;&#22312;&#38598;&#21512;&#20013;&#20986;&#29616;&#30340;&#20381;&#36182;&#23545;&#35937; (Collections of dependent objects)
                  </h2>
               </div>
            </div>
         </div>
         <p>Hibernate&#25903;&#25345;&#32452;&#20214;&#30340;&#38598;&#21512;(&#20363;&#22914;: &#19968;&#20010;&#20803;&#32032;&#26159;&#22995;&#21517;(Name)&#36825;&#31181;&#31867;&#22411;&#30340;&#25968;&#32452;)&#12290; &#20320;&#21487;&#20197;&#20351;&#29992;<code class="literal">&lt;composite-element&gt;</code>&#26631;&#31614;&#26367;&#20195;<code class="literal">&lt;element&gt;</code>&#26631;&#31614;&#26469;&#23450;&#20041;&#20320;&#30340;&#32452;&#20214;&#38598;&#21512;&#12290; 
         </p><pre class="programlisting">&lt;set name="someNames" table="some_names" lazy="true"&gt;
    &lt;key column="id"/&gt;
    &lt;composite-element class="eg.Name"&gt; &lt;!-- class attribute required --&gt;
        &lt;property name="initial"/&gt;
        &lt;property name="first"/&gt;
        &lt;property name="last"/&gt;
    &lt;/composite-element&gt;
&lt;/set&gt;</pre><p>&#27880;&#24847;&#65292;&#22914;&#26524;&#20320;&#23450;&#20041;&#30340;Set&#21253;&#21547;&#32452;&#21512;&#20803;&#32032;(composite-element)&#65292;&#27491;&#30830;&#22320;&#23454;&#29616;<code class="literal">equals()</code>&#21644;<code class="literal">hashCode()</code>&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#12290; 
         </p>
         <p>&#32452;&#21512;&#20803;&#32032;&#21487;&#20197;&#21253;&#21547;&#32452;&#20214;&#65292;&#20294;&#26159;&#19981;&#33021;&#21253;&#21547;&#38598;&#21512;&#12290;&#22914;&#26524;&#20320;&#30340;&#32452;&#21512;&#20803;&#32032;&#33258;&#36523;&#21253;&#21547;&#32452;&#20214;, &#20320;&#24517;&#39035;&#20351;&#29992;<code class="literal">&lt;nested-composite-element&gt;</code>&#26631;&#31614;&#12290;&#36825;&#26159;&#19968;&#20010;&#30456;&#24403;&#29305;&#27530;&#30340;&#26696;&#20363; - &#22312;&#19968;&#20010;&#32452;&#20214;&#30340;&#38598;&#21512;&#37324;&#65292;&#37027;&#20123;&#32452;&#20214;&#26412;&#36523;&#21448;&#21487;&#20197;&#21253;&#21547;&#20854;&#20182;&#30340;&#32452;&#20214;&#12290;&#36825;&#20010;&#26102;&#20505;&#20320;&#23601;&#24212;&#35813;&#32771;&#34385;&#19968;&#19979;&#20351;&#29992;one-to-many&#20851;&#32852;&#26159;&#21542;&#20250;&#26356;&#24688;&#24403;&#12290; &#23581;&#35797;&#23545;&#36825;&#20010;&#32452;&#21512;&#20803;&#32032;&#37325;&#26032;&#24314;&#27169;&#20026;&#19968;&#20010;&#23454;&#20307;&#65293;&#20294;&#26159;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#34429;&#28982;Java&#27169;&#22411;&#21644;&#37325;&#26032;&#24314;&#27169;&#21069;&#26159;&#19968;&#26679;&#30340;&#65292;&#20851;&#31995;&#27169;&#22411;&#21644;&#25345;&#20037;&#24615;&#35821;&#20041;&#20250;&#26377;&#32454;&#24494;&#30340;&#21464;&#21270;&#12290;
            
         </p>
         <p>&#35831;&#27880;&#24847;&#22914;&#26524;&#20320;&#20351;&#29992;<code class="literal">&lt;set&gt;</code>&#26631;&#31614;,&#19968;&#20010;&#32452;&#21512;&#20803;&#32032;&#30340;&#26144;&#23556;&#19981;&#25903;&#25345;&#21487;&#33021;&#20026;&#31354;&#30340;&#23646;&#24615;. &#24403;&#21024;&#38500;&#23545;&#35937;&#26102;&#65292; Hibernate&#24517;&#39035;&#20351;&#29992;&#27599;&#19968;&#20010;&#23383;&#27573;&#30340;&#20540;&#26469;&#30830;&#23450;&#19968;&#26465;&#35760;&#24405;(&#22312;&#32452;&#21512;&#20803;&#32032;&#34920;&#20013;&#65292;&#27809;&#26377;&#21333;&#29420;&#30340;&#20851;&#38190;&#23383;&#27573;)&#65292; &#22914;&#26524;&#26377;&#20026;null&#30340;&#23383;&#27573;&#65292;&#36825;&#26679;&#20570;&#23601;&#19981;&#21487;&#33021;&#20102;&#12290;&#20320;&#24517;&#39035;&#20316;&#20986;&#19968;&#20010;&#36873;&#25321;&#65292;&#35201;&#20040;&#22312;&#32452;&#21512;&#20803;&#32032;&#20013;&#20351;&#29992;&#19981;&#33021;&#20026;&#31354;&#30340;&#23646;&#24615;&#65292;&#35201;&#20040;&#36873;&#25321;&#20351;&#29992;<code class="literal">&lt;list&gt;</code>,<code class="literal">&lt;map&gt;</code>,<code class="literal">&lt;bag&gt;</code> &#25110;&#32773; <code class="literal">&lt;idbag&gt;</code>&#32780;&#19981;&#26159; <code class="literal">&lt;set&gt;</code>&#12290; 
         </p>
         <p>&#32452;&#21512;&#20803;&#32032;&#26377;&#20010;&#29305;&#21035;&#30340;&#29992;&#27861;&#26159;&#23427;&#21487;&#20197;&#21253;&#21547;&#19968;&#20010;<code class="literal">&lt;many-to-one&gt;</code>&#20803;&#32032;&#12290;&#31867;&#20284;&#36825;&#26679;&#30340;&#26144;&#23556;&#20801;&#35768;&#20320;&#23558;&#19968;&#20010;many-to-many&#20851;&#32852;&#34920;&#26144;&#23556;&#20026;&#32452;&#21512;&#20803;&#32032;&#30340;&#38598;&#21512;&#12290;(A mapping like this allows you to map extra columns of a many-to-many association
            table to the composite element class.) &#25509;&#19979;&#26469;&#30340;&#30340;&#20363;&#23376;&#26159;&#20174;<code class="literal">Order</code>&#21040;<code class="literal">Item</code>&#30340;&#19968;&#20010;&#22810;&#23545;&#22810;&#30340;&#20851;&#32852;&#20851;&#31995;, &#20851;&#32852;&#23646;&#24615;&#26159; <code class="literal">purchaseDate</code>, <code class="literal">price</code> &#21644; <code class="literal">quantity</code> &#12290; 
         </p><pre class="programlisting">&lt;class name="eg.Order" .... &gt;
    ....
    &lt;set name="purchasedItems" table="purchase_items" lazy="true"&gt;
        &lt;key column="order_id"&gt;
        &lt;composite-element class="eg.Purchase"&gt;
            &lt;property name="purchaseDate"/&gt;
            &lt;property name="price"/&gt;
            &lt;property name="quantity"/&gt;
            &lt;many-to-one name="item" class="eg.Item"/&gt; &lt;!-- class attribute is optional --&gt;
        &lt;/composite-element&gt;
    &lt;/set&gt;
&lt;/class&gt;</pre><p>&#24403;&#28982;&#65292;&#24403;&#20320;&#23450;&#20041;Item&#26102;&#65292;&#20320;&#26080;&#27861;&#24341;&#29992;&#36825;&#20123;purchase&#65292;&#22240;&#27492;&#20320;&#26080;&#27861;&#23454;&#29616;&#21452;&#21521;&#20851;&#32852;&#26597;&#35810;&#12290;&#35760;&#20303;&#32452;&#20214;&#26159;&#20540;&#31867;&#22411;&#65292;&#24182;&#19988;&#19981;&#20801;&#35768;&#20849;&#20139;&#24341;&#29992;&#12290;&#26576;&#19968;&#20010;&#29305;&#23450;&#30340;<code class="literal">Purchase</code> &#21487;&#20197;&#25918;&#22312;<code class="literal">Order</code>&#30340;&#38598;&#21512;&#20013;&#65292;&#20294;&#23427;&#19981;&#33021;&#21516;&#26102;&#34987;<code class="literal">Item</code>&#25152;&#24341;&#29992;&#12290; 
         </p>
         <p>&#20854;&#23454;&#32452;&#21512;&#20803;&#32032;&#30340;&#36825;&#20010;&#29992;&#27861;&#21487;&#20197;&#25193;&#23637;&#21040;&#19977;&#37325;&#25110;&#22810;&#37325;&#20851;&#32852;:</p><pre class="programlisting">&lt;class name="eg.Order" .... &gt;
    ....
    &lt;set name="purchasedItems" table="purchase_items" lazy="true"&gt;
        &lt;key column="order_id"&gt;
        &lt;composite-element class="eg.OrderLine"&gt;
            &lt;many-to-one name="purchaseDetails class="eg.Purchase"/&gt;
            &lt;many-to-one name="item" class="eg.Item"/&gt;
        &lt;/composite-element&gt;
    &lt;/set&gt;
&lt;/class&gt;</pre><p>&#22312;&#26597;&#35810;&#20013;&#65292;&#34920;&#36798;&#32452;&#21512;&#20803;&#32032;&#30340;&#35821;&#27861;&#21644;&#20851;&#32852;&#21040;&#20854;&#20182;&#23454;&#20307;&#30340;&#35821;&#27861;&#26159;&#19968;&#26679;&#30340;&#12290; </p>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="components.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="components.html">&#19978;&#19968;&#32423;</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="components-asmapindex.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">&#31532;&nbsp;8&nbsp;&#31456;&nbsp;&#32452;&#20214;&#65288;Component&#65289;&#26144;&#23556;&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td>
               <td width="40%" align="right" valign="top">&nbsp;8.3.&nbsp;&#32452;&#20214;&#20316;&#20026;Map&#30340;&#32034;&#24341;&#65288;Components as Map indices &#65289;</td>
            </tr>
         </table>
      </div>
   </body>
</html>