<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>4.3.&nbsp;&#23454;&#29616;equals()&#21644;hashCode()</title>
      <link rel="stylesheet" href="css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;">
      <link rel="up" href="persistent-classes.html" title="&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#25345;&#20037;&#21270;&#31867;(Persistent Classes)">
      <link rel="prev" href="persistent-classes-inheritance.html" title="4.2.&nbsp;&#23454;&#29616;&#32487;&#25215;&#65288;Inheritance&#65289;">
      <link rel="next" href="persistent-classes-dynamicmodels.html" title="4.4.&nbsp;&#21160;&#24577;&#27169;&#22411;(Dynamic models)">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">4.3.&nbsp;&#23454;&#29616;<code class="literal">equals()</code>&#21644;<code class="literal">hashCode()</code></th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="persistent-classes-inheritance.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <th width="60%" align="center">&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#25345;&#20037;&#21270;&#31867;(Persistent Classes)</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="persistent-classes-dynamicmodels.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="zh-CN">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="persistent-classes-equalshashcode"></a>4.3.&nbsp;&#23454;&#29616;<code class="literal">equals()</code>&#21644;<code class="literal">hashCode()</code></h2>
               </div>
            </div>
         </div>
         <p>&#22914;&#26524;&#20320;&#26377;&#22914;&#19979;&#38656;&#27714;&#65292;&#20320;&#24517;&#39035;&#37325;&#36733; <code class="literal">equals()</code> &#21644; <code class="literal">hashCode()</code>&#26041;&#27861;&#65306; 
         </p>
         <div class="itemizedlist">
            <ul type="disc" compact>
               <li>
                  <p>&#24819;&#25226;&#25345;&#20037;&#31867;&#30340;&#23454;&#20363;&#25918;&#20837;<code class="literal">Set</code>&#20013;&#65288;&#24403;&#34920;&#31034;&#22810;&#20540;&#20851;&#32852;&#26102;&#65292;&#25512;&#33616;&#36825;&#20040;&#20570;&#65289; 
                  </p>
               </li>
               <li>
                  <p>&#24819;&#37325;&#29992;&#33073;&#31649;&#23454;&#20363; </p>
               </li>
            </ul>
         </div>
         <p>Hibernate&#20445;&#35777;&#65292;&#20165;&#22312;&#29305;&#23450;&#20250;&#35805;&#33539;&#22260;&#20869;&#65292;&#25345;&#20037;&#21270;&#26631;&#35782;&#65288;&#25968;&#25454;&#24211;&#30340;&#34892;&#65289;&#21644;Java&#26631;&#35782;&#26159;&#31561;&#20215;&#30340;&#12290;&#22240;&#27492;&#65292;&#19968;&#26086; &#25105;&#20204;&#28151;&#21512;&#20102;&#20174;&#19981;&#21516;&#20250;&#35805;&#20013;&#33719;&#21462;&#30340;&#23454;&#20363;&#65292;&#22914;&#26524;&#24076;&#26395;<code class="literal">Set</code>&#26377;&#26126;&#30830;&#30340;&#35821;&#20041;&#65292;&#23601;&#24517; &#39035;&#23454;&#29616;<code class="literal">equals()</code> &#21644;<code class="literal">hashCode()</code>&#12290; 
         </p>
         <p>&#23454;&#29616;<code class="literal">equals()</code>/<code class="literal">hashCode()</code>&#26368;&#26174;&#32780;&#26131;&#35265;&#30340;&#26041;&#27861;&#26159;&#27604;&#36739;&#20004;&#20010;&#23545;&#35937; &#26631;&#35782;&#31526;&#30340;&#20540;&#12290;&#22914;&#26524;&#20540;&#30456;&#21516;&#65292;&#21017;&#20004;&#20010;&#23545;&#35937;&#23545;&#24212;&#20110;&#25968;&#25454;&#24211;&#30340;&#21516;&#19968;&#34892;&#65292;&#22240;&#27492;&#23427;&#20204;&#26159;&#30456;&#31561;&#30340;&#65288;&#22914;&#26524;&#37117;&#34987;&#28155;&#21152;&#21040; <code class="literal">Set</code>&#65292;&#21017;&#22312;<code class="literal">Set</code>&#20013;&#21482;&#26377;&#19968;&#20010;&#20803;&#32032;&#65289;&#12290;&#19981;&#24184;&#30340;&#26159;&#65292;&#23545;&#29983;&#25104;&#30340;&#26631;&#35782;&#19981;&#33021; &#20351;&#29992;&#36825;&#31181;&#26041;&#27861;&#12290;Hibernate&#20165;&#23545;&#37027;&#20123;&#25345;&#20037;&#21270;&#23545;&#35937;&#36171;&#26631;&#35782;&#20540;&#65292;&#19968;&#20010;&#26032;&#21019;&#24314;&#30340;&#23454;&#20363;&#23558;&#19981;&#20250;&#26377;&#20219;&#20309;&#26631;&#35782;&#20540;&#12290;&#27492;&#22806;&#65292; &#22914;&#26524;&#19968;&#20010;&#23454;&#20363;&#27809;&#26377;&#34987;&#20445;&#23384;(unsaved)&#65292;&#24182;&#19988;&#23427;&#24403;&#21069;&#27491;&#22312;&#19968;&#20010;<code class="literal">Set</code>&#20013;&#65292;&#20445;&#23384;&#23427;&#23558;&#20250;&#32473;&#36825;&#20010;&#23545;&#35937; &#36171;&#19968;&#20010;&#26631;&#35782;&#20540;&#12290;&#22914;&#26524;<code class="literal">equals()</code> &#21644; <code class="literal">hashCode()</code>&#26159;&#22522;&#20110;&#26631;&#35782;&#20540; &#23454;&#29616;&#30340;&#65292;&#21017;&#20854;&#21704;&#24076;&#30721;&#23558;&#20250;&#25913;&#21464;&#65292;&#36825;&#36829;&#21453;&#20102;<code class="literal">Set</code>&#30340;&#22865;&#32422;&#12290;&#24314;&#35758;&#21435;Hibernate&#30340;&#31449;&#28857;&#38405;&#35835;&#20851;&#20110;&#36825;&#20010; &#38382;&#39064;&#30340;&#20840;&#37096;&#35752;&#35770;&#12290;&#27880;&#24847;&#65292;&#36825;&#19981;&#26159;Hibernate&#30340;&#38382;&#39064;&#65292;&#32780;&#26159;&#19968;&#33324;&#30340;Java&#23545;&#35937;&#26631;&#35782;&#21644;Java&#23545;&#35937;&#31561;&#20215;&#30340;&#35821;&#20041;&#38382;&#39064;&#12290; 
         </p>
         <p>&#25105;&#20204;&#24314;&#35758;&#20351;&#29992;<span class="emphasis"><em>&#19994;&#21153;&#38190;&#20540;&#30456;&#31561;(Business key equality)</em></span>&#26469;&#23454;&#29616;<code class="literal">equals()</code> &#21644; <code class="literal">hashCode()</code>&#12290;&#19994;&#21153;&#38190;&#20540;&#30456;&#31561;&#30340;&#24847;&#24605;&#26159;&#65292;<code class="literal">equals()</code>&#26041;&#27861; &#20165;&#20165;&#27604;&#36739;&#24418;&#25104;&#19994;&#21153;&#38190;&#30340;&#23646;&#24615;&#65292;&#23427;&#33021;&#22312;&#29616;&#23454;&#19990;&#30028;&#37324;&#26631;&#35782;&#25105;&#20204;&#30340;&#23454;&#20363;&#65288;&#26159;&#19968;&#20010;<span class="emphasis"><em>&#33258;&#28982;&#30340;</em></span>&#20505;&#36873;&#30721;&#65289;&#12290; 
         </p><pre class="programlisting">public class Cat {

    ...
    public boolean equals(Object other) {
        if (this == other) return true;
        if ( !(other instanceof Cat) ) return false;

        final Cat cat = (Cat) other;

        if ( !cat.getLitterId().equals( getLitterId() ) ) return false;
        if ( !cat.getMother().equals( getMother() ) ) return false;

        return true;
    }

    public int hashCode() {
        int result;
        result = getMother().hashCode();
        result = 29 * result + getLitterId();
        return result;
    }

}</pre><p>&#27880;&#24847;&#65292;&#19994;&#21153;&#38190;&#19981;&#24517;&#20687;&#25968;&#25454;&#24211;&#30340;&#20027;&#38190;&#37027;&#26679;&#22266;&#23450;&#19981;&#21464;&#65288;&#21442;&#35265;<a href="transactions.html#transactions-basics-identity" title="11.1.3.&nbsp;&#20851;&#27880;&#23545;&#35937;&#26631;&#35782;(Considering object identity)">&#31532;&nbsp;11.1.3&nbsp;&#33410; &#8220;&#20851;&#27880;&#23545;&#35937;&#26631;&#35782;(Considering object identity)&#8221;</a>&#65289;&#12290; &#23545;&#19994;&#21153;&#38190;&#32780;&#35328;&#65292;&#19981;&#21487;&#21464;&#25110;&#21807;&#19968;&#30340;&#23646;&#24615;&#26159;&#19981;&#38169;&#30340;&#36873;&#25321;&#12290; 
         </p>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="persistent-classes-inheritance.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="persistent-classes.html">&#19978;&#19968;&#32423;</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="persistent-classes-dynamicmodels.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">4.2.&nbsp;&#23454;&#29616;&#32487;&#25215;&#65288;Inheritance&#65289;&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td>
               <td width="40%" align="right" valign="top">&nbsp;4.4.&nbsp;&#21160;&#24577;&#27169;&#22411;(Dynamic models)</td>
            </tr>
         </table>
      </div>
   </body>
</html>