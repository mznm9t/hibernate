<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>18.2.&nbsp;XML&#26144;&#23556;&#20803;&#25968;&#25454;</title>
      <link rel="stylesheet" href="css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;">
      <link rel="up" href="xml.html" title="&#31532;&nbsp;18&nbsp;&#31456;&nbsp;XML&#26144;&#23556;">
      <link rel="prev" href="xml.html" title="&#31532;&nbsp;18&nbsp;&#31456;&nbsp;XML&#26144;&#23556;">
      <link rel="next" href="xml-manipulation.html" title="18.3.&nbsp;&#25805;&#20316;XML&#25968;&#25454;">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">18.2.&nbsp;XML&#26144;&#23556;&#20803;&#25968;&#25454;</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="xml.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <th width="60%" align="center">&#31532;&nbsp;18&nbsp;&#31456;&nbsp;XML&#26144;&#23556;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="xml-manipulation.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="zh-CN">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="xml-mapping"></a>18.2.&nbsp;XML&#26144;&#23556;&#20803;&#25968;&#25454;
                  </h2>
               </div>
            </div>
         </div>
         <p>&#35768;&#22810;Hibernate&#26144;&#23556;&#20803;&#32032;&#20855;&#26377;<code class="literal">node</code>&#23646;&#24615;&#12290;&#36825;&#20351;&#20320;&#21487;&#20197;&#25351;&#23450;&#29992;&#26469;&#20445;&#23384; &#23646;&#24615;&#25110;&#23454;&#20307;&#25968;&#25454;&#30340;XML&#23646;&#24615;&#25110;&#20803;&#32032;&#12290;<code class="literal">node</code>&#23646;&#24615;&#24517;&#39035;&#26159;&#19979;&#21015;&#26684;&#24335;&#20043;&#19968;&#65306; 
         </p>
         <div class="itemizedlist">
            <ul type="disc" compact>
               <li>
                  <p><code class="literal">"element-name"</code> - &#26144;&#23556;&#20026;&#25351;&#23450;&#30340;XML&#20803;&#32032;
                  </p>
               </li>
               <li>
                  <p><code class="literal">"@attribute-name"</code> - &#26144;&#23556;&#20026;&#25351;&#23450;&#30340;XML&#23646;&#24615;
                  </p>
               </li>
               <li>
                  <p><code class="literal">"."</code> - &#26144;&#23556;&#20026;&#29238;&#20803;&#32032;
                  </p>
               </li>
               <li>
                  <p><code class="literal">"element-name/@attribute-name"</code> - &#26144;&#23556;&#20026;&#25351;&#23450;&#20803;&#32032;&#30340;&#25351;&#23450;&#23646;&#24615; 
                  </p>
               </li>
            </ul>
         </div>
         <p>&#23545;&#20110;&#38598;&#21512;&#21644;&#21333;&#20540;&#30340;&#20851;&#32852;&#65292;&#26377;&#19968;&#20010;&#39069;&#22806;&#30340;<code class="literal">embed-xml</code>&#23646;&#24615;&#21487;&#29992;&#12290; &#36825;&#20010;&#23646;&#24615;&#30340;&#32570;&#30465;&#20540;&#26159;&#30495;(<code class="literal">embed-xml="true"</code>)&#12290;&#22914;&#26524;<code class="literal">embed-xml="true"</code>&#65292; &#21017;&#23545;&#24212;&#20110;&#34987;&#20851;&#32852;&#23454;&#20307;&#25110;&#20540;&#31867;&#22411;&#30340;&#38598;&#21512;&#30340;XML&#26641;&#23558;&#30452;&#25509;&#23884;&#20837;&#25317;&#26377;&#36825;&#20123;&#20851;&#32852;&#30340;&#23454;&#20307;&#30340;XML&#26641;&#20013;&#12290; &#21542;&#21017;&#65292;&#22914;&#26524;<code class="literal">embed-xml="false"</code>&#65292;&#37027;&#20040;&#23545;&#20110;&#21333;&#20540;&#30340;&#20851;&#32852;&#65292;&#20165;&#34987;&#24341;&#29992;&#30340;&#23454;&#20307;&#30340;&#26631;&#35782;&#31526;&#20986;&#29616;&#22312; XML&#26641;&#20013;(&#34987;&#24341;&#29992;&#23454;&#20307;&#26412;&#36523;&#19981;&#20986;&#29616;)&#65292;&#32780;&#38598;&#21512;&#21017;&#26681;&#26412;&#19981;&#20986;&#29616;&#12290; 
         </p>
         <p>&#20320;&#24212;&#35813;&#23567;&#24515;&#65292;&#19981;&#35201;&#35753;&#22826;&#22810;&#20851;&#32852;&#30340;embed-xml&#23646;&#24615;&#20026;&#30495;(<code class="literal">embed-xml="true"</code>)&#65292;&#22240;&#20026;XML&#19981;&#33021;&#24456;&#22909;&#22320;&#22788;&#29702; &#24490;&#29615;&#24341;&#29992;! 
         </p><pre class="programlisting">&lt;class name="Customer" 
        table="CUSTOMER" 
        node="customer"&gt;
        
    &lt;id name="id" 
            column="CUST_ID" 
            node="@id"/&gt;
            
    &lt;map name="accounts" 
            node="." 
            embed-xml="true"&gt;
        &lt;key column="CUSTOMER_ID" 
                not-null="true"/&gt;
        &lt;map-key column="SHORT_DESC" 
                node="@short-desc" 
                type="string"/&gt;
        &lt;one-to-many entity-name="Account"
                embed-xml="false" 
                node="account"/&gt;
    &lt;/map&gt;
    
    &lt;component name="name" 
            node="name"&gt;
        &lt;property name="firstName" 
                node="first-name"/&gt;
        &lt;property name="initial" 
                node="initial"/&gt;
        &lt;property name="lastName" 
                node="last-name"/&gt;
    &lt;/component&gt;
    
    ...
    
&lt;/class&gt;</pre><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20915;&#23450;&#23884;&#20837;&#24080;&#30446;&#21495;&#30721;(account id)&#30340;&#38598;&#21512;&#65292;&#20294;&#19981;&#23884;&#20837;&#23454;&#38469;&#30340;&#24080;&#30446;&#25968;&#25454;&#12290;&#19979;&#38754;&#30340;HQL&#26597;&#35810;&#65306; </p><pre class="programlisting">from Customer c left join fetch c.accounts where c.lastName like :lastName</pre><p>&#36820;&#22238;&#30340;&#25968;&#25454;&#38598;&#23558;&#26159;&#36825;&#26679;&#65306; </p><pre class="programlisting">&lt;customer id="123456789"&gt;
    &lt;account short-desc="Savings"&gt;987632567&lt;/account&gt;
    &lt;account short-desc="Credit Card"&gt;985612323&lt;/account&gt;
    &lt;name&gt;
        &lt;first-name&gt;Gavin&lt;/first-name&gt;
        &lt;initial&gt;A&lt;/initial&gt;
        &lt;last-name&gt;King&lt;/last-name&gt;
    &lt;/name&gt;
    ...
&lt;/customer&gt;</pre><p>&#22914;&#26524;&#20320;&#25226;&#19968;&#23545;&#22810;&#26144;&#23556;<code class="literal">&lt;one-to-many&gt;</code>&#30340;embed-xml&#23646;&#24615;&#32622;&#20026;&#30495;(<code class="literal">embed-xml="true"</code>)&#65292; &#21017;&#25968;&#25454;&#30475;&#19978;&#21435;&#23601;&#20687;&#36825;&#26679;&#65306; 
         </p><pre class="programlisting">&lt;customer id="123456789"&gt;
    &lt;account id="987632567" short-desc="Savings"&gt;
        &lt;customer id="123456789"/&gt;
        &lt;balance&gt;100.29&lt;/balance&gt;
    &lt;/account&gt;
    &lt;account id="985612323" short-desc="Credit Card"&gt;
        &lt;customer id="123456789"/&gt;
        &lt;balance&gt;-2370.34&lt;/balance&gt;
    &lt;/account&gt;
    &lt;name&gt;
        &lt;first-name&gt;Gavin&lt;/first-name&gt;
        &lt;initial&gt;A&lt;/initial&gt;
        &lt;last-name&gt;King&lt;/last-name&gt;
    &lt;/name&gt;
    ...
&lt;/customer&gt;</pre></div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="xml.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="xml.html">&#19978;&#19968;&#32423;</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="xml-manipulation.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">&#31532;&nbsp;18&nbsp;&#31456;&nbsp;XML&#26144;&#23556;&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td>
               <td width="40%" align="right" valign="top">&nbsp;18.3.&nbsp;&#25805;&#20316;XML&#25968;&#25454;</td>
            </tr>
         </table>
      </div>
   </body>
</html>