<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>21.4.&nbsp;&#32423;&#32852;&#19982;&#26410;&#20445;&#23384;&#20540;&#65288;Cascades and unsaved-value&#65289;</title>
      <link rel="stylesheet" href="css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;">
      <link rel="up" href="example-parentchild.html" title="&#31532;&nbsp;21&nbsp;&#31456;&nbsp;&#31034;&#20363;&#65306;&#29238;&#23376;&#20851;&#31995;(Parent Child Relationships)">
      <link rel="prev" href="example-parentchild-cascades.html" title="21.3.&nbsp;&#32423;&#32852;&#29983;&#21629;&#21608;&#26399;&#65288;Cascading life cycle&#65289;">
      <link rel="next" href="example-parentchild-conclusion.html" title="21.5.&nbsp;&#32467;&#35770;">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">21.4.&nbsp;&#32423;&#32852;&#19982;<code class="literal">&#26410;&#20445;&#23384;&#20540;</code>&#65288;Cascades and <code class="literal">unsaved-value</code>&#65289;
               </th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="example-parentchild-cascades.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <th width="60%" align="center">&#31532;&nbsp;21&nbsp;&#31456;&nbsp;&#31034;&#20363;&#65306;&#29238;&#23376;&#20851;&#31995;(Parent Child Relationships)</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="example-parentchild-conclusion.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="zh-CN">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="example-parentchild-update"></a>21.4.&nbsp;&#32423;&#32852;&#19982;<code class="literal">&#26410;&#20445;&#23384;&#20540;</code>&#65288;Cascades and <code class="literal">unsaved-value</code>&#65289;
                  </h2>
               </div>
            </div>
         </div>
         <p>&#20551;&#35774;&#25105;&#20204;&#20174;<code class="literal">Session</code>&#20013;&#35013;&#20837;&#20102;&#19968;&#20010;<code class="literal">Parent</code>&#23545;&#35937;&#65292;&#29992;&#25143;&#30028;&#38754;&#23545;&#20854;&#36827;&#34892;&#20102;&#20462;&#25913;&#65292;&#28982;&#21518;&#24076;&#26395;&#22312;&#19968;&#20010;&#26032;&#30340;Session&#37324;&#38754;&#35843;&#29992;<code class="literal">update()</code>&#26469;&#20445;&#23384;&#36825;&#20123;&#20462;&#25913;&#12290;&#23545;&#35937;<code class="literal">Parent</code>&#21253;&#21547;&#20102;&#23376;&#23545;&#35937;&#30340;&#38598;&#21512;&#65292;&#30001;&#20110;&#25171;&#24320;&#20102;&#32423;&#32852;&#26356;&#26032;&#65292;Hibernate&#38656;&#35201;&#30693;&#36947;&#21738;&#20123;Child&#23545;&#35937;&#26159;&#26032;&#23454;&#20363;&#21270;&#30340;&#65292;&#21738;&#20123;&#20195;&#34920;&#25968;&#25454;&#24211;&#20013;&#24050;&#32463;&#23384;&#22312;&#30340;&#35760;&#24405;&#12290;&#25105;&#20204;&#20551;&#35774;<code class="literal">Parent</code>&#21644;<code class="literal">Child</code>&#23545;&#35937;&#30340;&#26631;&#35782;&#23646;&#24615;&#37117;&#26159;&#33258;&#21160;&#29983;&#25104;&#30340;&#65292;&#31867;&#22411;&#20026;<code class="literal">java.lang.Long</code>&#12290;Hibernate&#20250;&#20351;&#29992;&#26631;&#35782;&#23646;&#24615;&#30340;&#20540;&#65292;&#21644;version &#25110; timestamp &#23646;&#24615;&#65292;&#26469;&#21028;&#26029;&#21738;&#20123;&#23376;&#23545;&#35937;&#26159;&#26032;&#30340;&#12290;(&#21442;&#35265;<a href="objectstate-saveorupdate.html" title="10.7.&nbsp;&#33258;&#21160;&#29366;&#24577;&#26816;&#27979;">&#31532;&nbsp;10.7&nbsp;&#33410; &#8220;&#33258;&#21160;&#29366;&#24577;&#26816;&#27979;&#8221;</a>.) <span class="emphasis"><em>&#22312; Hibernate3 &#20013;,&#26174;&#24335;&#25351;&#23450;<code class="literal">unsaved-value</code>&#19981;&#20877;&#26159;&#24517;&#39035;&#30340;&#20102;&#12290;</em></span> 
         </p>
         <p>&#19979;&#38754;&#30340;&#20195;&#30721;&#20250;&#26356;&#26032;<code class="literal">parent</code>&#21644;<code class="literal">child</code>&#23545;&#35937;&#65292;&#24182;&#19988;&#25554;&#20837;<code class="literal">newChild</code>&#23545;&#35937;&#12290; 
         </p><pre class="programlisting">//parent and child were both loaded in a previous session
parent.addChild(child);
Child newChild = new Child();
parent.addChild(newChild);
session.update(parent);
session.flush();</pre><p>&#36825;&#23545;&#20110;&#33258;&#21160;&#29983;&#25104;&#26631;&#35782;&#30340;&#24773;&#20917;&#26159;&#38750;&#24120;&#22909;&#30340;&#65292;&#20294;&#26159;&#33258;&#20998;&#37197;&#30340;&#26631;&#35782;&#21644;&#22797;&#21512;&#26631;&#35782;&#24590;&#20040;&#21150;&#21602;&#65311;&#36825;&#26159;&#26377;&#28857;&#40635;&#28902;&#65292;&#22240;&#20026;Hibernate&#27809;&#26377;&#21150;&#27861;&#21306;&#20998;&#26032;&#23454;&#20363;&#21270;&#30340;&#23545;&#35937;&#65288;&#26631;&#35782;&#34987;&#29992;&#25143;&#25351;&#23450;&#20102;&#65289;&#21644;&#21069;&#19968;&#20010;Session&#35013;&#20837;&#30340;&#23545;&#35937;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;Hibernate&#20250;&#20351;&#29992;timestamp&#25110;version&#23646;&#24615;&#65292;&#25110;&#32773;&#26597;&#35810;&#31532;&#20108;&#32423;&#32531;&#23384;&#65292;&#25110;&#32773;&#26368;&#22351;&#30340;&#24773;&#20917;&#65292;&#26597;&#35810;&#25968;&#25454;&#24211;&#65292;&#26469;&#30830;&#35748;&#26159;&#21542;&#27492;&#34892;&#23384;&#22312;&#12290;
            
         </p>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="example-parentchild-cascades.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="example-parentchild.html">&#19978;&#19968;&#32423;</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="example-parentchild-conclusion.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">21.3.&nbsp;&#32423;&#32852;&#29983;&#21629;&#21608;&#26399;&#65288;Cascading life cycle&#65289;&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td>
               <td width="40%" align="right" valign="top">&nbsp;21.5.&nbsp;&#32467;&#35770;</td>
            </tr>
         </table>
      </div>
   </body>
</html>