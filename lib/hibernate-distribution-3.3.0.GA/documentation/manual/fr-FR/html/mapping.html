<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Chapitre&nbsp;5.&nbsp;Mapping O/R basique</title>
      <link rel="stylesheet" href="css/html.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="HIBERNATE - Persistance relationnelle en Java standard">
      <link rel="up" href="index.html" title="HIBERNATE - Persistance relationnelle en Java standard">
      <link rel="prev" href="persistent-classes-extensions.html" title="4.6.&nbsp;Extentsions">
      <link rel="next" href="mapping-types.html" title="5.2.&nbsp;Hibernate Types">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">Chapitre&nbsp;5.&nbsp;Mapping O/R basique</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="persistent-classes-extensions.html">Pr&eacute;c&eacute;dent</a>&nbsp;
               </td>
               <th width="60%" align="center">&nbsp;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="mapping-types.html">Suivant</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="chapter" lang="fr-FR">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title"><a name="mapping"></a>Chapitre&nbsp;5.&nbsp;Mapping O/R basique
                  </h2>
               </div>
            </div>
         </div>
         <div class="sect1" lang="fr-FR">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="mapping-declaration"></a>5.1.&nbsp;D&eacute;claration de Mapping
                     </h2>
                  </div>
               </div>
            </div>
            <p>Les mappings Objet/relationnel sont g&eacute;n&eacute;ralement d&eacute;finis dans un document XML. Le document de mapping est con&ccedil;u pour &ecirc;tre
               lisible et &eacute;ditable &agrave; la main. Le langage de mapping est Java-centrique, c'est &agrave; dire que les mappings sont construits &agrave; partir
               des d&eacute;clarations des classes persistantes et non des d&eacute;clarations des tables. 
            </p>
            <p>Remarquez que m&ecirc;me si beaucoup d'utilisateurs de Hibernate pr&eacute;f&egrave;rent &eacute;crire les fichiers de mappings &agrave; la main, plusieurs
               outils existent pour g&eacute;n&eacute;rer ce document, notamment XDoclet, Middlegen et AndroMDA. 
            </p>
            <p>D&eacute;marrons avec un exemple de mapping : </p><a name="mapping-declaration-ex1"></a><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC
      "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;

&lt;hibernate-mapping package="eg"&gt;

        &lt;class name="Cat"
            table="cats"
            discriminator-value="C"&gt;

                &lt;id name="id"&gt;
                        &lt;generator class="native"/&gt;
                &lt;/id&gt;

                &lt;discriminator column="subclass"
                     type="character"/&gt;

                &lt;property name="weight"/&gt;

                &lt;property name="birthdate"
                    type="date"
                    not-null="true"
                    update="false"/&gt;

                &lt;property name="color"
                    type="eg.types.ColorUserType"
                    not-null="true"
                    update="false"/&gt;

                &lt;property name="sex"
                    not-null="true"
                    update="false"/&gt;

                &lt;property name="litterId"
                    column="litterId"
                    update="false"/&gt;

                &lt;many-to-one name="mother"
                    column="mother_id"
                    update="false"/&gt;

                &lt;set name="kittens"
                    inverse="true"
                    order-by="litter_id"&gt;
                        &lt;key column="mother_id"/&gt;
                        &lt;one-to-many class="Cat"/&gt;
                &lt;/set&gt;

                &lt;subclass name="DomesticCat"
                    discriminator-value="D"&gt;

                        &lt;property name="name"
                            type="string"/&gt;

                &lt;/subclass&gt;

        &lt;/class&gt;

        &lt;class name="Dog"&gt;
                &lt;!-- mapping for Dog could go here --&gt;
        &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>Etudions le contenu du document de mapping. Nous d&eacute;crirons uniquement les &eacute;l&eacute;ments et attributs du document utilis&eacute;s par Hibernate
               &agrave; l'ex&eacute;cution. Le document de mapping contient aussi des attributs et &eacute;l&eacute;ments optionnels qui agissent sur le sch&eacute;ma de base
               de donn&eacute;es export&eacute; par l'outil de g&eacute;n&eacute;ration de sch&eacute;ma. (Par exemple l'attribut <code class="literal">not-null</code>.) 
            </p>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-doctype"></a>5.1.1.&nbsp;Doctype
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Tous les mappings XML devraient utiliser le doctype indiqu&eacute;. Ce fichier est pr&eacute;sent &agrave; l'URL ci-dessus, dans le r&eacute;pertoire
                  <code class="literal">hibernate-x.x.x/src/org/hibernate</code> ou dans <code class="literal">hibernate3.jar</code>. Hibernate va toujours chercher la DTD dans son classpath en premier lieu. Si vous constatez des recherches de la DTD sur
                  Internet, v&eacute;rifiez votre d&eacute;claration de DTD par rapport au contenu de votre classpath. 
               </p>
               <div class="sect3" lang="fr-FR">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-entity-resolution"></a>5.1.1.1.&nbsp;EntityResolver
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>As mentioned previously, Hibernate will first attempt to resolve DTDs in its classpath. The manner in which it does this is
                     by registering a custom <code class="literal">org.xml.sax.EntityResolver</code> implementation with the SAXReader it uses to read in the xml files. This custom <code class="literal">EntityResolver</code> recognizes two different systemId namespaces. 
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p>a <code class="literal">hibernate namespace</code> is recognized whenever the resolver encounteres a systemId starting with <code class="literal">http://hibernate.sourceforge.net/</code>; the resolver attempts to resolve these entities via the classlaoder which loaded the Hibernate classes. 
                           </p>
                        </li>
                        <li>
                           <p>a <code class="literal">user namespace</code> is recognized whenever the resolver encounteres a systemId using a <code class="literal">classpath://</code> URL protocol; the resolver will attempt to resolve these entities via (1) the current thread context classloader and (2)
                              the classloader which loaded the Hibernate classes. 
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>An example of utilizing user namespacing: </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" [
    &lt;!ENTITY types SYSTEM "classpath://your/domain/types.xml"&gt;
]&gt;

&lt;hibernate-mapping package="your.domain"&gt;
    &lt;class name="MyEntity"&gt;
        &lt;id name="id" type="my-custom-id-type"&gt;
            ...
        &lt;/id&gt;
    &lt;class&gt;
    &amp;types;
&lt;/hibernate-mapping&gt;</pre><p>Where <code class="literal">types.xml</code> is a resource in the <code class="literal">your.domain</code> package and contains a custom <a href="mapping-types.html#mapping-types-custom" title="5.2.3.&nbsp;Types de valeur d&eacute;finis par l'utilisateur">typedef</a>. 
                  </p>
               </div>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-mapping"></a>5.1.2.&nbsp;hibernate-mapping
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Cet &eacute;l&eacute;ment a plusieurs attributs optionnels. Les attributs <code class="literal">schema</code> et <code class="literal">catalog</code> indiquent que les tables r&eacute;f&eacute;renc&eacute;es par ce mapping appartiennent au sch&eacute;ma nomm&eacute; et/ou au catalogue. S'ils sont sp&eacute;cifi&eacute;s,
                  les noms de tables seront qualifi&eacute;s par les noms de sch&eacute;ma et catalogue. L'attribut <code class="literal">default-cascade</code> indique quel type de cascade sera utlis&eacute; par d&eacute;faut pour les propri&eacute;t&eacute;s et collections qui ne pr&eacute;cisent pas l'attribut <code class="literal">cascade</code>. L'attribut <code class="literal">auto-import</code> nous permet d'utiliser par d&eacute;faut des noms de classes non qualifi&eacute;s dans le langage de requ&ecirc;te. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;hibernate-mapping
         schema="schemaName"                          <span class="co">(1)</span>
         catalog="catalogName"                        <span class="co">(2)</span>
         default-cascade="cascade_style"              <span class="co">(3)</span>
         default-access="field|property|ClassName"    <span class="co">(4)</span>
         default-lazy="true|false"                    <span class="co">(5)</span>
         auto-import="true|false"                     <span class="co">(6)</span>
         package="package.name"                       <span class="co">(7)</span>
 /&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">schema</code> (optionnel) : Le nom d'un sch&eacute;ma de base de donn&eacute;es. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">catalog</code> (optionnel) : Le nom d'un catalogue de base de donn&eacute;es. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">default-cascade</code> (optionnel - par d&eacute;faut vaut : <code class="literal">none</code>) : Un type de cascade par d&eacute;faut. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">default-access</code> (optionnel - par d&eacute;faut vaut : <code class="literal">property</code>) : Comment hibernate acc&egrave;dera aux propri&eacute;t&eacute;s. On peut aussi red&eacute;finir sa propre impl&eacute;mentation de <code class="literal">PropertyAccessor</code>. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">default-lazy</code> (optionnel - par d&eacute;faut vaut : <code class="literal">true</code>) : Valeur par d&eacute;faut pour un attribut <code class="literal">lazy</code> non sp&eacute;cifi&eacute; : celui des mappings de classes et de collection. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">auto-import</code> (optionnel - par d&eacute;faut vaut : <code class="literal">true</code>) : Sp&eacute;cifie si l'on peut utiliser des noms de classes non qualifi&eacute;s (des classes de ce mapping) dans le langage de requ&ecirc;te.
                                 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">package</code> (optionnel) : Pr&eacute;fixe de package par d&eacute;faut pour les noms de classe non qualifi&eacute;s du document de mapping. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Si deux classes poss&egrave;dent le m&ecirc;me nom de classe (non qualifi&eacute;), vous devez indiquer <code class="literal">auto-import="false"</code>. Hibernate lancera une exception si vous essayez d'assigner &agrave; deux classes le m&ecirc;me nom import&eacute;. 
               </p>
               <p>Notez que l'&eacute;l&eacute;ment <code class="literal">hibernate-mapping</code> vous permet d'imbriquer plusieurs mappings de <code class="literal">&lt;class&gt;</code> persistantes, comme dans l'exemple ci-dessus. Cependant la bonne pratique (ce qui est attendu par certains outils) est de
                  mapper une seule classe (ou une seule hi&eacute;rarchie de classes) par fichier de mapping et de nommer ce fichier d'apr&egrave;s le nom
                  de la superclasse, par exemple <code class="literal">Cat.hbm.xml</code>, <code class="literal">Dog.hbm.xml</code>, ou en cas d'h&eacute;ritage, <code class="literal">Animal.hbm.xml</code>. 
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-class"></a>5.1.3.&nbsp;class
                        </h3>
                     </div>
                  </div>
               </div>
               <p>D&eacute;clarez une classe persistante avec l'&eacute;l&eacute;ment <code class="literal">class</code> : 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;class
        name="ClassName"                              <span class="co">(1)</span>
        table="tableName"                             <span class="co">(2)</span>
        discriminator-value="discriminator_value"     <span class="co">(3)</span>
        mutable="true|false"                          <span class="co">(4)</span>
        schema="owner"                                <span class="co">(5)</span>
        catalog="catalog"                             <span class="co">(6)</span>
        proxy="ProxyInterface"                        <span class="co">(7)</span>
        dynamic-update="true|false"                   <span class="co">(8)</span>
        dynamic-insert="true|false"                   <span class="co">(9)</span>
        select-before-update="true|false"             <span class="co">(10)</span>
        polymorphism="implicit|explicit"              <span class="co">(11)</span>
        where="arbitrary sql where condition"         <span class="co">(12)</span>
        persister="PersisterClass"                    <span class="co">(13)</span>
        batch-size="N"                                <span class="co">(14)</span>
        optimistic-lock="none|version|dirty|all"      <span class="co">(15)</span>
        lazy="true|false"                             <span class="co">(16)</span>
        entity-name="EntityName"                      <span class="co">(17)</span>
        check="arbitrary sql check condition"         <span class="co">(18)</span>
        rowid="rowid"                                 <span class="co">(19)</span>
        subselect="SQL expression"                    <span class="co">(20)</span>
        abstract="true|false"                         <span class="co">(21)</span>
        node="element-name"
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code> (optionnel) : Le nom Java complet de la classe (ou interface) persistante. Si cet attribut est absent, il est suppos&eacute; que
                                 ce mapping ne se rapporte pas &agrave; une entit&eacute; POJO. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">table</code> (optionnel - par d&eacute;faut le nom (non-qualifi&eacute;) de la classe) : Le nom de sa table en base de donn&eacute;es. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">discriminator-value</code> (optionnel - par d&eacute;faut le nom de la classe) : Une valeur permettant de distinguer les sous-classes dans le cas de l'utilisation
                                 du polymorphisme. Les valeurs <code class="literal">null</code> et <code class="literal">not null</code> sont autoris&eacute;es. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">mutable</code> (optionnel, vaut <code class="literal">true</code> par d&eacute;faut) : Sp&eacute;cifie que des instances de la classe sont (ou non) immuables. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">schema</code> (optional): Override the schema name specified by the root <code class="literal">&lt;hibernate-mapping&gt;</code> element. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">catalog</code> (optional): Override the catalog name specified by the root <code class="literal">&lt;hibernate-mapping&gt;</code> element. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">proxy</code> (optionnel) : Sp&eacute;cifie une interface &agrave; utiliser pour l'initialisation diff&eacute;r&eacute;e (lazy loading) des proxies. Vous pouvez indiquer
                                 le nom de la classe elle-m&ecirc;me. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(8)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">dynamic-update</code> (optionnel, par d&eacute;faut &agrave; <code class="literal">false</code>) : Sp&eacute;cifie que les <code class="literal">UPDATE</code> SQL doivent &ecirc;tre g&eacute;n&eacute;r&eacute;s &agrave; l'ex&eacute;cution et contenir uniquement les colonnes dont les valeurs ont &eacute;t&eacute; modifi&eacute;es. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(9)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">dynamic-insert</code> (optionnel, par d&eacute;faut &agrave; <code class="literal">false</code>): Sp&eacute;cifie que les <code class="literal">INSERT</code> SQL doivent &ecirc;tre g&eacute;n&eacute;r&eacute;s &agrave; l'ex&eacute;cution et ne contenir que les colonnes dont les valeurs sont non nulles. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(10)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">select-before-update</code> (optionnel, par d&eacute;faut &agrave; <code class="literal">false</code>): Sp&eacute;cifie que Hibernate ne doit <span class="emphasis"><em>jamais</em></span> ex&eacute;cuter un <code class="literal">UPDATE</code> SQL sans &ecirc;tre certain qu'un objet a &eacute;t&eacute; r&eacute;ellement modifi&eacute;. Dans certains cas, (en r&eacute;alit&eacute;, seulement quand un objet transient
                                 a &eacute;t&eacute; associ&eacute; &agrave; une nouvelle session par <code class="literal">update()</code>), cela signifie que Hibernate ex&eacute;cutera un <code class="literal">SELECT</code> SQL pour s'assurer qu'un <code class="literal">UPDATE</code> SQL est v&eacute;ritablement n&eacute;cessaire. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(11)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">polymorphism</code> (optionnel, vaut <code class="literal">implicit</code> par d&eacute;faut) : D&eacute;termine si, pour cette classe, une requ&ecirc;te polymorphique implicite ou explicite est utilis&eacute;e. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(12)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">where</code> (optionnel) sp&eacute;cifie une clause SQL <code class="literal">WHERE</code> &agrave; utiliser lorsque l'on r&eacute;cup&egrave;re des objets de cette classe. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(13)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">persister</code> (optionnel) : Sp&eacute;cifie un <code class="literal">ClassPersister</code> particulier. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(14)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">batch-size</code> (optionnel, par d&eacute;faut = <code class="literal">1</code>) : sp&eacute;cifie une taille de batch pour remplir les instances de cette classe par identifiant en une seule requ&ecirc;te. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(15)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">optimistic-lock</code> (optionnel, par d&eacute;faut = <code class="literal">version</code>) : D&eacute;termine la strat&eacute;gie de verrou optimiste. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(16)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">lazy</code> (optionnel) : D&eacute;clarer <code class="literal">lazy="true"</code> est un raccourci pour sp&eacute;cifier le nom de la classe comme &eacute;tant l'interface <code class="literal">proxy</code>. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(17)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">entity-name</code> (optionnel) : Hibernate3 permet &agrave; une classe d'&ecirc;tre mapp&eacute;e plusieurs fois (potentiellement &agrave; plusieurs tables), et permet
                                 aux mappings d'entit&eacute; d'&ecirc;tre repr&eacute;sent&eacute;s par des Maps ou du XML au niveau Java. Dans ces cas, vous devez indiquer un nom explicite
                                 arbitraire pour les entit&eacute;s. Voir <a href="persistent-classes-dynamicmodels.html" title="4.4.&nbsp;Mod&egrave;les dynamiques">Section&nbsp;4.4, &laquo;&nbsp;Mod&egrave;les dynamiques&nbsp;&raquo;</a> et <a href="xml.html" title="Chapitre&nbsp;18.&nbsp;Mapping XML">Chapitre&nbsp;18, <i xmlns:xlink="http://www.w3.org/1999/xlink">Mapping XML</i></a> pour plus d'informations. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(18)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">check</code> (optionnel) : expression SQL utilis&eacute;e pour g&eacute;n&eacute;rer une contrainte de v&eacute;rification multi-lignes pour la g&eacute;n&eacute;ration automatique
                                 de sch&eacute;ma. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(19)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">rowid</code> (optionnel) : Hibernate peut utiliser des ROWID sur les bases de donn&eacute;es qui utilisent ce m&eacute;canisme. Par exemple avec Oracle,
                                 Hibernate peut utiliser la colonne additionnelle <code class="literal">rowid</code> pour des mises &agrave; jour rapides si cette option vaut <code class="literal">rowid</code>. Un ROWID repr&eacute;sente la localisation physique d'un tuple enregistr&eacute;. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(20)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">subselect</code> (optionnel) : Permet de mapper une entit&eacute; immuable en lecture-seule sur un sous-select de base de donn&eacute;es. Utile pour avoir
                                 une vue au lieu d'une table en base, mais &agrave; &eacute;viter. Voir plus bas pour plus d'information. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(21)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">abstract</code> (optionnel) : Utilis&eacute; pour marquer des superclasses abstraites dans des hi&eacute;rarchies de <code class="literal">&lt;union-subclass&gt;</code>. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Il est tout &agrave; fait possible d'utiliser une interface comme nom de classe persistante. Vous devez alors d&eacute;clarer les classes
                  impl&eacute;mentant cette interface en utilisant l'&eacute;l&eacute;ment <code class="literal">&lt;subclass&gt;</code>. Vous pouvez faire persister toute classe interne <span class="emphasis"><em>static</em></span>. Vous devez alors sp&eacute;cifier le nom de la classe par la notation habituelle des classes internes c'est &agrave; dire <code class="literal">eg.Foo$Bar</code>. 
               </p>
               <p>Les classes immuables, <code class="literal">mutable="false"</code>, ne peuvent pas &ecirc;tre modifi&eacute;es ou supprim&eacute;es par l'application. Cela permet &agrave; Hibernate de faire quelques optimisations mineures
                  sur les performances. 
               </p>
               <p>L'attribut optionnnel <code class="literal">proxy</code> permet les intialisations diff&eacute;r&eacute;es des instances persistantes de la classe. Hibernate retournera initialement des proxies
                  CGLIB qui impl&eacute;mentent l'interface nomm&eacute;e. Le v&eacute;ritable objet persistant ne sera charg&eacute; que lorsque une m&eacute;thode du proxy sera
                  appel&eacute;e. Voir plus bas le paragraphe abordant les proxies et le chargement diff&eacute;r&eacute; (lazy initialization). 
               </p>
               <p>Le polymorphisme <span class="emphasis"><em>implicite</em></span> signifie que les instances de la classe seront retourn&eacute;es par une requ&ecirc;te qui utilise les noms de la classe ou de chacune
                  de ses superclasses ou encore des interfaces impl&eacute;ment&eacute;es par cette classe ou ses superclasses. Les instances des classes
                  filles seront retourn&eacute;es par une requ&ecirc;te qui utilise le nom de la classe elle m&ecirc;me. Le polymorphisme <span class="emphasis"><em>explicite</em></span> signifie que les instances de la classe ne seront retourn&eacute;es que par une requ&ecirc;te qui utilise explicitement son nom et que
                  seules les instances des classes filles d&eacute;clar&eacute;es dans les &eacute;l&eacute;ments <code class="literal">&lt;subclass&gt;</code> ou <code class="literal">&lt;joined-subclass&gt;</code> seront retourn&eacute;es. Dans la majorit&eacute;s des cas la valeur par d&eacute;faut, <code class="literal">polymorphism="implicit"</code>, est appropri&eacute;e. Le polymorphisme explicite est utile lorsque deux classes diff&eacute;rentes sont mapp&eacute;es &agrave; la m&ecirc;me table (ceci
                  permet d'&eacute;crire une classe "l&eacute;g&egrave;re" qui ne contient qu'une partie des colonnes de la table - voir la partie design pattern
                  du site communautaire). 
               </p>
               <p>L'attribut <code class="literal">persister</code> vous permet de customiser la strat&eacute;gie utilis&eacute;e pour la classe. Vous pouvez, par exemple, sp&eacute;cifier votre propre sous-classe
                  de <code class="literal">org.hibernate.persister.EntityPersister</code> ou vous pourriez aussi cr&eacute;er une nouvelle impl&eacute;mentation de l'interface <code class="literal">org.hibernate.persister.ClassPersister</code> qui proposerait une persistance via, par exemple, des appels de proc&eacute;dures stock&eacute;es, de la s&eacute;rialisation vers des fichiers
                  plats ou un annuaire LDAP. Voir <code class="literal">org.hibernate.test.CustomPersister</code> pour un exemple simple (d'une "persistance" vers une <code class="literal">Hashtable</code>). 
               </p>
               <p>Notez que les param&egrave;tres <code class="literal">dynamic-update</code> et <code class="literal">dynamic-insert</code> ne sont pas h&eacute;rit&eacute;s par les sous-classes et peuvent donc &ecirc;tre sp&eacute;cifi&eacute;s pour les &eacute;l&eacute;ments <code class="literal">&lt;subclass&gt;</code> ou <code class="literal">&lt;joined-subclass&gt;</code> Ces param&egrave;tres peuvent am&eacute;liorer les performances dans certains cas, mais peuvent aussi les amoindrir. A utiliser en connaissance
                  de causes. 
               </p>
               <p>L'utilisation de <code class="literal">select-before-update</code> va g&eacute;n&eacute;ralement faire baisser les performances. Ce param&egrave;tre est pratique pour pr&eacute;venir l'appel inutile d'un trigger sur
                  modification quand on r&eacute;attache un graphe d'instances &agrave; une <code class="literal">Session</code>. 
               </p>
               <p>Si vous utilisez le <code class="literal">dynamic-update</code>, les diff&eacute;rentes strat&eacute;gies de verrouillage optimiste (optimistic locking) sont les suivantes: 
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><code class="literal">version</code> v&eacute;rifie les colonnes version/timestamp 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">all</code> v&eacute;rifie toutes les colonnes 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">dirty</code> v&eacute;rifie les colonnes modifi&eacute;es, permettant des updates concurrents 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">none</code> pas de verrouillage optimiste 
                        </p>
                     </li>
                  </ul>
               </div>
               <p>Nous encourageons <span class="emphasis"><em>tr&egrave;s</em></span> fortement l'utilisation de colonnes de version/timestamp pour le verrouillage optimiste avec Hibernate. C'est la meilleure
                  strat&eacute;gie en regard des performances et la seule qui g&egrave;re correctement les modifications sur les objets d&eacute;tach&eacute;s (c'est &agrave;
                  dire lorsqu'on utilise <code class="literal">Session.merge()</code>). 
               </p>
               <p>Il n'y a pas de diff&eacute;rence entre table et vue pour le mapping Hibernate, tant que c'est transparent au niveau base de donn&eacute;es
                  (remarquez que certaines BDD ne supportent pas les vues correctement, notamment pour les updates). Vous rencontrerez peut-&ecirc;tre
                  des cas o&ugrave; vous souhaitez utiliser une vue mais ne pouvez pas en cr&eacute;er sur votre BDD (par exemple &agrave; cause de sch&eacute;mas anciens
                  et fig&eacute;s). Dans ces cas, vous pouvez mapper une entit&eacute; immuable en lecture seule sur un sous-select SQL donn&eacute;: 
               </p><pre class="programlisting">&lt;class name="Summary"&gt;
    &lt;subselect&gt;
        select item.name, max(bid.amount), count(*)
        from item
        join bid on bid.item_id = item.id
        group by item.name
    &lt;/subselect&gt;
    &lt;synchronize table="item"/&gt;
    &lt;synchronize table="bid"/&gt;
    &lt;id name="name"/&gt;
    ...
&lt;/class&gt;</pre><p>D&eacute;clarez les tables &agrave; synchroniser avec cette entit&eacute; pour assurer que le flush automatique se produise correctement, et pour
                  que les requ&ecirc;tes sur l'entit&eacute; d&eacute;riv&eacute;e ne renvoient pas des donn&eacute;es p&eacute;rim&eacute;es. Le lit&eacute;ral <code class="literal">&lt;subselect&gt;</code> est disponible comme attribut ou comme &eacute;l&eacute;ment de mapping. 
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-id"></a>5.1.4.&nbsp;id
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Les classes mapp&eacute;es <span class="emphasis"><em>doivent</em></span> d&eacute;clarer la clef primaire de la table en base de donn&eacute;es. La plupart des classes auront aussi une propri&eacute;t&eacute; de type javabean
                  pr&eacute;sentant l'identifiant unique d'une instance. L'&eacute;l&eacute;ment <code class="literal">&lt;id&gt;</code> sert &agrave; d&eacute;finir le mapping entre cette propri&eacute;t&eacute; et la clef primaire en base. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;id
        name="propertyName"                                          <span class="co">(1)</span>
        type="typename"                                              <span class="co">(2)</span>
        column="column_name"                                         <span class="co">(3)</span>
        unsaved-value="null|any|none|undefined|id_value"             <span class="co">(4)</span>
        access="field|property|ClassName"&gt;                           <span class="co">(5)</span>
        node="element-name|@attribute-name|element/@attribute|."

        &lt;generator class="generatorClass"/&gt;
&lt;/id&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code> (optionnel) : Nom de la propri&eacute;t&eacute; qui sert d'identifiant. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">type</code> (optionnel) : Nom indiquant le type Hibernate. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">column</code> (optionnel - le nom de la propri&eacute;t&eacute; est pris par d&eacute;faut) : Nom de la clef primaire. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">unsaved-value</code> (optionnel - par d&eacute;faut une valeur "bien choisie") : Une valeur de la propri&eacute;t&eacute; d'identifiant qui indique que l'instance
                                 est nouvellement instanci&eacute;e (non sauvegard&eacute;e), et qui la distingue des instances <code class="literal">transient</code>s qui ont &eacute;t&eacute; sauvegard&eacute;es ou charg&eacute;es dans une session pr&eacute;c&eacute;dente. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The strategy Hibernate should use for accessing the property value. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Si l'attribut <code class="literal">name</code> est absent, Hibernate consid&egrave;re que la classe ne poss&egrave;de pas de propri&eacute;t&eacute; identifiant. 
               </p>
               <p>L'attribut <code class="literal">unsaved-value</code> est important ! Si l'identifiant de votre classe n'a pas une valeur par d&eacute;faut compatible avec le comportement standard de
                  Java (z&eacute;ro ou null), vous devez alors pr&eacute;ciser la valeur par d&eacute;faut. 
               </p>
               <p>La d&eacute;claration alternative <code class="literal">&lt;composite-id&gt;</code> permet l'accc&egrave;s aux donn&eacute;es d'anciens syst&egrave;mes qui utilisent des clefs compos&eacute;es. Son utilisation est fortement d&eacute;conseill&eacute;e
                  pour d'autres cas. 
               </p>
               <div class="sect3" lang="fr-FR">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-generator"></a>5.1.4.1.&nbsp;Generator
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>L'&eacute;l&eacute;ment fils <code class="literal">&lt;generator&gt;</code> nomme une classe Java utilis&eacute;e pour g&eacute;n&eacute;rer les identifiants uniques pour les instances des classes persistantes. Si des
                     param&egrave;tres sont requis pour configurer ou initialiser l'instance du g&eacute;n&eacute;rateur, ils sont pass&eacute;s en utilisant l'&eacute;l&eacute;ment <code class="literal">&lt;param&gt;</code>. 
                  </p><pre class="programlisting">&lt;id name="id" type="long" column="cat_id"&gt;
        &lt;generator class="org.hibernate.id.TableHiLoGenerator"&gt;
                &lt;param name="table"&gt;uid_table&lt;/param&gt;
                &lt;param name="column"&gt;next_hi_value_column&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><p>All generators implement the interface <code class="literal">org.hibernate.id.IdentifierGenerator</code>. This is a very simple interface; some applications may choose to provide their own specialized implementations. However,
                     Hibernate provides a range of built-in implementations. There are shortcut names for the built-in generators: 
                  </p>
                  <div class="variablelist">
                     <dl>
                        <dt><span class="term"><code class="literal">increment</code></span></dt>
                        <dd>
                           <p>G&eacute;n&egrave;re des identifiants de type <code class="literal">long</code>, <code class="literal">short</code> ou <code class="literal">int</code> qui ne sont uniques que si aucun autre processus n'ins&egrave;re de donn&eacute;es dans la m&ecirc;me table. <span class="emphasis"><em>Ne pas utiliser en environnement clusteris&eacute;.</em></span> 
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">identity</code></span></dt>
                        <dd>
                           <p>Utilisation de la colonne identity de DB2, MySQL, MS SQL Server, Sybase et HypersonicSQL. L'identifiant renvoy&eacute; est de type
                              <code class="literal">long</code>, <code class="literal">short</code> ou <code class="literal">int</code>. 
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">sequence</code></span></dt>
                        <dd>
                           <p>Utilisation des s&eacute;quences dans DB2, PostgreSQL, Oracle, SAP DB, McKoi ou d'un g&eacute;n&eacute;rateur dans Interbase. L'identifiant renvoy&eacute;
                              est de type <code class="literal">long</code>, <code class="literal">short</code> ou <code class="literal">int</code> 
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">hilo</code></span></dt>
                        <dd>
                           <p><a name="mapping-declaration-id-hilodescription"></a>Utilise un algorithme hi/lo pour g&eacute;n&eacute;rer de fa&ccedil;on efficace des identifiants de type <code class="literal">long</code>, <code class="literal">short</code> ou <code class="literal">int</code>, en prenant comme source de valeur "hi" une table et une colonne (par d&eacute;faut <code class="literal">hibernate_unique_key</code> et <code class="literal">next_hi</code> respectivement). L'algorithme hi/lo g&eacute;n&egrave;re des identifiants uniques pour une base de donn&eacute;es particuli&egrave;re seulement. 
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">seqhilo</code></span></dt>
                        <dd>
                           <p>Utilise un algorithme hi/lo pour g&eacute;n&eacute;rer efficacement des identifiants de type <code class="literal">long</code>, <code class="literal">short</code> ou <code class="literal">int</code>, &eacute;tant donn&eacute; un nom de s&eacute;quence en base. 
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">uuid</code></span></dt>
                        <dd>
                           <p>Utilise un algorithme de type UUID 128 bits pour g&eacute;n&eacute;rer des identifiants de type string, unique au sein d'un r&eacute;seau (l'adresse
                              IP est utilis&eacute;e). Le UUID en cod&eacute; en une cha&icirc;ne de nombre h&eacute;xad&eacute;cimaux de longueur 32. 
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">guid</code></span></dt>
                        <dd>
                           <p>Utilise une cha&icirc;ne GUID g&eacute;n&eacute;r&eacute;e par la base pour MS SQL Server et MySQL. </p>
                        </dd>
                        <dt><span class="term"><code class="literal">native</code></span></dt>
                        <dd>
                           <p>Choisit <code class="literal">identity</code>, <code class="literal">sequence</code> ou <code class="literal">hilo</code> selon les possibilit&eacute;s offertes par la base de donn&eacute;es sous-jacente. 
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">assigned</code></span></dt>
                        <dd>
                           <p>Laisse l'application affecter un identifiant &agrave; l'objet avant que la m&eacute;tode <code class="literal">save()</code> soit appel&eacute;e. Il s'agit de la strat&eacute;gie par d&eacute;faut si aucun <code class="literal">&lt;generator&gt;</code> n'est sp&eacute;cifi&eacute;. 
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">select</code></span></dt>
                        <dd>
                           <p>R&eacute;cup&egrave;re une clef primaire assign&eacute;e par un trigger en s&eacute;lectionnant la ligne par une clef unique quelconque. </p>
                        </dd>
                        <dt><span class="term"><code class="literal">foreign</code></span></dt>
                        <dd>
                           <p>Utilise l'identifiant d'un objet associ&eacute;. Habituellement utilis&eacute; en conjonction avec une association <code class="literal">&lt;one-to-one&gt;</code> sur la clef primaire. 
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">sequence-identity</code></span></dt>
                        <dd>
                           <p>a specialized sequence generation strategy which utilizes a database sequence for the actual value generation, but combines
                              this with JDBC3 getGeneratedKeys to actually return the generated identifier value as part of the insert statement execution.
                              This strategy is only known to be supported on Oracle 10g drivers targetted for JDK 1.4. Note comments on these insert statements
                              are disabled due to a bug in the Oracle drivers. 
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <p>
                     
                                     
                  </p>
               </div>
               <div class="sect3" lang="fr-FR">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-hilo"></a>5.1.4.2.&nbsp;algorithme Hi/lo
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>Les g&eacute;n&eacute;rateurs <code class="literal">hilo</code> et <code class="literal">seqhilo</code> proposent deux impl&eacute;mentations alternatives de l'algorithme hi/lo, une approche largement utilis&eacute;e pour g&eacute;n&eacute;rer des identifiants.
                     La premi&egrave;re impl&eacute;mentation n&eacute;cessite une table "sp&eacute;ciale" en base pour h&eacute;berger la prochaine valeur "hi" disponible. La seconde
                     utilise une s&eacute;quence de type Oracle (quand la base sous-jacente le propose). 
                  </p><pre class="programlisting">&lt;id name="id" type="long" column="cat_id"&gt;
        &lt;generator class="hilo"&gt;
                &lt;param name="table"&gt;hi_value&lt;/param&gt;
                &lt;param name="column"&gt;next_value&lt;/param&gt;
                &lt;param name="max_lo"&gt;100&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><pre class="programlisting">&lt;id name="id" type="long" column="cat_id"&gt;
        &lt;generator class="seqhilo"&gt;
                &lt;param name="sequence"&gt;hi_value&lt;/param&gt;
                &lt;param name="max_lo"&gt;100&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><p>Malheureusement, vous ne pouvez pas utilisez <code class="literal">hilo</code> quand vous apportez votre propre <code class="literal">Connection</code> &agrave; Hibernate. Quand Hibernate utilise une datasource du serveur d'application pour obtenir des connexions inscrites avec JTA,
                     vous devez correctement configurer <code class="literal">hibernate.transaction.manager_lookup_class</code>. 
                  </p>
               </div>
               <div class="sect3" lang="fr-FR">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-uuid"></a>5.1.4.3.&nbsp;UUID algorithm
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>Le contenu du UUID est : adresse IP, date de d&eacute;marrage de la JVM (pr&eacute;cis au quart de seconde), l'heure syst&egrave;me et un compteur
                     (unique au sein de la JVM). Il n'est pas possible d'obtenir l'adresse MAC ou une adresse m&eacute;moire &agrave; partir de Java, c'est donc
                     le mieux que l'on puisse faire sans utiliser JNI. 
                  </p>
               </div>
               <div class="sect3" lang="fr-FR">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-sequences"></a>5.1.4.4.&nbsp;Colonnes identifiantes et s&eacute;quences
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>Pour les bases qui impl&eacute;mentent les colonnes "identit&eacute;" (DB2, MySQL, Sybase, MS SQL), vous pouvez utiliser la g&eacute;n&eacute;ration de
                     clef par <code class="literal">identity</code>. Pour les bases qui impl&eacute;mentent les s&eacute;quences (DB2, Oracle, PostgreSQL, Interbase, McKoi, SAP DB) vous pouvez utiliser la
                     g&eacute;n&eacute;ration de clef par <code class="literal">sequence</code>. Ces deux m&eacute;thodes n&eacute;cessitent deux requ&ecirc;tes SQL pour ins&eacute;rer un objet. 
                  </p><pre class="programlisting">&lt;id name="id" type="long" column="person_id"&gt;
        &lt;generator class="sequence"&gt;
                &lt;param name="sequence"&gt;person_id_sequence&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><pre class="programlisting">&lt;id name="id" type="long" column="person_id" unsaved-value="0"&gt;
        &lt;generator class="identity"/&gt;
&lt;/id&gt;</pre><p>Pour le d&eacute;veloppement multi-plateformes, la strat&eacute;gie <code class="literal">native</code> choisira entre les m&eacute;thodes <code class="literal">identity</code>, <code class="literal">sequence</code> et <code class="literal">hilo</code>, selon les possibilit&eacute;s offertes par la base sous-jacente. 
                  </p>
               </div>
               <div class="sect3" lang="fr-FR">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-assigned"></a>5.1.4.5.&nbsp;Identifiants assign&eacute;s
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>Si vous souhaitez que l'application assigne des identifiants (par opposition &agrave; la g&eacute;n&eacute;ration par Hibernate), vous pouvez utiliser
                     le g&eacute;n&eacute;rateur <code class="literal">assigned</code>. Ce g&eacute;n&eacute;rateur sp&eacute;cial utilisera une valeur d'identifiant d&eacute;j&agrave; utilis&eacute; par la propri&eacute;t&eacute; identifiant l'objet. Ce g&eacute;n&eacute;rateur
                     est utilis&eacute; quand la clef primaire est une clef naturelle plut&ocirc;t qu'une clef secondaire. C'est le comportement par d&eacute;faut
                     si vous ne pr&eacute;cisez pas d'&eacute;l&eacute;ment <code class="literal">&lt;generator&gt;</code>. 
                  </p>
                  <p>Choisir le g&eacute;n&eacute;rateur <code class="literal">assigned</code> fait utiliser <code class="literal">unsaved-value="undefined"</code> par Hibernate, le for&ccedil;ant &agrave; interroger la base pour d&eacute;terminer si l'instance est transiente ou d&eacute;tach&eacute;e, &agrave; moins d'utiliser
                     une propri&eacute;t&eacute; version ou timestamp, ou alors de d&eacute;finir <code class="literal">Interceptor.isUnsaved()</code>. 
                  </p>
               </div>
               <div class="sect3" lang="fr-FR">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="mapping-declaration-id-select"></a>5.1.4.6.&nbsp;Clefs primaires assign&eacute;es par trigger
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>Pour les sch&eacute;mas de base h&eacute;rit&eacute;s d'anciens syst&egrave;mes uniquement (Hibernate ne g&eacute;n&egrave;re pas de DDL avec des triggers) </p><pre class="programlisting">&lt;id name="id" type="long" column="person_id"&gt;
        &lt;generator class="select"&gt;
                &lt;param name="key"&gt;socialSecurityNumber&lt;/param&gt;
        &lt;/generator&gt;
&lt;/id&gt;</pre><p>Dans l'exemple ci-dessus, <code class="literal">socialSecurityNumber</code> a une valeur unique d&eacute;finie par la classe en tant que clef naturelle et <code class="literal">person_id</code> est une clef secondaire dont la valeur est g&eacute;n&eacute;r&eacute;e par trigger. 
                  </p>
               </div>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-id-enhanced"></a>5.1.5.&nbsp;Enhanced identifier generators
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Starting with release 3.2.3, there are 2 new generators which represent a re-thinking of 2 different aspects of identifier
                  generation. The first aspect is database portability; the second is optimization (not having to query the database for every
                  request for a new identifier value). These two new generators are intended to take the place of some of the named generators
                  described above (starting in 3.3.x); however, they are included in the current releases and can be referenced by FQN. 
               </p>
               <p>The first of these new generators is <code class="literal">org.hibernate.id.enhanced.SequenceStyleGenerator</code> which is intended firstly as a replacement for the <code class="literal">sequence</code> generator and secondly as a better portability generator than <code class="literal">native</code> (because <code class="literal">native</code> (generally) chooses between <code class="literal">identity</code> and <code class="literal">sequence</code> which have largely different semantics which can cause subtle isssues in applications eyeing portability). <code class="literal">org.hibernate.id.enhanced.SequenceStyleGenerator</code> however achieves portability in a different manner. It chooses between using a table or a sequence in the database to store
                  its incrementing values depending on the capabilities of the dialect being used. The difference between this and <code class="literal">native</code> is that table-based and sequence-based storage have the same exact semantic (in fact sequences are exactly what Hibernate
                  tries to emmulate with its table-based generators). This generator has a number of configuration parameters: 
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p><code class="literal">sequence_name</code> (optional, defaults to <code class="literal">hibernate_sequence</code>): The name of the sequence (or table) to be used. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">initial_value</code> (optional, defaults to <code class="literal">1</code>): The initial value to be retrieved from the sequence/table. In sequence creation terms, this is analogous to the clause
                           typical named "STARTS WITH". 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">increment_size</code> (optional, defaults to <code class="literal">1</code>): The value by which subsequent calls to the sequence/table should differ. In sequence creation terms, this is analogous
                           to the clause typical named "INCREMENT BY". 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">force_table_use</code> (optional, defaults to <code class="literal">false</code>): Should we force the use of a table as the backing structure even though the dialect might support sequence? 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">value_column</code> (optional, defaults to <code class="literal">next_val</code>): Only relevant for table structures! The name of the column on the table which is used to hold the value. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">optimizer</code> (optional, defaults to <code class="literal">none</code>): See <a href="mapping.html#mapping-declaration-id-enhanced-optimizers" title="5.1.6.&nbsp;Identifier generator optimization">Section&nbsp;5.1.6, &laquo;&nbsp;Identifier generator optimization&nbsp;&raquo;</a> 
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                              
               </p>
               <p>The second of these new generators is <code class="literal">org.hibernate.id.enhanced.TableGenerator</code> which is intended firstly as a replacement for the <code class="literal">table</code> generator (although it actually functions much more like <code class="literal">org.hibernate.id.MultipleHiLoPerTableGenerator</code>) and secondly as a re-implementation of <code class="literal">org.hibernate.id.MultipleHiLoPerTableGenerator</code> utilizing the notion of pluggable optimiziers. Essentially this generator defines a table capable of holding a number of
                  different increment values simultaneously by using multiple distinctly keyed rows. This generator has a number of configuration
                  parameters: 
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p><code class="literal">table_name</code> (optional, defaults to <code class="literal">hibernate_sequences</code>): The name of the table to be used. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">value_column_name</code> (optional, defaults to <code class="literal">next_val</code>): The name of the column on the table which is used to hold the value. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">segment_column_name</code> (optional, defaults to <code class="literal">sequence_name</code>): The name of the column on the table which is used to hold the "segement key". This is the value which distinctly identifies
                           which increment value to use. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">segment_value</code> (optional, defaults to <code class="literal">default</code>): The "segment key" value for the segment from which we want to pull increment values for this generator. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">segment_value_length</code> (optional, defaults to <code class="literal">255</code>): Used for schema generation; the column size to create this segment key column. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">initial_value</code> (optional, defaults to <code class="literal">1</code>): The initial value to be retrieved from the table. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">increment_size</code> (optional, defaults to <code class="literal">1</code>): The value by which subsequent calls to the table should differ. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">optimizer</code> (optional, defaults to <code class="literal"></code>): See <a href="mapping.html#mapping-declaration-id-enhanced-optimizers" title="5.1.6.&nbsp;Identifier generator optimization">Section&nbsp;5.1.6, &laquo;&nbsp;Identifier generator optimization&nbsp;&raquo;</a> 
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                              
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-id-enhanced-optimizers"></a>5.1.6.&nbsp;Identifier generator optimization
                        </h3>
                     </div>
                  </div>
               </div>
               <p>For identifier generators which store values in the database, it is inefficient for them to hit the database on each and every
                  call to generate a new identifier value. Instead, you'd ideally want to group a bunch of them in memory and only hit the database
                  when you have exhausted your in-memory value group. This is the role of the pluggable optimizers. Currently only the two enhanced
                  generators (<a href="mapping.html#mapping-declaration-id-enhanced" title="5.1.5.&nbsp;Enhanced identifier generators">Section&nbsp;5.1.5, &laquo;&nbsp;Enhanced identifier generators&nbsp;&raquo;</a> support this notion. 
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p><code class="literal">none</code> (generally this is the default if no optimizer was specified): This says to not perform any optimizations, and hit the database
                           each and every request. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">hilo</code>: applies a hi/lo algorithm around the database retrieved values. The values from the database for this optimizer are expected
                           to be sequential. The values retrieved from the database structure for this optimizer indicates the "group number"; the <code class="literal">increment_size</code> is multiplied by that value in memory to define a group "hi value". 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">pooled</code>: like was discussed for <code class="literal">hilo</code>, this optimizers attempts to minimize the number of hits to the database. Here, however, we simply store the starting value
                           for the "next group" into the database structure rather than a sequential value in combination with an in-memory grouping
                           algorithm. <code class="literal">increment_size</code> here refers to the values coming from the database. 
                        </p>
                     </li>
                  </ul>
               </div>
               <p>
                              
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-compositeid"></a>5.1.7.&nbsp;composite-id
                        </h3>
                     </div>
                  </div>
               </div><pre class="programlisting">&lt;composite-id
        name="propertyName"
        class="ClassName"
        mapped="true|false"
        access="field|property|ClassName"&gt;
        node="element-name|."

        &lt;key-property name="propertyName" type="typename" column="column_name"/&gt;
        &lt;key-many-to-one name="propertyName class="ClassName" column="column_name"/&gt;
        ......
&lt;/composite-id&gt;</pre><p>Pour une table avec clef compos&eacute;e, vous pouvez mapper plusieurs attributs de la classe comme propri&eacute;t&eacute;s identifiantes. L'&eacute;lement
                  <code class="literal">&lt;composite-id&gt;</code> accepte les mappings de propri&eacute;t&eacute;s <code class="literal">&lt;key-property&gt;</code> et les mappings <code class="literal">&lt;key-many-to-one&gt;</code> comme fils. 
               </p><pre class="programlisting">&lt;composite-id&gt;
        &lt;key-property name="medicareNumber"/&gt;
        &lt;key-property name="dependent"/&gt;
&lt;/composite-id&gt;</pre><p>Vos classes persistantes <span class="emphasis"><em>doivent</em></span> surcharger les m&eacute;thodes <code class="literal">equals()</code> et <code class="literal">hashCode()</code> pour impl&eacute;menter l'&eacute;galit&eacute; d'identifiant compos&eacute;. Elles doivent aussi implenter l'interface <code class="literal">Serializable</code>. 
               </p>
               <p>Malheureusement cette approche sur les identifiants compos&eacute;s signifie qu'un objet persistant est son propre identifiant. Il
                  n'y a pas d'autre moyen pratique de manipuler l'objet que par l'objet lui-m&ecirc;me. Vous devez instancier une instance de la classe
                  persistante elle-m&ecirc;me et peupler ses attributs identifiants avant de pouvoir appeler la m&eacute;thode <code class="literal">load()</code> pour charger son &eacute;tat persistant associ&eacute; &agrave; une clef compos&eacute;e. Nous appelons cette approche "identifiant compos&eacute; <span class="emphasis"><em>embarqu&eacute;</em></span>" et ne la recommandons pas pour des applications complexes. 
               </p>
               <p>Une seconde approche, appel&eacute;e identifiant compos&eacute; <span class="emphasis"><em>mapp&eacute;</em></span>, consiste &agrave; encapsuler les propri&eacute;t&eacute;s identifiantes (celles contenues dans <code class="literal">&lt;composite-id&gt;</code>) dans une classe particuli&egrave;re. 
               </p><pre class="programlisting">&lt;composite-id class="MedicareId" mapped="true"&gt;
        &lt;key-property name="medicareNumber"/&gt;
        &lt;key-property name="dependent"/&gt;
&lt;/composite-id&gt;</pre><p>Dans cet exemple, la classe d'identifiant compos&eacute;e,<code class="literal">MedicareId</code> et la classe mapp&eacute;e elle-m&ecirc;me, poss&egrave;dent les propri&eacute;t&eacute;s <code class="literal">medicareNumber</code> et <code class="literal">dependent</code>. La classe identifiante doit red&eacute;finir <code class="literal">equals()</code> et <code class="literal">hashCode()</code> et impl&eacute;menter <code class="literal">Serializable</code>. Le d&eacute;savantage de cette approche est la duplication du code. 
               </p>
               <p>Les attributs suivants servent &agrave; configurer un identifiant compos&eacute; mapp&eacute; : </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p><code class="literal">mapped</code> (optionnel, d&eacute;faut &agrave; <code class="literal">false</code>) : indique qu'un identifiant compos&eacute; mapp&eacute; est utilis&eacute;, et que les propri&eacute;t&eacute;s contenues font r&eacute;f&eacute;rence aux deux classes (celle
                           mapp&eacute;e et la classe identifiante). 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">class</code> (optionnel, mais requis pour un identifiant compos&eacute; mapp&eacute;) : La classe composant utilis&eacute;e comme identifiant compos&eacute;. 
                        </p>
                     </li>
                  </ul>
               </div>
               <p>Nous d&eacute;crirons une troisi&egrave;me approche beaucoup plus efficace ou l'identifiant compos&eacute; est impl&eacute;ment&eacute; comme une classe composant
                  dans <a href="components-compositeid.html" title="8.4.&nbsp;Utiliser un composant comme identifiant">Section&nbsp;8.4, &laquo;&nbsp;Utiliser un composant comme identifiant&nbsp;&raquo;</a>. Les attributs d&eacute;crits ci dessous, ne s'appliquent que pour cette derni&egrave;re approche : 
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p><code class="literal">name</code> (optionnel, requis pour cette approche) : une propri&eacute;t&eacute; de type composant qui contient l'identifiant compos&eacute; (voir chapitre
                           9). 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The strategy Hibernate should use for accessing the property value. 
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">class</code> (optionnel - d&eacute;faut au type de la propri&eacute;t&eacute; d&eacute;termin&eacute; par r&eacute;flexion) : La classe composant utilis&eacute;e comme identifiant (voir
                           prochaine section). 
                        </p>
                     </li>
                  </ul>
               </div>
               <p>Cette derni&egrave;re approche est celle que nous recommandons pour toutes vos applications. </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-discriminator"></a>5.1.8.&nbsp;discriminator
                        </h3>
                     </div>
                  </div>
               </div>
               <p>L'&eacute;l&eacute;ment <code class="literal">&lt;discriminator&gt;</code> est n&eacute;cessaire pour la persistance polymorphique qui utilise la strat&eacute;gie de mapping de table par hi&eacute;rarchie de classe. La
                  colonne discriminante contient une valeur marqueur qui permet &agrave; la couche de persistance de savoir quelle sous-classe instancier
                  pour une ligne particuli&egrave;re de table en base. Un nombre restreint de types peuvent &ecirc;tre utilis&eacute;s : <code class="literal">string</code>, <code class="literal">character</code>, <code class="literal">integer</code>, <code class="literal">byte</code>, <code class="literal">short</code>, <code class="literal">boolean</code>, <code class="literal">yes_no</code>, <code class="literal">true_false</code>. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;discriminator
        column="discriminator_column"                      <span class="co">(1)</span>
        type="discriminator_type"                          <span class="co">(2)</span>
        force="true|false"                                 <span class="co">(3)</span>
        insert="true|false"                                <span class="co">(4)</span>
        formula="arbitrary sql expression"                 <span class="co">(5)</span>
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">column</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">class</code>) le nom de la colonne discriminante. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">type</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">string</code>) un nom indiquant le type Hibernate. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">force</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">false</code>) "oblige" Hibernate &agrave; sp&eacute;cifier une valeur discriminante autoris&eacute;e m&ecirc;me quand on r&eacute;cup&egrave;re toutes les instances de la classe
                                 de base. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">insert</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">true</code>) &agrave; passer &agrave; <code class="literal">false</code> si la colonne discriminante fait aussi partie d'un identifiant compos&eacute; mapp&eacute; (Indique &agrave; Hibernate de ne pas inclure la colonne
                                 dans les <code class="literal">INSERT</code> SQL). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">formula</code> (optionnel) une expression SQL arbitraire qui est ex&eacute;cut&eacute;e quand un type doit &ecirc;tre &eacute;valu&eacute;. Permet la discrimination bas&eacute;e
                                 sur le contenu. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Les v&eacute;ritables valeurs de la colonne discriminante sont sp&eacute;cifi&eacute;es par l'attribut <code class="literal">discriminator-value</code> des &eacute;l&eacute;ments <code class="literal">&lt;class&gt;</code> et <code class="literal">&lt;subclass&gt;</code>. 
               </p>
               <p>L'attribut <code class="literal">force</code> n'est utile que si la table contient des lignes avec des valeurs "extra" discriminantes qui ne sont pas mapp&eacute;es &agrave; une classe
                  persistante. Ce ne sera g&eacute;n&eacute;ralement pas le cas. 
               </p>
               <p>En utilisant l'attribut <code class="literal">formula</code> vous pouvez d&eacute;clarer une expression SQL arbitraire qui sera utilis&eacute;e pour &eacute;valuer le type d'une ligne : 
               </p><pre class="programlisting">&lt;discriminator
    formula="case when CLASS_TYPE in ('a', 'b', 'c') then 0 else 1 end"
    type="integer"/&gt;</pre></div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-version"></a>5.1.9.&nbsp;version (optionnel)
                        </h3>
                     </div>
                  </div>
               </div>
               <p>L'&eacute;l&eacute;ment <code class="literal">&lt;version&gt;</code> est optionnel et indique que la table contient des donn&eacute;es versionn&eacute;es. C'est particuli&egrave;rement utile si vous avez l'intention
                  d'utiliser des <span class="emphasis"><em>transactions longues</em></span> (voir plus-bas). 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;version
        column="version_column"                                      <span class="co">(1)</span>
        name="propertyName"                                          <span class="co">(2)</span>
        type="typename"                                              <span class="co">(3)</span>
        access="field|property|ClassName"                            <span class="co">(4)</span>
        unsaved-value="null|negative|undefined"                      <span class="co">(5)</span>
        generated="never|always"                                     <span class="co">(6)</span>
        insert="true|false"                                          <span class="co">(7)</span>
        node="element-name|@attribute-name|element/@attribute|."
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">column</code> (optionnel - par d&eacute;faut &eacute;gal au nom de la propri&eacute;t&eacute;) : Le nom de la colonne contenant le num&eacute;ro de version. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code> : Le nom d'un attribut de la classe persistante. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">type</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">integer</code>) : Le type du num&eacute;ro de version. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The strategy Hibernate should use for accessing the property value. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">unsaved-value</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">undefined</code>) : Une valeur de la propri&eacute;t&eacute; d'identifiant qui indique que l'instance est nouvellement instanci&eacute;e (non sauvegard&eacute;e), et
                                 qui la distingue des instances d&eacute;tach&eacute;es qui ont &eacute;t&eacute; sauvegard&eacute;es ou charg&eacute;es dans une session pr&eacute;c&eacute;dente (<code class="literal">undefined</code> indique que la valeur de l'atribut identifiant devrait &ecirc;tre utilis&eacute;). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">generated</code> (optional - d&eacute;faut &agrave; <code class="literal">never</code>) : Indique que la valeur de la propri&eacute;t&eacute; version est g&eacute;n&eacute;r&eacute;e par la base de donn&eacute;es cf. <a href="mapping-generated.html" title="5.6.&nbsp;Propri&eacute;t&eacute;s g&eacute;n&eacute;r&eacute;es">Section&nbsp;5.6, &laquo;&nbsp;Propri&eacute;t&eacute;s g&eacute;n&eacute;r&eacute;es&nbsp;&raquo;</a>. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">insert</code> (optionnel - d&eacute;faut &agrave; <code class="literal">true</code>) : Indique si la colonne de version doit &ecirc;tre incluse dans les ordres insert. Peut &ecirc;tre &agrave; <code class="literal">false</code> si et seulement si la colonne de la base de donn&eacute;es est d&eacute;finie avec une valeur par d&eacute;faut &agrave; <code class="literal">0</code>. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Les num&eacute;ros de version doivent avoir les types Hibernate <code class="literal">long</code>, <code class="literal">integer</code>, <code class="literal">short</code>, <code class="literal">timestamp</code> ou <code class="literal">calendar</code>. 
               </p>
               <p>Une propri&eacute;t&eacute; de version ou un timestamp ne doit jamais &ecirc;tre null pour une instance d&eacute;tach&eacute;e, ainsi Hibernate pourra d&eacute;tecter
                  toute instance ayant une version ou un timestamp null comme transient, quelles que soient les strat&eacute;gies <code class="literal">unsaved-value</code> sp&eacute;cifi&eacute;es. <span class="emphasis"><em>D&eacute;clarer un num&eacute;ro de version ou un timestamp "nullable" est un moyen pratique d'&eacute;viter tout probl&egrave;me avec les r&eacute;attachements
                        transitifs dans Hibernate, particuli&egrave;rement utile pour ceux qui utilisent des identifiants assign&eacute;s ou des clefs compos&eacute;es
                        !</em></span> 
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-timestamp"></a>5.1.10.&nbsp;timestamp (optionnel)
                        </h3>
                     </div>
                  </div>
               </div>
               <p>L'&eacute;l&eacute;ment optionnel <code class="literal">&lt;timestamp&gt;</code> indique que la table contient des donn&eacute;es horodat&eacute;es (timestamp). Cela sert d'alternative &agrave; l'utilisation de num&eacute;ros de version.
                  Les timestamps (ou horodatage) sont par nature une impl&eacute;mentation moins fiable pour l'optimistic locking. Cependant, l'application
                  peut parfois utiliser l'horodatage &agrave; d'autres fins. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;timestamp
        column="timestamp_column"                                    <span class="co">(1)</span>
        name="propertyName"                                          <span class="co">(2)</span>
        access="field|property|ClassName"                            <span class="co">(3)</span>
        unsaved-value="null|undefined"                               <span class="co">(4)</span>
        source="vm|db"                                               <span class="co">(5)</span>
        generated="never|always"                                     <span class="co">(6)</span>
        node="element-name|@attribute-name|element/@attribute|."
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">column</code> (optionnel - par d&eacute;faut &agrave; le nom de la propri&eacute;t&eacute;) : Le nom d'une colonne contenant le timestamp. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code> : Le nom d'une propri&eacute;t&eacute; au sens JavaBean de type <code class="literal">Date</code> ou <code class="literal">Timestamp</code> de la classe persistante. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The strategy Hibernate should use for accessing the property value. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">unsaved-value</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">null</code>) : Propri&eacute;t&eacute; dont la valeur est un num&eacute;ro de version qui indique que l'instance est nouvellement instanci&eacute;e (non sauvegard&eacute;e),
                                 et qui la distingue des instances d&eacute;tach&eacute;es qui ont &eacute;t&eacute; sauvegard&eacute;es ou charg&eacute;es dans une session pr&eacute;c&eacute;dente (<code class="literal">undefined</code> indique que la valeur de l'attribut identifiant devrait &ecirc;tre utilis&eacute;e). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">source</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">vm</code>) : D'o&ugrave; Hibernate doit-il r&eacute;cup&eacute;rer la valeur du timestamp? Depuis la base de donn&eacute;es ou depuis la JVM d'ex&eacute;cution? Les valeurs
                                 de timestamp de la base de donn&eacute;es provoquent une surcharge puisque Hibernate doit interroger la base pour d&eacute;terminer la prochaine
                                 valeur mais cela est plus s&ucirc;r lorsque vous fonctionnez dans un cluster. Remarquez aussi que certains des dialectes ne supportent
                                 pas cette fonction, et que d'autres l'impl&eacute;mentent mal, provoquant des erreurs de pr&eacute;cision (Oracle 8 par exemple). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">generated</code> (optional - d&eacute;faut &agrave; <code class="literal">never</code>) : Indique que la valeur de ce timestamp est g&eacute;n&eacute;r&eacute;e par la base de donn&eacute;es cf. <a href="mapping-generated.html" title="5.6.&nbsp;Propri&eacute;t&eacute;s g&eacute;n&eacute;r&eacute;es">Section&nbsp;5.6, &laquo;&nbsp;Propri&eacute;t&eacute;s g&eacute;n&eacute;r&eacute;es&nbsp;&raquo;</a>. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Notez que <code class="literal">&lt;timestamp&gt;</code> est &eacute;quivalent &agrave; <code class="literal">&lt;version type="timestamp"&gt;</code>. 
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-property"></a>5.1.11.&nbsp;property
                        </h3>
                     </div>
                  </div>
               </div>
               <p>L'&eacute;l&eacute;ment <code class="literal">&lt;property&gt;</code> d&eacute;clare une propri&eacute;t&eacute; de la classe au sens JavaBean. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;property
        name="propertyName"                                          <span class="co">(1)</span>
        column="column_name"                                         <span class="co">(2)</span>
        type="typename"                                              <span class="co">(3)</span>
        update="true|false"                                          <span class="co">(4)</span>
        insert="true|false"                                          <span class="co">(4)</span>
        formula="arbitrary SQL expression"                           <span class="co">(5)</span>
        access="field|property|ClassName"                            <span class="co">(6)</span>
        lazy="true|false"                                            <span class="co">(7)</span>
        unique="true|false"                                          <span class="co">(8)</span>
        not-null="true|false"                                        <span class="co">(9)</span>
        optimistic-lock="true|false"                                 <span class="co">(10)</span>
        generated="never|insert|always"                              <span class="co">(11)</span>
        node="element-name|@attribute-name|element/@attribute|."
        index="index_name"
        unique_key="unique_key_id"
        length="L"
        precision="P"
        scale="S"
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code> : nom de la propri&eacute;t&eacute;, avec une lettre initiale en minuscule. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">column</code> (optionnel - par d&eacute;faut au nom de la propri&eacute;t&eacute;) : le nom de la colonne mapp&eacute;e. Cela peut aussi &ecirc;tre indiqu&eacute; dans le(s) sous-&eacute;l&eacute;ment(s)
                                 <code class="literal">&lt;column&gt;</code>. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">type</code> (optionnel) : nom indiquant le type Hibernate. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">update, insert</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">true</code>) : indique que les colonnes mapp&eacute;es devraient &ecirc;tre incluses dans des <code class="literal">UPDATE</code> SQL et/ou des <code class="literal">INSERT</code>. Mettre les deux &agrave; <code class="literal">false</code> emp&ecirc;che la propagation en base de donn&eacute;es (utile si vous savez qu'un trigger affectera la valeur &agrave; la colonne). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">formula</code> (optionnel) : une expression SQL qui d&eacute;finit la valeur pour une propri&eacute;t&eacute; <span class="emphasis"><em>calcul&eacute;e</em></span>. Les propri&eacute;t&eacute;s calcul&eacute;es ne poss&egrave;de pas leur propre mapping. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The strategy Hibernate should use for accessing the property value. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">lazy</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">false</code>): Indique que cette propri&eacute;t&eacute; devrait &ecirc;tre charg&eacute;e en diff&eacute;r&eacute; (lazy loading) quand on acc&egrave;de &agrave; la variable d'instance pour
                                 la premi&egrave;re fois. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(8)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">unique</code> (optionnel): G&eacute;n&egrave;re le DDL d'une contrainte d'unicit&eacute; pour les colonnes. Permet aussi d'en faire la cible d'un <code class="literal">property-ref</code>. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(9)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">not-null</code> (optionnel): G&eacute;n&egrave;re le DDL d'une contrainte de non nullit&eacute; pour les colonnes. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(10)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">optimistic-lock</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">true</code>): Indique que les mises &agrave; jour de cette propri&eacute;t&eacute; peuvent ou non n&eacute;cessiter l'acquisition d'un verrou optimiste. En d'autres
                                 termes, cela d&eacute;termine s'il est n&eacute;cessaire d'incr&eacute;menter un num&eacute;ro de version quand cette propri&eacute;t&eacute; est marqu&eacute;e obsol&egrave;te (dirty).
                                 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(11)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">generated</code> (optional - d&eacute;faut &agrave;<code class="literal">never</code>): Indique que la valeur de ce timestamp est g&eacute;n&eacute;r&eacute;e par la base de donn&eacute;es cf. <a href="mapping-generated.html" title="5.6.&nbsp;Propri&eacute;t&eacute;s g&eacute;n&eacute;r&eacute;es">Section&nbsp;5.6, &laquo;&nbsp;Propri&eacute;t&eacute;s g&eacute;n&eacute;r&eacute;es&nbsp;&raquo;</a>. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p><span class="emphasis"><em>typename</em></span> peut &ecirc;tre: 
               </p>
               <div class="orderedlist">
                  <ol type="1" compact>
                     <li>
                        <p>Nom d'un type basique Hibernate (ex: <code class="literal">integer, string, character, date, timestamp, float, binary, serializable, object, blob</code>). 
                        </p>
                     </li>
                     <li>
                        <p>Nom d'une classe Java avec un type basique par d&eacute;faut (ex: <code class="literal">int, float, char, java.lang.String, java.util.Date, java.lang.Integer, java.sql.Clob</code>). 
                        </p>
                     </li>
                     <li>
                        <p>Nom d'une classe Java s&eacute;rialisable. </p>
                     </li>
                     <li>
                        <p>Nom d'une classe ayant un type sp&eacute;cifique (ex: <code class="literal">com.illflow.type.MyCustomType</code>). 
                        </p>
                     </li>
                  </ol>
               </div>
               <p>Si vous n'indiquez pas un type, Hibernate utlisera la r&eacute;flexion sur le nom de la propri&eacute;t&eacute; pour tenter de trouver le type
                  Hibernate correct. Hibernate essayera d'interpr&ecirc;ter le nom de la classe retourn&eacute;e par le getter de la propri&eacute;t&eacute; en utilisant
                  les r&eacute;gles 2, 3, 4 dans cet ordre. Cependant, ce n'est pas toujours suffisant. Dans certains cas vous aurez encore besoin
                  de l'attribut <code class="literal">type</code> (Par exemple, pour distinguer <code class="literal">Hibernate.DATE</code> et <code class="literal">Hibernate.TIMESTAMP</code>, ou pour pr&eacute;ciser un type sp&eacute;cifique). 
               </p>
               <p>L'attribut <code class="literal">access</code> permet de contr&ocirc;ler comment Hibernate acc&egrave;dera &agrave; la propri&eacute;t&eacute; &agrave; l'ex&eacute;cution. Par d&eacute;faut, Hibernate utilisera les m&eacute;thodes
                  set/get. Si vous indiquez <code class="literal">access="field"</code>, Hibernate ignorera les getter/setter et acc&egrave;dera &agrave; la propri&eacute;t&eacute; directement en utilisant la r&eacute;flexion. Vous pouvez sp&eacute;cifier
                  votre propre strat&eacute;gie d'acc&egrave;s aux propri&eacute;t&eacute; en donnant une classe qui impl&eacute;mente l'interface <code class="literal">org.hibernate.property.PropertyAccessor</code>. 
               </p>
               <p>Une fonctionnalit&eacute; particuli&egrave;rement int&eacute;ressante est les propri&eacute;t&eacute;s d&eacute;riv&eacute;es. Ces propri&eacute;t&eacute;s sont par d&eacute;finition en lecture
                  seule, la valeur de la propri&eacute;t&eacute; est calcul&eacute;e au chargement. Le calcul est d&eacute;clar&eacute; comme une expression SQL, qui se traduit
                  par une sous-requ&ecirc;te <code class="literal">SELECT</code> dans la requ&ecirc;te SQL qui charge une instance : 
               </p><pre class="programlisting">
&lt;property name="totalPrice"
    formula="( SELECT SUM (li.quantity*p.price) FROM LineItem li, Product p
                WHERE li.productId = p.productId
                AND li.customerId = customerId
                AND li.orderNumber = orderNumber )"/&gt;</pre><p>Remarquez que vous pouvez r&eacute;f&eacute;rencer la propre table des entit&eacute;s en ne d&eacute;clarant pas un alias sur une colonne particuli&egrave;re
                  (<code class="literal">customerId</code> dans l'exemple donn&eacute;). Notez aussi que vous pouvez utiliser le sous-&eacute;l&eacute;ment de mapping <code class="literal">&lt;formula&gt;</code> plut&ocirc;t que d'utiliser l'attribut si vous le souhaitez. 
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-manytoone"></a>5.1.12.&nbsp;many-to-one
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Une association ordinaire vers une autre classe persistante est d&eacute;clar&eacute;e en utilisant un &eacute;l&eacute;ment <code class="literal">many-to-one</code>. Le mod&egrave;le relationnel est une association de type many-to-one : une clef &eacute;trang&egrave;re dans une table r&eacute;f&eacute;rence la ou les clef(s)
                  primaire(s) dans la table cible. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;many-to-one
        name="propertyName"                                          <span class="co">(1)</span>
        column="column_name"                                         <span class="co">(2)</span>
        class="ClassName"                                            <span class="co">(3)</span>
        cascade="cascade_style"                                      <span class="co">(4)</span>
        fetch="join|select"                                          <span class="co">(5)</span>
        update="true|false"                                          <span class="co">(6)</span>
        insert="true|false"                                          <span class="co">(6)</span>
        property-ref="propertyNameFromAssociatedClass"               <span class="co">(7)</span>
        access="field|property|ClassName"                            <span class="co">(8)</span>
        unique="true|false"                                          <span class="co">(9)</span>
        not-null="true|false"                                        <span class="co">(10)</span>
        optimistic-lock="true|false"                                 <span class="co">(11)</span>
        lazy="proxy|no-proxy|false"                                  <span class="co">(12)</span>
        not-found="ignore|exception"                                 <span class="co">(13)</span>
        entity-name="EntityName"                                     <span class="co">(14)</span>
        formula="arbitrary SQL expression"                           <span class="co">(15)</span>
        node="element-name|@attribute-name|element/@attribute|."
        embed-xml="true|false"
        index="index_name"
        unique_key="unique_key_id"
        foreign-key="foreign_key_name"
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code>: The name of the property. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">column</code> (optional): The name of the foreign key column. This may also be specified by nested <code class="literal">&lt;column&gt;</code> element(s). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">class</code> (optional - defaults to the property type determined by reflection): The name of the associated class. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">cascade</code> (optionnel) : Indique quelles op&eacute;rations doivent &ecirc;tre propag&eacute;es de l'objet p&egrave;re vers les objets associ&eacute;s. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">fetch</code> (optional - defaults to <code class="literal">select</code>): Chooses between outer-join fetching or sequential select fetching. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">update, insert</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">true</code>) : indique que les colonnes mapp&eacute;es devraient &ecirc;tre incluses dans des <code class="literal">UPDATE</code> SQL et/ou des <code class="literal">INSERT</code>. Mettre les deux &agrave; <code class="literal">false</code> emp&ecirc;che la propagation en base de donn&eacute;es (utile si vous savez qu'un trigger affectera la valeur &agrave; la colonne). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">property-ref</code> : (optionnel) Le nom d'une propri&eacute;t&eacute; de la classe associ&eacute;e qui est li&eacute;e &agrave; cette clef &eacute;trang&egrave;re. Si ce n'est pas sp&eacute;cifi&eacute;,
                                 la clef primaire de la classe associ&eacute;e est utilis&eacute;e. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(8)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The strategy Hibernate should use for accessing the property value. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(9)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">unique</code> (optionnel) : G&eacute;n&egrave;re le DDL d'une contrainte d'unicit&eacute; pour la clef &eacute;trang&egrave;re. Permet aussi d'en faire la cible d'un <code class="literal">property-ref</code>. Cela permet de cr&eacute;er une v&eacute;ritable association one-to-one. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(10)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">not-null</code> (optionnel) : G&eacute;n&egrave;re le DDL pour une contrainte de non nullit&eacute; pour la clef &eacute;trang&egrave;re. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(11)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">optimistic-lock</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">true</code>) : Indique que les mises &agrave; jour de cette propri&eacute;t&eacute; requi&egrave;rent ou non l'acquisition d'un verrou optimiste. En d'autres termes,
                                 d&eacute;termine si un incr&eacute;ment de version doit avoir lieu quand la propri&eacute;t&eacute; est marqu&eacute;e obsol&egrave;te (dirty). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(12)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">lazy</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">false</code>) : Indique que cette propri&eacute;t&eacute; doit &ecirc;tre charg&eacute;e en diff&eacute;r&eacute; (lazy loading) au premier acc&egrave;s &agrave; la variable d'instance (n&eacute;cessite
                                 une instrumentation du bytecode lors de la phase de construction). Remarquez que cela n'influence pas le comportement du proxy
                                 Hibernate - comme l'attribut <code class="literal">lazy</code> sur des classes ou des mappings de collections, mais utilise l'interception pour le chargement diff&eacute;r&eacute;. <code class="literal">lazy="false"</code> indique que l'association sera toujours charg&eacute;e. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(13)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">not-found</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">exception</code>) : Indique comment les clefs &eacute;trang&egrave;res qui r&eacute;f&eacute;rencent des lignes manquantes doivent &ecirc;tre manipul&eacute;es : <code class="literal">ignore</code> traitera une ligne manquante comme une association nulle. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(14)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">entity-name</code> (optional): The entity name of the associated class. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(15)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">formula</code> (optionnel) : une expression SQL qui d&eacute;finit la valeur pour une cl&eacute; &eacute;trang&egrave;re calcul&eacute;e. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Donner une valeur significative &agrave; l'attribut <code class="literal">cascade</code> autre que <code class="literal">none</code> propagera certaines op&eacute;rations &agrave; l'objet associ&eacute;. Les valeurs significatives sont les noms des op&eacute;rations Hibernate basiques,
                  <code class="literal">persist, merge, delete, save-update, evict, replicate, lock, refresh</code>, ainsi que les valeurs sp&eacute;ciales <code class="literal">delete-orphan</code> et <code class="literal">all</code> et des combinaisons de noms d'op&eacute;rations s&eacute;par&eacute;es par des virgules, comme par exemple <code class="literal">cascade="persist,merge,evict"</code> ou <code class="literal">cascade="all,delete-orphan"</code>. Voir <a href="objectstate-transitive.html" title="10.11.&nbsp;Persistance transitive">Section&nbsp;10.11, &laquo;&nbsp;Persistance transitive&nbsp;&raquo;</a> pour une explication compl&egrave;te. Notez que les assocations many-to-one et one-to-one ne supportent pas orphan delete. 
               </p>
               <p>Une d&eacute;claration <code class="literal">many-to-one</code> typique est aussi simple que : 
               </p><pre class="programlisting">&lt;many-to-one name="product" class="Product" column="PRODUCT_ID"/&gt;</pre><p>L'attribut <code class="literal">property-ref</code> devrait &ecirc;tre utilis&eacute; pour mapper seulement des donn&eacute;es provenant d'un ancien syst&egrave;me o&ugrave; les clefs &eacute;trang&egrave;res font r&eacute;f&eacute;rence
                  &agrave; une clef unique de la table associ&eacute;e et qui n'est pas la clef primaire. C'est un cas de mauvaise conception relationnelle.
                  Par exemple, supposez que la classe <code class="literal">Product</code> a un num&eacute;ro de s&eacute;rie unique qui n'est pas la clef primaire. (L'attribut <code class="literal">unique</code> contr&ocirc;le la g&eacute;n&eacute;ration DDL par Hibernate avec l'outil SchemaExport.) 
               </p><pre class="programlisting">&lt;property name="serialNumber" unique="true" type="string" column="SERIAL_NUMBER"/&gt;</pre><p>Ainsi le mapping pour <code class="literal">OrderItem</code> peut utiliser : 
               </p><pre class="programlisting">&lt;many-to-one name="product" property-ref="serialNumber" column="PRODUCT_SERIAL_NUMBER"/&gt;</pre><p>bien que ce ne soit certainement pas encourag&eacute;. </p>
               <p>Si la clef unique r&eacute;f&eacute;renc&eacute;e comprend des propri&eacute;t&eacute;s multiples de l'entit&eacute; associ&eacute;e, vous devez mapper ces propri&eacute;t&eacute;s &agrave; l'int&eacute;rieur
                  d'un &eacute;l&eacute;ment <code class="literal">&lt;properties&gt;</code>. 
               </p>
               <p>one-to-one </p><pre class="programlisting">&lt;many-to-one name="owner" property-ref="identity.ssn" column="OWNER_SSN"/&gt;</pre></div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-onetoone"></a>5.1.13.&nbsp;Une association one-to-one vers une autre classe persistante est d&eacute;clar&eacute;e avec l'&eacute;l&eacute;ment <code class="literal">one-to-one</code>.
                        </h3>
                     </div>
                  </div>
               </div>
               <p><code class="literal">name</code> : Le nom de la propri&eacute;t&eacute;. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;one-to-one
        name="propertyName"                                          <span class="co">(1)</span>
        class="ClassName"                                            <span class="co">(2)</span>
        cascade="cascade_style"                                      <span class="co">(3)</span>
        constrained="true|false"                                     <span class="co">(4)</span>
        fetch="join|select"                                          <span class="co">(5)</span>
        property-ref="propertyNameFromAssociatedClass"               <span class="co">(6)</span>
        access="field|property|ClassName"                            <span class="co">(7)</span>
        formula="any SQL expression"                                 <span class="co">(8)</span>
        lazy="proxy|no-proxy|false"                                  <span class="co">(9)</span>
        entity-name="EntityName"                                     <span class="co">(10)</span>
        node="element-name|@attribute-name|element/@attribute|."
        embed-xml="true|false"
        foreign-key="foreign_key_name"
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code>: The name of the property. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">class</code> (optional - defaults to the property type determined by reflection): The name of the associated class. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">constrained</code> (optionnel) : Indique qu'une contrainte de clef &eacute;trang&egrave;re sur la clef primaire de la table mapp&eacute;e r&eacute;f&eacute;rence la table de la
                                 classe associ&eacute;e. Cette option affecte l'ordre dans lequel chaque <code class="literal">save()</code> et chaque <code class="literal">delete()</code> sont cascad&eacute;s et d&eacute;termine si l'association peut utiliser un proxy (aussi utilis&eacute; par l'outil d'export de sch&eacute;ma). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">fetch</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">select</code>) : Choisit entre r&eacute;cup&eacute;ration par jointure externe ou select s&eacute;quentiel. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">fetch</code> (optional - defaults to <code class="literal">select</code>): Chooses between outer-join fetching or sequential select fetching. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">access</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">property</code>) : La strat&eacute;gie &agrave; utiliser par Hibernate pour acc&eacute;der &agrave; la valeur de la propri&eacute;t&eacute;. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The strategy Hibernate should use for accessing the property value. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(8)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">lazy</code> (optionnel - par d&eacute;faut <code class="literal">proxy</code>) : Par d&eacute;faut, les associations simples sont soumise &agrave; proxy. <code class="literal">lazy="no-proxy"</code> sp&eacute;cifie que la propri&eacute;t&eacute; doit &ecirc;tre charg&eacute;e &agrave; la demande au premier acc&egrave;s &agrave; l'instance. (n&eacute;cessite l'intrumentation du bytecode
                                 &agrave; la construction). <code class="literal">lazy="false"</code> indique que l'association sera toujours charg&eacute;e agressivement. <span class="emphasis"><em>Notez que si <code class="literal">constrained="false"</code>, l'utilisation de proxy est impossible et Hibernate chargera automatiquement l'association !</em></span> 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(9)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">entity-name</code> (optional) : The entity name of the associated class. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(10)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">entity-name</code> (optional): The entity name of the associated class. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>associations par clef primaire </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>association par clef &eacute;trang&egrave;re unique </p>
                     </li>
                     <li>
                        <p>Les associations par clef primaire ne n&eacute;cessitent pas une colonne suppl&eacute;mentaire en table ; si deux lignes sont li&eacute;s par l'association
                           alors les deux lignes de la table partagent la m&ecirc;me valeur de clef primaire. Donc si vous voulez que deux objets soient li&eacute;s
                           par une association par clef primaire, vous devez faire en sorte qu'on leur assigne la m&ecirc;me valeur d'identifiant ! 
                        </p>
                     </li>
                  </ul>
               </div>
               <p>Pour une association par clef primaire, ajoutez les mappings suivants &agrave; <code class="literal">Employee</code> et <code class="literal">Person</code>, respectivement. 
               </p>
               <p>Maintenant, vous devez faire en sorte que les clefs primaires des lignes li&eacute;es dans les tables PERSON et EMPLOYEE sont &eacute;gales.
                  On utilise une strat&eacute;gie Hibernate sp&eacute;ciale de g&eacute;n&eacute;ration d'identifiants appel&eacute;e <code class="literal">foreign</code> : 
               </p><pre class="programlisting">&lt;one-to-one name="person" class="Person"/&gt;</pre><pre class="programlisting">&lt;one-to-one name="employee" class="Employee" constrained="true"/&gt;</pre><p>Une instance fra&icirc;chement enregistr&eacute;e de <code class="literal">Person</code> se voit alors assign&eacute;e la m&ecirc;me valeur de clef primaire que l'instance de <code class="literal">Employee</code> r&eacute;f&eacute;renc&eacute;e par la propri&eacute;t&eacute; <code class="literal">employee</code> de cette <code class="literal">Person</code>. 
               </p><pre class="programlisting">&lt;class name="person" table="PERSON"&gt;
    &lt;id name="id" column="PERSON_ID"&gt;
        &lt;generator class="foreign"&gt;
            &lt;param name="property"&gt;employee&lt;/param&gt;
        &lt;/generator&gt;
    &lt;/id&gt;
    ...
    &lt;one-to-one name="employee"
        class="Employee"
        constrained="true"/&gt;
&lt;/class&gt;</pre><p>Alternativement, une clef &eacute;trang&egrave;re avec contrainte d'unicit&eacute; de <code class="literal">Employee</code> vers <code class="literal">Person</code> peut &ecirc;tre indiqu&eacute;e ainsi : 
               </p>
               <p>Et cette association peut &ecirc;tre rendue bidirectionnelle en ajoutant ceci au mapping de <code class="literal">Person</code> : 
               </p><pre class="programlisting">&lt;many-to-one name="person" class="Person" column="PERSON_ID" unique="true"/&gt;</pre><p>natural-id </p><pre class="programlisting">&lt;one-to-one name="employee" class="Employee" property-ref="person"/&gt;</pre></div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-naturalid"></a>5.1.14.&nbsp;Bien que nous recommandions l'utilisation de cl&eacute; primaire g&eacute;n&eacute;r&eacute;e, vous devriez toujours essayer d'identifier des
                           cl&eacute; m&eacute;tier (naturelles) pour toutes vos entit&eacute;s. Une cl&eacute; naturelle est une propri&eacute;t&eacute; ou une combinaison de propri&eacute;t&eacute;s uniques
                           et non nulles. Si elle est aussi immuable, c'est encore mieux. Mappez les propri&eacute;t&eacute;s de la cl&eacute; naturelle dans l'&eacute;l&eacute;ment <code class="literal">&lt;natural-id&gt;</code>. Hibernate g&eacute;n&eacute;rera la cl&eacute; unique n&eacute;cessaire et les contraintes de non-nullit&eacute;, et votre mapping s'auto-documentera.
                        </h3>
                     </div>
                  </div>
               </div><pre class="programlisting">&lt;natural-id mutable="true|false"/&gt;
        &lt;property ... /&gt;
        &lt;many-to-one ... /&gt;
        ......
&lt;/natural-id&gt;</pre><p>Nous vous recommandons fortement d'impl&eacute;menter <code class="literal">equals()</code> et <code class="literal">hashCode()</code> pour comparer les cl&eacute;s naturelles de l'entit&eacute;. 
               </p>
               <p>Ce mapping n'est pas destin&eacute; &agrave; &ecirc;tre utilis&eacute; avec des entit&eacute;s qui ont des cl&eacute;s naturelles. </p>
               <p><code class="literal">mutable</code> (optionel, par d&eacute;faut &agrave; <code class="literal">false</code>) : Par d&eacute;faut, les identifiants naturels sont suppos&eacute;s &ecirc;tre immuable (constants). 
               </p>
               <div class="itemizedlist">
                  <ul type="disc" compact>
                     <li>
                        <p>component, dynamic-component </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-component"></a>5.1.15.&nbsp;L'&eacute;l&eacute;ment <code class="literal">&lt;component&gt;</code> mappe les propri&eacute;t&eacute;s d'un objet fils aux colonnes d'une classe parente. Les composants peuvent en retour d&eacute;clarer leurs propres
                           propri&eacute;t&eacute;s, composants ou collections. Voir "Components" plus bas.
                        </h3>
                     </div>
                  </div>
               </div>
               <p><code class="literal">name</code> : Nom de la propri&eacute;t&eacute; 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;component
        name="propertyName"                 <span class="co">(1)</span>
        class="className"                   <span class="co">(2)</span>
        insert="true|false"                 <span class="co">(3)</span>
        update="true|false"                 <span class="co">(4)</span>
        access="field|property|ClassName"   <span class="co">(5)</span>
        lazy="true|false"                   <span class="co">(6)</span>
        optimistic-lock="true|false"        <span class="co">(7)</span>
        unique="true|false"                 <span class="co">(8)</span>
        node="element-name|."
&gt;

        &lt;property ...../&gt;
        &lt;many-to-one .... /&gt;
        ........
&lt;/component&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code>: The name of the property. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">insert</code> : Est ce que les colonnes mapp&eacute;es apparaissent dans les <code class="literal">INSERT</code>s ? 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">insert</code>: Do the mapped columns appear in SQL <code class="literal">INSERT</code>s? 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">update</code>: Do the mapped columns appear in SQL <code class="literal">UPDATE</code>s? 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The strategy Hibernate should use for accessing the property value. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">optimistic-lock</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">true</code>) : Indique que les mises &agrave; jour sur ce composant n&eacute;cessitent ou non l'acquisition d'un verrou optimiste. En d'autres termes,
                                 cela d&eacute;termine si une incr&eacute;mentation de version doit avoir lieu quand la propri&eacute;t&eacute; est marqu&eacute;e obsol&egrave;te (dirty). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(7)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">unique</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">false</code>) : Indique qu'une contrainte d'unicit&eacute; existe sur toutes les colonnes mapp&eacute;es de ce composant. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(8)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">unique</code> (optional - defaults to <code class="literal">false</code>): Specifies that a unique constraint exists upon all mapped columns of the component. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>L'&eacute;l&eacute;ment <code class="literal">&lt;component&gt;</code> permet de d&eacute;clarer sous-&eacute;l&eacute;ment <code class="literal">&lt;parent&gt;</code> qui associe une propri&eacute;t&eacute; de la classe composant comme une r&eacute;f&eacute;rence arri&egrave;re vers l'entit&eacute; contenante. 
               </p>
               <p>L'&eacute;l&eacute;ment <code class="literal">&lt;dynamic-component&gt;</code> permet &agrave; une <code class="literal">Map</code> d'&ecirc;tre mapp&eacute;e comme un composant, quand les noms de la propri&eacute;t&eacute; font r&eacute;f&eacute;rence aux clefs de cette Map, voir <a href="components-dynamic.html" title="8.5.&nbsp;Composant Dynamique">Section&nbsp;8.5, &laquo;&nbsp;Composant Dynamique&nbsp;&raquo;</a>. 
               </p>
               <p>properties </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-properties"></a>5.1.16.&nbsp;L'&eacute;l&eacute;ment <code class="literal">&lt;properties&gt;</code> permet la d&eacute;finition d'un groupement logique nomm&eacute; des propri&eacute;t&eacute;s d'une classe. L'utilisation la plus importante de cette
                           construction est la possibilit&eacute; pour une combinaison de propri&eacute;t&eacute;s d'&ecirc;tre la cible d'un <code class="literal">property-ref</code>. C'est aussi un moyen pratique de d&eacute;finir une contrainte d'unicit&eacute; multi-colonnes.
                        </h3>
                     </div>
                  </div>
               </div>
               <p><code class="literal">name</code> : Le nom logique d'un regroupement et <span class="emphasis"><em>non</em></span> le v&eacute;ritable nom d'une propri&eacute;t&eacute;. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;properties
        name="logicalName"                  <span class="co">(1)</span>
        insert="true|false"                 <span class="co">(2)</span>
        update="true|false"                 <span class="co">(3)</span>
        optimistic-lock="true|false"        <span class="co">(4)</span>
        unique="true|false"                 <span class="co">(5)</span>
&gt;

        &lt;property ...../&gt;
        &lt;many-to-one .... /&gt;
        ........
&lt;/properties&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">insert</code> : Est-ce que les colonnes mapp&eacute;es apparaissent dans les <code class="literal">INSERT</code>s ? 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">insert</code>: Do the mapped columns appear in SQL <code class="literal">INSERT</code>s? 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">update</code>: Do the mapped columns appear in SQL <code class="literal">UPDATE</code>s? 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">unique</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">false</code>) : Indique qu'une contrainte d'unicit&eacute; existe sur toutes les colonnes mapp&eacute;es de ce composant. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">unique</code> (optional - defaults to <code class="literal">false</code>): Specifies that a unique constraint exists upon all mapped columns of the component. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Alors nous pourrions avoir une association sur des donn&eacute;es d'un ancien syst&egrave;me (legacy) qui font r&eacute;f&eacute;rence &agrave; cette clef unique
                  de la table <code class="literal">Person</code> au lieu de la clef primaire : 
               </p><pre class="programlisting">&lt;class name="Person"&gt;
    &lt;id name="personNumber"/&gt;
    ...
    &lt;properties name="name"
            unique="true" update="false"&gt;
        &lt;property name="firstName"/&gt;
        &lt;property name="initial"/&gt;
        &lt;property name="lastName"/&gt;
    &lt;/properties&gt;
&lt;/class&gt;</pre><p>Nous ne recommandons pas l'utilisation de ce genre de chose en dehors du contexte de mapping de donn&eacute;es h&eacute;rit&eacute;es d'anciens
                  syst&egrave;mes. 
               </p><pre class="programlisting">&lt;many-to-one name="person"
         class="Person" property-ref="name"&gt;
    &lt;column name="firstName"/&gt;
    &lt;column name="initial"/&gt;
    &lt;column name="lastName"/&gt;
&lt;/many-to-one&gt;</pre><p>subclass </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-subclass"></a>5.1.17.&nbsp;Pour finir, la persistance polymorphique n&eacute;cessite la d&eacute;claration de chaque sous-classe de la classe persistante de
                           base. pour la strat&eacute;gie de mapping de type table-per-class-hierarchy, on utilise la d&eacute;claration <code class="literal">&lt;subclass&gt;</code>.
                        </h3>
                     </div>
                  </div>
               </div>
               <p><code class="literal">name</code> : Le nom complet de la sous-classe. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;subclass
        name="ClassName"                              <span class="co">(1)</span>
        discriminator-value="discriminator_value"     <span class="co">(2)</span>
        proxy="ProxyInterface"                        <span class="co">(3)</span>
        lazy="true|false"                             <span class="co">(4)</span>
        dynamic-update="true|false"
        dynamic-insert="true|false"
        entity-name="EntityName"
        node="element-name"
        extends="SuperclassName"&gt;

        &lt;property .... /&gt;
        .....
&lt;/subclass&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code>: The fully qualified class name of the subclass. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">proxy</code> (optionnel) : Indique une classe ou interface &agrave; utiliser pour les chargements &agrave; la demande des proxies (lazy). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">proxy</code> (optional): Specifies a class or interface to use for lazy initializing proxies. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">lazy</code> (optional, defaults to <code class="literal">true</code>): Setting <code class="literal">lazy="false"</code> disables the use of lazy fetching. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Pour plus d'infos sur le mapping d'h&eacute;ritage, voir <a href="inheritance.html" title="Chapitre&nbsp;9.&nbsp;Mapping d'h&eacute;ritage de classe">Chapitre&nbsp;9, <i xmlns:xlink="http://www.w3.org/1999/xlink">Mapping d'h&eacute;ritage de classe</i></a>. 
               </p>
               <p>Pour des informations sur les mappings d'h&eacute;ritage, voir <a href="inheritance.html" title="Chapitre&nbsp;9.&nbsp;Mapping d'h&eacute;ritage de classe">Chapitre&nbsp;9, <i xmlns:xlink="http://www.w3.org/1999/xlink">Mapping d'h&eacute;ritage de classe</i></a>. 
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-joinedsubclass"></a>5.1.18.&nbsp;joined-subclass
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Une autre fa&ccedil;on possible de faire est la suivante, chaque sous-classe peut &ecirc;tre mapp&eacute;e vers sa propre table (strat&eacute;gie de
                  mapping de type table-per-subclass). L'&eacute;tat h&eacute;rit&eacute; est r&eacute;cup&eacute;r&eacute; en joignant la table de la super-classe. L'&eacute;l&eacute;ment <code class="literal">&lt;joined-subclass&gt;</code> est utilis&eacute;. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;joined-subclass
        name="ClassName"                    <span class="co">(1)</span>
        table="tablename"                   <span class="co">(2)</span>
        proxy="ProxyInterface"              <span class="co">(3)</span>
        lazy="true|false"                   <span class="co">(4)</span>
        dynamic-update="true|false"
        dynamic-insert="true|false"
        schema="schema"
        catalog="catalog"
        extends="SuperclassName"
        persister="ClassName"
        subselect="SQL expression"
        entity-name="EntityName"
        node="element-name"&gt;

        &lt;key .... &gt;

        &lt;property .... /&gt;
        .....
&lt;/joined-subclass&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code>: The fully qualified class name of the subclass. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">table</code>: The name of the subclass table. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">proxy</code> (optional): Specifies a class or interface to use for lazy initializing proxies. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">lazy</code> (optional, defaults to <code class="literal">true</code>): Setting <code class="literal">lazy="false"</code> disables the use of lazy fetching. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Aucune colonne discriminante n'est n&eacute;cessaire pour cette strat&eacute;gie de mapping. Cependant, chaque sous-classe doit d&eacute;clarer
                  une colonne de table contenant l'objet identifiant qui utilise l'&eacute;l&eacute;ment <code class="literal">&lt;key&gt;</code>. Le mapping au d&eacute;but de ce chapitre serait r&eacute;-&eacute;crit ainsi : 
               </p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;

&lt;hibernate-mapping package="eg"&gt;

        &lt;class name="Cat" table="CATS"&gt;
                &lt;id name="id" column="uid" type="long"&gt;
                        &lt;generator class="hilo"/&gt;
                &lt;/id&gt;
                &lt;property name="birthdate" type="date"/&gt;
                &lt;property name="color" not-null="true"/&gt;
                &lt;property name="sex" not-null="true"/&gt;
                &lt;property name="weight"/&gt;
                &lt;many-to-one name="mate"/&gt;
                &lt;set name="kittens"&gt;
                        &lt;key column="MOTHER"/&gt;
                        &lt;one-to-many class="Cat"/&gt;
                &lt;/set&gt;
                &lt;joined-subclass name="DomesticCat" table="DOMESTIC_CATS"&gt;
                    &lt;key column="CAT"/&gt;
                    &lt;property name="name" type="string"/&gt;
                &lt;/joined-subclass&gt;
        &lt;/class&gt;

        &lt;class name="eg.Dog"&gt;
                &lt;!-- mapping for Dog could go here --&gt;
        &lt;/class&gt;

&lt;/hibernate-mapping&gt;</pre><p>Pour des informations sur les mappings d'h&eacute;ritage, voir <a href="inheritance.html" title="Chapitre&nbsp;9.&nbsp;Mapping d'h&eacute;ritage de classe">Chapitre&nbsp;9, <i xmlns:xlink="http://www.w3.org/1999/xlink">Mapping d'h&eacute;ritage de classe</i></a>. 
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-unionsubclass"></a>5.1.19.&nbsp;union-subclass
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Une troisi&egrave;me option est de seulement mapper vers des tables les classes concr&egrave;tes d'une hi&eacute;rarchie d'h&eacute;ritage, (strat&eacute;gie
                  de type table-per-concrete-class) o&ugrave; chaque table d&eacute;finit tous les &eacute;tats persistants de la classe, y compris les &eacute;tats h&eacute;rit&eacute;s.
                  Dans Hibernate il n'est absolument pas n&eacute;cessaire de mapper explicitement de telles hi&eacute;rarchies d'h&eacute;ritage. Vous pouvez simplement
                  mapper chaque classe avec une d&eacute;claration <code class="literal">&lt;class&gt;</code> diff&eacute;rente. Cependant, si vous souhaitez utiliser des associations polymorphiques (c&agrave;d une association vers la superclasse
                  de la hi&eacute;rarchie), vous devez utiliser le mapping <code class="literal">&lt;union-subclass&gt;</code>. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;union-subclass
        name="ClassName"                    <span class="co">(1)</span>
        table="tablename"                   <span class="co">(2)</span>
        proxy="ProxyInterface"              <span class="co">(3)</span>
        lazy="true|false"                   <span class="co">(4)</span>
        dynamic-update="true|false"
        dynamic-insert="true|false"
        schema="schema"
        catalog="catalog"
        extends="SuperclassName"
        abstract="true|false"
        persister="ClassName"
        subselect="SQL expression"
        entity-name="EntityName"
        node="element-name"&gt;

        &lt;property .... /&gt;
        .....
&lt;/union-subclass&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code>: The fully qualified class name of the subclass. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">table</code>: The name of the subclass table. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">proxy</code> (optional): Specifies a class or interface to use for lazy initializing proxies. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">lazy</code> (optional, defaults to <code class="literal">true</code>): Setting <code class="literal">lazy="false"</code> disables the use of lazy fetching. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Aucune colonne discriminante ou colonne clef n'est requise pour cette strat&eacute;gie de mapping. </p>
               <p>Pour des informations sur les mappings d'h&eacute;ritage, voir <a href="inheritance.html" title="Chapitre&nbsp;9.&nbsp;Mapping d'h&eacute;ritage de classe">Chapitre&nbsp;9, <i xmlns:xlink="http://www.w3.org/1999/xlink">Mapping d'h&eacute;ritage de classe</i></a>. 
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-join"></a>5.1.20.&nbsp;join
                        </h3>
                     </div>
                  </div>
               </div>
               <p>En utilisant l'&eacute;l&eacute;ment <code class="literal">&lt;join&gt;</code>, il est possible de mapper des propri&eacute;t&eacute;s d'une classe sur plusieurs tables. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;join
        table="tablename"                        <span class="co">(1)</span>
        schema="owner"                           <span class="co">(2)</span>
        catalog="catalog"                        <span class="co">(3)</span>
        fetch="join|select"                      <span class="co">(4)</span>
        inverse="true|false"                     <span class="co">(5)</span>
        optional="true|false"&gt;                   <span class="co">(6)</span>

        &lt;key ... /&gt;

        &lt;property ... /&gt;
        ...
&lt;/join&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">table</code> : Le nom de la table jointe. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">schema</code> (optional): Override the schema name specified by the root <code class="literal">&lt;hibernate-mapping&gt;</code> element. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">catalog</code> (optional): Override the catalog name specified by the root <code class="literal">&lt;hibernate-mapping&gt;</code> element. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">fetch</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">join</code>) : Si positionn&eacute; &agrave; <code class="literal">join</code>, Hibernate utilisera une jointure interne pour charger une <code class="literal">jointure</code> d&eacute;finie par une classe ou ses super-classes et une jointure externe pour une <code class="literal">&lt;jointure&gt;</code> d&eacute;finie par une sous-classe. Si positionn&eacute; &agrave; <code class="literal">select</code> alors Hibernate utilisera un select s&eacute;quentiel pour une <code class="literal">&lt;jointure&gt;</code> d&eacute;finie sur une sous-classe, qui ne sera d&eacute;livr&eacute;e que si une ligne se repr&eacute;sente une instance de la sous-classe. Les jointures
                                 internes seront quand m&ecirc;me utilis&eacute;es pour charger une <code class="literal">&lt;jointure&gt;</code> d&eacute;finie par une classe et ses super-classes. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">inverse</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">false</code>) : Si positionn&eacute; &agrave; true, Hibernate n'essaiera pas d'ins&eacute;rer ou de mettre &agrave; jour les propri&eacute;t&eacute;s d&eacute;finies par cette jointure.
                                 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">optionnel</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">false</code>) : Si positionn&eacute; &agrave; true, Hibernate ins&egrave;rera une ligne seulement si les propri&eacute;t&eacute;s d&eacute;finies par cette jointure sont non-nulles
                                 et utilisera toujours une jointure externe pour charger les propri&eacute;t&eacute;s. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Par exemple, les informations d'adresse pour une personne peuvent &ecirc;tre mapp&eacute;es vers une table s&eacute;par&eacute;e (tout en pr&eacute;servant
                  des s&eacute;mantiques de type valeur pour toutes ses propri&eacute;t&eacute;s) : 
               </p><pre class="programlisting">&lt;class name="Person"
    table="PERSON"&gt;

    &lt;id name="id" column="PERSON_ID"&gt;...&lt;/id&gt;

    &lt;join table="ADDRESS"&gt;
        &lt;key column="ADDRESS_ID"/&gt;
        &lt;property name="address"/&gt;
        &lt;property name="zip"/&gt;
        &lt;property name="country"/&gt;
    &lt;/join&gt;
    ...</pre><p>Cette fonctionnalit&eacute; est souvent seulement utile pour les mod&egrave;les de donn&eacute;es h&eacute;rit&eacute;s d'anciens syst&egrave;mes (legacy), nous recommandons
                  d'utiliser moins de tables que de classes et un mod&egrave;le de domaine &agrave; granularit&eacute; fine. Cependant, c'est utile pour passer d'une
                  strat&eacute;gie de mapping d'h&eacute;ritage &agrave; une autre dans une hi&eacute;rarchie simple ainsi qu'il est expliqu&eacute; plus tard. 
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-key"></a>5.1.21.&nbsp;key
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Nous avons rencontr&eacute; l'&eacute;l&eacute;ment <code class="literal">&lt;key&gt;</code> &agrave; plusieurs reprises maintenant. Il appara&icirc;t partout que l'&eacute;l&eacute;ment de mapping parent d&eacute;finit une jointure sur une nouvele
                  table, et d&eacute;finit la clef &eacute;trang&egrave;re dans la table jointe, ce qui r&eacute;f&eacute;rence la clef primaire de la table d'origine. 
               </p>
               <div class="programlistingco"><pre class="programlisting">&lt;key
        column="columnname"                      <span class="co">(1)</span>
        on-delete="noaction|cascade"             <span class="co">(2)</span>
        property-ref="propertyName"              <span class="co">(3)</span>
        not-null="true|false"                    <span class="co">(4)</span>
        update="true|false"                      <span class="co">(5)</span>
        unique="true|false"                      <span class="co">(6)</span>
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">column</code> (optional): The name of the foreign key column. This may also be specified by nested <code class="literal">&lt;column&gt;</code> element(s). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">on-delete</code> (optionnel, par d&eacute;faut &agrave; <code class="literal">noaction</code>) : Indique si la contrainte de clef &eacute;trang&egrave;re poss&egrave;de la possibilit&eacute; au niveau base de donn&eacute;es de suppression en cascade.
                                 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">property-ref</code> (optionnel) : Indique que la clef &eacute;trang&egrave;re fait r&eacute;f&eacute;rence &agrave; des colonnes qui ne sont pas la clef primaire de la table d'origine
                                 (Pour les donn&eacute;es de syst&egrave;mes legacy). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">not-null</code> (optionnel) : Indique que les colonnes des clefs &eacute;trang&egrave;res ne peuvent pas &ecirc;tre nulles (c'est implicite si la clef &eacute;trang&egrave;re
                                 fait partie de la clef primaire). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">update</code> (optionnel) : Indique que la clef &eacute;trang&egrave;re ne devrait jamais &ecirc;tre mise &agrave; jour (implicite si celle-ci fait partie de la clef
                                 primaire). 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">unique</code> (optionnel) : Indique que la clef &eacute;trang&egrave;re doit poss&eacute;der une contrainte d'unicit&eacute; (implicite si la clef &eacute;trang&egrave;re est aussi
                                 la clef primaire). 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
               <p>Nous recommandons pour les syst&egrave;mes o&ugrave; les suppressions doivent &ecirc;tre performantes de d&eacute;finir toutes les clefs <code class="literal">on-delete="cascade"</code>, ainsi Hibernate utilisera une contrainte <code class="literal">ON CASCADE DELETE</code> au niveau base de donn&eacute;es, plut&ocirc;t que de nombreux <code class="literal">DELETE</code> individuels. Attention, cette fonctionnalit&eacute; court-circuite la strat&eacute;gie habituelle de verrou optimiste pour les donn&eacute;es
                  versionn&eacute;es. 
               </p>
               <p>Les attributs <code class="literal">not-null</code> et <code class="literal">update</code> sont utiles pour mapper une association one-to-many unidirectionnelle. Si vous mappez un one-to-many unidirectionnel vers
                  une clef &eacute;trang&egrave;re non nulle, vous <span class="emphasis"><em>devez</em></span> d&eacute;clarer la colonne de la clef en utilisant <code class="literal">&lt;key not-null="true"&gt;</code>. 
               </p>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-column"></a>5.1.22.&nbsp;&eacute;l&eacute;ments column et formula
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Tout &eacute;l&eacute;ment de mapping qui accepte un attribut <code class="literal">column</code> acceptera alternativement un sous-&eacute;l&eacute;ment <code class="literal">&lt;column&gt;</code>. De fa&ccedil;on identique, <code class="literal">&lt;formula&gt;</code> est une alternative &agrave; l'attribut <code class="literal">formula</code>. 
               </p><pre class="programlisting">&lt;column
        name="column_name"
        length="N"
        precision="N"
        scale="N"
        not-null="true|false"
        unique="true|false"
        unique-key="multicolumn_unique_key_name"
        index="index_name"
        sql-type="sql_type_name"
        check="SQL expression"
        default="SQL expression"/&gt;</pre><pre class="programlisting">&lt;formula&gt;SQL expression&lt;/formula&gt;</pre><p>Les attributs <code class="literal">column</code> et <code class="literal">formula</code> peuvent m&ecirc;me &ecirc;tre combin&eacute;s au sein d'une m&ecirc;me propri&eacute;t&eacute; ou mapping d'association pour exprimer, par exemple, des conditions
                  de jointure exotiques. 
               </p><pre class="programlisting">&lt;many-to-one name="homeAddress" class="Address"
        insert="false" update="false"&gt;
    &lt;column name="person_id" not-null="true" length="10"/&gt;
    &lt;formula&gt;'MAILING'&lt;/formula&gt;
&lt;/many-to-one&gt;</pre></div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-declaration-import"></a>5.1.23.&nbsp;import
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Supposez que votre application poss&egrave;de deux classes persistantes du m&ecirc;me nom, et vous ne voulez pas pr&eacute;ciser le nom Java complet
                  (packages inclus) dans les queries Hibernate. Les classes peuvent alors &ecirc;tre "import&eacute;es" explicitement plut&ocirc;t que de compter
                  sur <code class="literal">auto-import="true"</code>.Vous pouvez m&ecirc;me importer des classes et interfaces qui ne sont pas mapp&eacute;es explicitement. 
               </p><pre class="programlisting">&lt;import class="java.lang.Object" rename="Universe"/&gt;</pre><div class="programlistingco"><pre class="programlisting">&lt;import
        class="ClassName"              <span class="co">(1)</span>
        rename="ShortName"             <span class="co">(2)</span>
/&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">class</code> : Nom Java complet de la classe. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">rename</code> (optionnel - par d&eacute;faut vaut le nom de la classe Java (sans package)) : Nom pouvant &ecirc;tre utilis&eacute; dans le langage de requ&ecirc;te.
                                 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
            <div class="sect2" lang="fr-FR">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="mapping-types-anymapping"></a>5.1.24.&nbsp;any
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Il existe encore un type de mapping de propri&eacute;t&eacute;. L'&eacute;l&eacute;ment de mapping <code class="literal">&lt;any&gt;</code> d&eacute;finit une association polymorphique vers des classes de tables multiples. Ce type de mapping requiert toujours plus d'une
                  colonne. La premi&egrave;re colonne contient le type de l'entit&eacute; associ&eacute;e. Les colonnes restantes contiennent l'identifiant. il est
                  impossible de sp&eacute;cifier une contrainte de clef &eacute;trang&egrave;re pour ce type d'association, donc ce n'est certainement pas consid&eacute;r&eacute;
                  comme le moyen habituel de mapper des associations (polymorphiques). Vous devriez utiliser cela uniquement dans des cas particuliers
                  (par exemple des logs d'audit, des donn&eacute;es de session utilisateur, etc...). 
               </p>
               <p>L'attribut <code class="literal">meta-type</code> permet &agrave; l'application de sp&eacute;cifier un type personnalis&eacute; qui mappe des valeurs de colonnes de le base de donn&eacute;es sur des
                  classes persistantes qui ont un attribut identifiant du type sp&eacute;cifi&eacute; par <code class="literal">id-type</code>. Vous devez sp&eacute;cifier le mapping &agrave; partir de valeurs du m&eacute;ta-type sur les noms des classes. 
               </p><pre class="programlisting">&lt;any name="being" id-type="long" meta-type="string"&gt;
    &lt;meta-value value="TBL_ANIMAL" class="Animal"/&gt;
    &lt;meta-value value="TBL_HUMAN" class="Human"/&gt;
    &lt;meta-value value="TBL_ALIEN" class="Alien"/&gt;
    &lt;column name="table_name"/&gt;
    &lt;column name="id"/&gt;
&lt;/any&gt;</pre><div class="programlistingco"><pre class="programlisting">&lt;any
        name="propertyName"                      <span class="co">(1)</span>
        id-type="idtypename"                     <span class="co">(2)</span>
        meta-type="metatypename"                 <span class="co">(3)</span>
        cascade="cascade_style"                  <span class="co">(4)</span>
        access="field|property|ClassName"        <span class="co">(5)</span>
        optimistic-lock="true|false"             <span class="co">(6)</span>
&gt;
        &lt;meta-value ... /&gt;
        &lt;meta-value ... /&gt;
        .....
        &lt;column .... /&gt;
        &lt;column .... /&gt;
        .....
&lt;/any&gt;</pre><div class="calloutlist">
                     <table border="0" summary="Callout list">
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(1)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">name</code> : le nom de la propri&eacute;t&eacute;. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(2)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">id-type</code> : le type identifiant. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(3)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">meta-type</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">string</code>) : Tout type permis pour un mapping par discriminateur. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(4)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">cascade</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">none</code>) : le style de cascade. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(5)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">access</code> (optional - defaults to <code class="literal">property</code>): The strategy Hibernate should use for accessing the property value. 
                              </p>
                           </td>
                        </tr>
                        <tr>
                           <td width="5%" valign="top" align="left">
                              <fo:inline xmlns:fo="http://www.w3.org/1999/XSL/Format" color="black" padding-top="0.1em" padding-bottom="0.1em" padding-start="0.2em" padding-end="0.2em" baseline-shift="0.1em" font-weight="bold" font-size="75%">(6)</fo:inline>
                           </td>
                           <td valign="top" align="left">
                              <p><code class="literal">optimistic-lock</code> (optionnel - par d&eacute;faut &agrave; <code class="literal">true</code>) : Indique que les mises &agrave; jour sur cette propri&eacute;t&eacute; n&eacute;cessitent ou non l'acquisition d'un verrou optimiste. En d'autres termes,
                                 d&eacute;finit si un incr&eacute;ment de version doit avoir lieu quand cette propri&eacute;t&eacute; est marqu&eacute;e dirty. 
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="persistent-classes-extensions.html">Pr&eacute;c&eacute;dent</a>&nbsp;
               </td>
               <td width="20%" align="center">&nbsp;</td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="mapping-types.html">Suivant</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">4.6.&nbsp;Extentsions&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td>
               <td width="40%" align="right" valign="top">&nbsp;5.2.&nbsp;Hibernate Types</td>
            </tr>
         </table>
      </div>
   </body>
</html>